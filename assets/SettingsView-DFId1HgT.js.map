{"version":3,"file":"SettingsView-DFId1HgT.js","sources":["../../src/types/wikibase-config.ts","../../src/views/SettingsView.vue"],"sourcesContent":["/**\n * Configuration for a Wikibase instance\n */\nexport interface WikibaseConfig {\n  /** Unique identifier for this configuration */\n  id: string\n\n  /** Display name (e.g., \"Wikidata\", \"FactGrid\") */\n  name: string\n\n  /** SPARQL endpoint URL */\n  sparqlEndpoint: string\n\n  /** Entity URI prefix (e.g., \"http://www.wikidata.org/entity/\") */\n  entityPrefix: string\n\n  /** Property prefix (e.g., \"P\" for Wikidata properties like P31) */\n  propertyPrefix: string\n\n  /** Wikibase ontology namespace */\n  wikibaseOntology: string\n\n  /** Whether the wikibase:label service is available */\n  labelService: boolean\n\n  /** Supported features for this instance */\n  supportedFeatures: WikibaseFeatures\n\n  /** Custom SPARQL prefixes for this instance */\n  customPrefixes?: Record<string, string>\n\n  /** Rate limiting configuration */\n  rateLimit?: RateLimitConfig\n\n  /** Theme customization for this instance */\n  theme?: WikibaseTheme\n\n  /** Whether this endpoint requires authenticated access (e.g., OAuth) */\n  requiresAuthentication?: boolean\n\n  /**\n   * Whether authentication is cookie-based (browser handles it automatically).\n   * If true, requests will be made with credentials and may work if user is logged in.\n   */\n  cookieBasedAuth?: boolean\n\n  /** URL to redirect user to for OAuth login (if authentication required) */\n  authUrl?: string\n\n  /** Optional note shown when special access is required */\n  availabilityNote?: string\n}\n\nexport interface WikibaseFeatures {\n  /** Support for wikibase:statements predicate */\n  statements: boolean\n\n  /** Sitelinks available */\n  sitelinks: boolean\n\n  /** Qualifier support */\n  qualifiers: boolean\n\n  /** Reference support */\n  references: boolean\n}\n\nexport interface RateLimitConfig {\n  /** Maximum requests per minute */\n  requestsPerMinute: number\n\n  /** Maximum concurrent requests */\n  concurrent: number\n}\n\nexport interface WikibaseTheme {\n  /** Primary color for this instance */\n  primary: string\n\n  /** Secondary color */\n  secondary: string\n}\n\n/**\n * Create a minimal WikibaseConfig with defaults\n */\nexport function createWikibaseConfig(\n  partial: Partial<WikibaseConfig> & Pick<WikibaseConfig, 'id' | 'name' | 'sparqlEndpoint'>\n): WikibaseConfig {\n  return {\n    entityPrefix: 'http://www.wikidata.org/entity/',\n    propertyPrefix: 'P',\n    wikibaseOntology: 'http://wikiba.se/ontology#',\n    labelService: true,\n    supportedFeatures: {\n      statements: true,\n      sitelinks: true,\n      qualifiers: true,\n      references: true,\n    },\n    ...partial,\n  }\n}\n","<script setup lang=\"ts\">\nimport { ref, computed } from 'vue'\nimport { useWikibaseStore } from '@/stores/wikibase'\nimport { useTheme } from 'vuetify'\nimport { createWikibaseConfig } from '@/types'\nimport { PRESET_CONFIGS } from '@/config/presets'\nimport { getQueryCache } from '@/services/cache'\n\nconst wikibaseStore = useWikibaseStore()\nconst theme = useTheme()\n\n// Form state for adding custom instance\nconst showAddDialog = ref(false)\nconst newInstance = ref({\n  id: '',\n  name: '',\n  sparqlEndpoint: '',\n})\n\nconst isDarkTheme = computed({\n  get: () => theme.global.current.value.dark,\n  set: (value: boolean) => {\n    theme.global.name.value = value ? 'dark' : 'light'\n  },\n})\n\nfunction addCustomInstance() {\n  if (!newInstance.value.id || !newInstance.value.name || !newInstance.value.sparqlEndpoint) {\n    return\n  }\n\n  const config = createWikibaseConfig({\n    id: newInstance.value.id,\n    name: newInstance.value.name,\n    sparqlEndpoint: newInstance.value.sparqlEndpoint,\n  })\n\n  wikibaseStore.addCustomConfig(config)\n  showAddDialog.value = false\n  newInstance.value = { id: '', name: '', sparqlEndpoint: '' }\n}\n\nfunction removeInstance(configId: string) {\n  wikibaseStore.removeCustomConfig(configId)\n}\n\nfunction isPreset(configId: string): boolean {\n  return PRESET_CONFIGS.some((c) => c.id === configId)\n}\n\n// Cache management\nconst cache = getQueryCache()\nconst cacheStats = ref(cache.getStats())\nconst cacheCleared = ref(false)\n\nfunction clearCache() {\n  cache.clear()\n  cacheStats.value = cache.getStats()\n  cacheCleared.value = true\n  setTimeout(() => { cacheCleared.value = false }, 3000)\n}\n\nfunction refreshCacheStats() {\n  cacheStats.value = cache.getStats()\n}\n</script>\n\n<template>\n  <div class=\"settings-view\">\n    <v-row class=\"mb-4\">\n      <v-col cols=\"12\">\n        <h1 class=\"text-h4 font-weight-bold\">Settings</h1>\n        <p class=\"text-subtitle-1 text-medium-emphasis mt-1\">\n          Configure WBProp and manage Wikibase instances\n        </p>\n      </v-col>\n    </v-row>\n\n    <!-- Theme Settings -->\n    <v-row>\n      <v-col cols=\"12\" md=\"6\">\n        <v-card>\n          <v-card-title>\n            <v-icon icon=\"mdi-palette\" class=\"mr-2\" />\n            Appearance\n          </v-card-title>\n          <v-card-text>\n            <v-switch\n              v-model=\"isDarkTheme\"\n              label=\"Dark Theme\"\n              color=\"primary\"\n              hide-details\n            />\n          </v-card-text>\n        </v-card>\n      </v-col>\n\n      <v-col cols=\"12\" md=\"6\">\n        <v-card>\n          <v-card-title class=\"d-flex align-center\">\n            <v-icon icon=\"mdi-cached\" class=\"mr-2\" />\n            Query Cache\n            <v-spacer />\n            <v-btn\n              icon=\"mdi-refresh\"\n              variant=\"text\"\n              size=\"small\"\n              @click=\"refreshCacheStats\"\n            />\n          </v-card-title>\n          <v-card-text>\n            <div class=\"d-flex align-center mb-3\">\n              <span class=\"text-medium-emphasis\">\n                {{ cacheStats.entries }} cached {{ cacheStats.entries === 1 ? 'query' : 'queries' }}\n              </span>\n              <v-chip size=\"x-small\" variant=\"tonal\" class=\"ml-2\">\n                TTL: {{ Math.round(cacheStats.ttlMs / 60000) }}min\n              </v-chip>\n            </div>\n            <v-btn\n              color=\"warning\"\n              variant=\"tonal\"\n              size=\"small\"\n              prepend-icon=\"mdi-delete-sweep\"\n              @click=\"clearCache\"\n            >\n              Clear Cache\n            </v-btn>\n            <v-alert\n              v-if=\"cacheCleared\"\n              type=\"success\"\n              variant=\"tonal\"\n              density=\"compact\"\n              class=\"mt-3\"\n            >\n              Cache cleared successfully\n            </v-alert>\n          </v-card-text>\n        </v-card>\n      </v-col>\n    </v-row>\n\n    <!-- Wikibase Instances -->\n    <v-row class=\"mt-4\">\n      <v-col cols=\"12\">\n        <v-card>\n          <v-card-title class=\"d-flex align-center\">\n            <v-icon icon=\"mdi-database\" class=\"mr-2\" />\n            Wikibase Instances\n            <v-spacer />\n            <v-btn\n              color=\"primary\"\n              prepend-icon=\"mdi-plus\"\n              @click=\"showAddDialog = true\"\n            >\n              Add Instance\n            </v-btn>\n          </v-card-title>\n          <v-card-text>\n            <v-list>\n              <v-list-item\n                v-for=\"config in wikibaseStore.allConfigs\"\n                :key=\"config.id\"\n                :title=\"config.name\"\n                :subtitle=\"config.sparqlEndpoint\"\n              >\n                <template #prepend>\n                  <v-avatar color=\"primary\" size=\"40\">\n                    <span class=\"text-uppercase\">{{ config.name.charAt(0) }}</span>\n                  </v-avatar>\n                </template>\n                <template #append>\n                  <v-chip\n                    v-if=\"config.requiresAuthentication\"\n                    color=\"warning\"\n                    size=\"small\"\n                    class=\"mr-2\"\n                    prepend-icon=\"mdi-lock\"\n                  >\n                    OAuth Required\n                  </v-chip>\n                  <v-chip\n                    v-if=\"config.id === wikibaseStore.activeConfig.id\"\n                    color=\"success\"\n                    size=\"small\"\n                    class=\"mr-2\"\n                  >\n                    Active\n                  </v-chip>\n                  <v-btn\n                    v-if=\"config.id !== wikibaseStore.activeConfig.id\"\n                    variant=\"text\"\n                    color=\"primary\"\n                    size=\"small\"\n                    @click=\"wikibaseStore.setActiveConfig(config.id)\"\n                  >\n                    Select\n                  </v-btn>\n                  <v-btn\n                    v-if=\"!isPreset(config.id)\"\n                    icon=\"mdi-delete\"\n                    variant=\"text\"\n                    color=\"error\"\n                    size=\"small\"\n                    @click=\"removeInstance(config.id)\"\n                  />\n                </template>\n              </v-list-item>\n            </v-list>\n          </v-card-text>\n        </v-card>\n      </v-col>\n    </v-row>\n\n    <!-- Add Instance Dialog -->\n    <v-dialog v-model=\"showAddDialog\" max-width=\"500\">\n      <v-card>\n        <v-card-title>Add Custom Wikibase Instance</v-card-title>\n        <v-card-text>\n          <v-text-field\n            v-model=\"newInstance.id\"\n            label=\"Instance ID\"\n            placeholder=\"e.g., my-wikibase\"\n            variant=\"outlined\"\n            density=\"compact\"\n            class=\"mb-3\"\n          />\n          <v-text-field\n            v-model=\"newInstance.name\"\n            label=\"Display Name\"\n            placeholder=\"e.g., My Wikibase\"\n            variant=\"outlined\"\n            density=\"compact\"\n            class=\"mb-3\"\n          />\n          <v-text-field\n            v-model=\"newInstance.sparqlEndpoint\"\n            label=\"SPARQL Endpoint URL\"\n            placeholder=\"e.g., https://my-wikibase.org/sparql\"\n            variant=\"outlined\"\n            density=\"compact\"\n          />\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer />\n          <v-btn variant=\"text\" @click=\"showAddDialog = false\">Cancel</v-btn>\n          <v-btn color=\"primary\" @click=\"addCustomInstance\">Add</v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </div>\n</template>\n\n<style scoped>\n.settings-view {\n  padding: 16px;\n}\n</style>\n"],"names":["createWikibaseConfig","partial","wikibaseStore","useWikibaseStore","theme","useTheme","showAddDialog","ref","newInstance","isDarkTheme","computed","value","addCustomInstance","config","removeInstance","configId","isPreset","PRESET_CONFIGS","c","cache","getQueryCache","cacheStats","cacheCleared","clearCache","refreshCacheStats","_openBlock","_createElementBlock","_hoisted_1","_createVNode","_component_v_row","_component_v_col","_cache","_createElementVNode","_component_v_card","_component_v_card_title","_component_v_icon","_component_v_card_text","_component_v_switch","$event","_component_v_spacer","_component_v_btn","_hoisted_2","_hoisted_3","_toDisplayString","_component_v_chip","_createBlock","_component_v_alert","_component_v_list","_Fragment","_renderList","_unref","_component_v_list_item","_component_v_avatar","_hoisted_4","_component_v_dialog","_component_v_text_field","_component_v_card_actions"],"mappings":"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"}