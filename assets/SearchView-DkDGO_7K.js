import{d as C,u as w,l as V,b as t,a as e,y as f,c as u,f as k,r as c,o as s,A as m,B as b,t as v,C as x,E as B,L,i as N,g as y,V as Q,F,G as I,H as q,n as D,I as P,D as A,_ as E}from"./index-DEexslqv.js";import{S as K,Q as T}from"./query-builder-BqqifzF3.js";const z={class:"search-view"},G={class:"text-subtitle-1 text-medium-emphasis mt-1"},H=C({__name:"SearchView",setup(R){const d=w(),o=c(""),i=c(!1),n=c([]),_=c(!1);async function h(){if(o.value.trim()){i.value=!0,_.value=!0;try{const l=new K(d.activeConfig),r=new T(d.activeConfig).buildPropertySearchQuery(o.value),S=await l.query(r);n.value=S.results.bindings.map(p=>({id:g(p.property?.value??""),label:p.propertyLabel?.value??"",description:p.propertyDescription?.value??""}))}catch(l){console.error("Search failed:",l),n.value=[]}finally{i.value=!1}}}function g(l){const a=l.match(/[PQ]\d+$/);return a?a[0]:l}return(l,a)=>(s(),V("div",z,[t(f,{class:"mb-4"},{default:e(()=>[t(m,{cols:"12"},{default:e(()=>[a[1]||(a[1]=b("h1",{class:"text-h4 font-weight-bold"},"Search Properties",-1)),b("p",G," Find properties in "+v(x(d).activeConfig.name),1)]),_:1})]),_:1}),t(f,null,{default:e(()=>[t(m,{cols:"12",md:"8",lg:"6"},{default:e(()=>[t(B,{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=r=>o.value=r),"prepend-inner-icon":"mdi-magnify",label:"Search for properties",placeholder:"e.g., instance of, date of birth",variant:"outlined",clearable:"",loading:i.value,onKeyup:L(h,["enter"])},{append:e(()=>[t(N,{color:"primary",loading:i.value,onClick:h},{default:e(()=>[...a[2]||(a[2]=[y(" Search ",-1)])]),_:1},8,["loading"])]),_:1},8,["modelValue","loading"])]),_:1})]),_:1}),_.value?(s(),u(f,{key:0},{default:e(()=>[t(m,{cols:"12"},{default:e(()=>[n.value.length>0?(s(),u(Q,{key:0},{default:e(()=>[t(F,null,{default:e(()=>[(s(!0),V(I,null,q(n.value,r=>(s(),u(P,{key:r.id,title:r.label,subtitle:r.description},{prepend:e(()=>[t(A,{size:"small",color:"primary",variant:"tonal",class:"mr-3"},{default:e(()=>[y(v(r.id),1)]),_:2},1024)]),_:2},1032,["title","subtitle"]))),128))]),_:1})]),_:1})):(s(),u(D,{key:1,type:"info",variant:"tonal"},{default:e(()=>[y(' No properties found matching "'+v(o.value)+'". ',1)]),_:1}))]),_:1})]),_:1})):k("",!0)]))}}),$=E(H,[["__scopeId","data-v-0b84c39b"]]);export{$ as default};
//# sourceMappingURL=SearchView-DkDGO_7K.js.map
