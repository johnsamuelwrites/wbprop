{"version":3,"file":"echarts-charts--KY6x23a.js","sources":["../../node_modules/echarts/lib/chart/helper/labelHelper.js","../../node_modules/echarts/lib/chart/helper/createClipPathFromCoordSys.js","../../node_modules/echarts/lib/coord/CoordinateSystem.js","../../node_modules/echarts/lib/processor/dataSample.js","../../node_modules/echarts/lib/chart/bar/BaseBarSeries.js","../../node_modules/echarts/lib/chart/bar/BarSeries.js","../../node_modules/echarts/lib/util/shape/sausage.js","../../node_modules/echarts/lib/label/sectorLabel.js","../../node_modules/echarts/lib/chart/helper/sectorHelper.js","../../node_modules/echarts/lib/chart/bar/BarView.js","../../node_modules/echarts/lib/chart/bar/install.js","../../node_modules/echarts/lib/chart/pie/pieLayout.js","../../node_modules/echarts/lib/processor/dataFilter.js","../../node_modules/echarts/lib/chart/pie/labelLayout.js","../../node_modules/echarts/lib/chart/pie/PieView.js","../../node_modules/echarts/lib/chart/helper/createSeriesDataSimply.js","../../node_modules/echarts/lib/visual/LegendVisualProvider.js","../../node_modules/echarts/lib/chart/pie/PieSeries.js","../../node_modules/echarts/lib/processor/negativeDataFilter.js","../../node_modules/echarts/lib/chart/pie/install.js","../../node_modules/echarts/lib/coord/cartesian/GridModel.js","../../node_modules/echarts/lib/coord/cartesian/AxisModel.js","../../node_modules/echarts/lib/coord/axisDefault.js","../../node_modules/echarts/lib/coord/axisCommonTypes.js","../../node_modules/echarts/lib/coord/axisModelCreator.js","../../node_modules/echarts/lib/coord/cartesian/Cartesian.js","../../node_modules/echarts/lib/coord/cartesian/Cartesian2D.js","../../node_modules/echarts/lib/coord/cartesian/Axis2D.js","../../node_modules/echarts/lib/coord/cartesian/cartesianAxisHelper.js","../../node_modules/echarts/lib/coord/axisAlignTicks.js","../../node_modules/echarts/lib/coord/cartesian/Grid.js","../../node_modules/echarts/lib/component/axis/AxisBuilder.js","../../node_modules/echarts/lib/component/axisPointer/modelHelper.js","../../node_modules/echarts/lib/component/axis/AxisView.js","../../node_modules/echarts/lib/component/axis/axisSplitHelper.js","../../node_modules/echarts/lib/component/axis/CartesianAxisView.js","../../node_modules/echarts/lib/component/grid/installSimple.js","../../node_modules/echarts/lib/component/helper/interactionMutex.js","../../node_modules/echarts/lib/component/helper/RoamController.js","../../node_modules/echarts/lib/data/helper/linkSeriesData.js","../../node_modules/echarts/lib/data/Tree.js","../../node_modules/echarts/lib/chart/helper/treeHelper.js","../../node_modules/echarts/lib/chart/treemap/treemapAction.js","../../node_modules/echarts/lib/chart/helper/enableAriaDecalForTree.js","../../node_modules/echarts/lib/chart/treemap/TreemapSeries.js","../../node_modules/echarts/lib/chart/treemap/Breadcrumb.js","../../node_modules/echarts/lib/util/animation.js","../../node_modules/echarts/lib/chart/treemap/TreemapView.js","../../node_modules/echarts/lib/visual/VisualMapping.js","../../node_modules/echarts/lib/chart/treemap/treemapVisual.js","../../node_modules/echarts/lib/chart/treemap/treemapLayout.js","../../node_modules/echarts/lib/chart/treemap/install.js","../../node_modules/echarts/lib/component/axisPointer/BaseAxisPointer.js","../../node_modules/echarts/lib/component/axisPointer/viewHelper.js","../../node_modules/echarts/lib/component/axisPointer/CartesianAxisPointer.js","../../node_modules/echarts/lib/component/axisPointer/AxisPointerModel.js","../../node_modules/echarts/lib/component/axisPointer/globalListener.js","../../node_modules/echarts/lib/component/axisPointer/AxisPointerView.js","../../node_modules/echarts/lib/component/axisPointer/findPointFromSeries.js","../../node_modules/echarts/lib/component/axisPointer/axisTrigger.js","../../node_modules/echarts/lib/component/axisPointer/install.js","../../node_modules/echarts/lib/component/grid/install.js","../../node_modules/echarts/lib/component/helper/listComponent.js","../../node_modules/echarts/lib/component/tooltip/TooltipModel.js","../../node_modules/echarts/lib/component/tooltip/helper.js","../../node_modules/echarts/lib/component/tooltip/TooltipHTMLContent.js","../../node_modules/echarts/lib/component/tooltip/TooltipRichContent.js","../../node_modules/echarts/lib/component/tooltip/TooltipView.js","../../node_modules/echarts/lib/component/tooltip/install.js","../../node_modules/echarts/lib/component/title/install.js","../../node_modules/echarts/lib/component/legend/LegendModel.js","../../node_modules/echarts/lib/component/legend/LegendView.js","../../node_modules/echarts/lib/component/legend/legendFilter.js","../../node_modules/echarts/lib/component/legend/legendAction.js","../../node_modules/echarts/lib/component/legend/installLegendPlain.js","../../node_modules/echarts/lib/component/legend/ScrollableLegendModel.js","../../node_modules/echarts/lib/component/legend/ScrollableLegendView.js","../../node_modules/echarts/lib/component/legend/scrollableLegendAction.js","../../node_modules/echarts/lib/component/legend/installLegendScroll.js","../../node_modules/echarts/lib/component/legend/install.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { retrieveRawValue } from '../../data/helper/dataProvider.js';\nimport { isArray } from 'zrender/lib/core/util.js';\n/**\r\n * @return label string. Not null/undefined\r\n */\nexport function getDefaultLabel(data, dataIndex) {\n  var labelDims = data.mapDimensionsAll('defaultedLabel');\n  var len = labelDims.length;\n  // Simple optimization (in lots of cases, label dims length is 1)\n  if (len === 1) {\n    var rawVal = retrieveRawValue(data, dataIndex, labelDims[0]);\n    return rawVal != null ? rawVal + '' : null;\n  } else if (len) {\n    var vals = [];\n    for (var i = 0; i < labelDims.length; i++) {\n      vals.push(retrieveRawValue(data, dataIndex, labelDims[i]));\n    }\n    return vals.join(' ');\n  }\n}\nexport function getDefaultInterpolatedLabel(data, interpolatedValue) {\n  var labelDims = data.mapDimensionsAll('defaultedLabel');\n  if (!isArray(interpolatedValue)) {\n    return interpolatedValue + '';\n  }\n  var vals = [];\n  for (var i = 0; i < labelDims.length; i++) {\n    var dimIndex = data.getDimensionIndex(labelDims[i]);\n    if (dimIndex >= 0) {\n      vals.push(interpolatedValue[dimIndex]);\n    }\n  }\n  return vals.join(' ');\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as graphic from '../../util/graphic.js';\nimport { round } from '../../util/number.js';\nimport { isFunction } from 'zrender/lib/core/util.js';\nfunction createGridClipPath(cartesian, hasAnimation, seriesModel, done, during) {\n  var rect = cartesian.getArea();\n  var x = rect.x;\n  var y = rect.y;\n  var width = rect.width;\n  var height = rect.height;\n  var lineWidth = seriesModel.get(['lineStyle', 'width']) || 0;\n  // Expand the clip path a bit to avoid the border is clipped and looks thinner\n  x -= lineWidth / 2;\n  y -= lineWidth / 2;\n  width += lineWidth;\n  height += lineWidth;\n  // fix: https://github.com/apache/incubator-echarts/issues/11369\n  width = Math.ceil(width);\n  if (x !== Math.floor(x)) {\n    x = Math.floor(x);\n    // if no extra 1px on `width`, it will still be clipped since `x` is floored\n    width++;\n  }\n  var clipPath = new graphic.Rect({\n    shape: {\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    }\n  });\n  if (hasAnimation) {\n    var baseAxis = cartesian.getBaseAxis();\n    var isHorizontal = baseAxis.isHorizontal();\n    var isAxisInversed = baseAxis.inverse;\n    if (isHorizontal) {\n      if (isAxisInversed) {\n        clipPath.shape.x += width;\n      }\n      clipPath.shape.width = 0;\n    } else {\n      if (!isAxisInversed) {\n        clipPath.shape.y += height;\n      }\n      clipPath.shape.height = 0;\n    }\n    var duringCb = isFunction(during) ? function (percent) {\n      during(percent, clipPath);\n    } : null;\n    graphic.initProps(clipPath, {\n      shape: {\n        width: width,\n        height: height,\n        x: x,\n        y: y\n      }\n    }, seriesModel, null, done, duringCb);\n  }\n  return clipPath;\n}\nfunction createPolarClipPath(polar, hasAnimation, seriesModel) {\n  var sectorArea = polar.getArea();\n  // Avoid float number rounding error for symbol on the edge of axis extent.\n  var r0 = round(sectorArea.r0, 1);\n  var r = round(sectorArea.r, 1);\n  var clipPath = new graphic.Sector({\n    shape: {\n      cx: round(polar.cx, 1),\n      cy: round(polar.cy, 1),\n      r0: r0,\n      r: r,\n      startAngle: sectorArea.startAngle,\n      endAngle: sectorArea.endAngle,\n      clockwise: sectorArea.clockwise\n    }\n  });\n  if (hasAnimation) {\n    var isRadial = polar.getBaseAxis().dim === 'angle';\n    if (isRadial) {\n      clipPath.shape.endAngle = sectorArea.startAngle;\n    } else {\n      clipPath.shape.r = r0;\n    }\n    graphic.initProps(clipPath, {\n      shape: {\n        endAngle: sectorArea.endAngle,\n        r: r\n      }\n    }, seriesModel);\n  }\n  return clipPath;\n}\nfunction createClipPath(coordSys, hasAnimation, seriesModel, done, during) {\n  if (!coordSys) {\n    return null;\n  } else if (coordSys.type === 'polar') {\n    return createPolarClipPath(coordSys, hasAnimation, seriesModel);\n  } else if (coordSys.type === 'cartesian2d') {\n    return createGridClipPath(coordSys, hasAnimation, seriesModel, done, during);\n  }\n  return null;\n}\nexport { createGridClipPath, createPolarClipPath, createClipPath };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nexport function isCoordinateSystemType(coordSys, type) {\n  return coordSys.type === type;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { isFunction, isString } from 'zrender/lib/core/util.js';\nvar samplers = {\n  average: function (frame) {\n    var sum = 0;\n    var count = 0;\n    for (var i = 0; i < frame.length; i++) {\n      if (!isNaN(frame[i])) {\n        sum += frame[i];\n        count++;\n      }\n    }\n    // Return NaN if count is 0\n    return count === 0 ? NaN : sum / count;\n  },\n  sum: function (frame) {\n    var sum = 0;\n    for (var i = 0; i < frame.length; i++) {\n      // Ignore NaN\n      sum += frame[i] || 0;\n    }\n    return sum;\n  },\n  max: function (frame) {\n    var max = -Infinity;\n    for (var i = 0; i < frame.length; i++) {\n      frame[i] > max && (max = frame[i]);\n    }\n    // NaN will cause illegal axis extent.\n    return isFinite(max) ? max : NaN;\n  },\n  min: function (frame) {\n    var min = Infinity;\n    for (var i = 0; i < frame.length; i++) {\n      frame[i] < min && (min = frame[i]);\n    }\n    // NaN will cause illegal axis extent.\n    return isFinite(min) ? min : NaN;\n  },\n  // TODO\n  // Median\n  nearest: function (frame) {\n    return frame[0];\n  }\n};\nvar indexSampler = function (frame) {\n  return Math.round(frame.length / 2);\n};\nexport default function dataSample(seriesType) {\n  return {\n    seriesType: seriesType,\n    // FIXME:TS never used, so comment it\n    // modifyOutputEnd: true,\n    reset: function (seriesModel, ecModel, api) {\n      var data = seriesModel.getData();\n      var sampling = seriesModel.get('sampling');\n      var coordSys = seriesModel.coordinateSystem;\n      var count = data.count();\n      // Only cartesian2d support down sampling. Disable it when there is few data.\n      if (count > 10 && coordSys.type === 'cartesian2d' && sampling) {\n        var baseAxis = coordSys.getBaseAxis();\n        var valueAxis = coordSys.getOtherAxis(baseAxis);\n        var extent = baseAxis.getExtent();\n        var dpr = api.getDevicePixelRatio();\n        // Coordinste system has been resized\n        var size = Math.abs(extent[1] - extent[0]) * (dpr || 1);\n        var rate = Math.round(count / size);\n        if (isFinite(rate) && rate > 1) {\n          if (sampling === 'lttb') {\n            seriesModel.setData(data.lttbDownSample(data.mapDimension(valueAxis.dim), 1 / rate));\n          } else if (sampling === 'minmax') {\n            seriesModel.setData(data.minmaxDownSample(data.mapDimension(valueAxis.dim), 1 / rate));\n          }\n          var sampler = void 0;\n          if (isString(sampling)) {\n            sampler = samplers[sampling];\n          } else if (isFunction(sampling)) {\n            sampler = sampling;\n          }\n          if (sampler) {\n            // Only support sample the first dim mapped from value axis.\n            seriesModel.setData(data.downSample(data.mapDimension(valueAxis.dim), 1 / rate, sampler, indexSampler));\n          }\n        }\n      }\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series.js';\nimport createSeriesData from '../helper/createSeriesData.js';\nimport { each } from 'zrender/lib/core/util.js';\nvar BaseBarSeriesModel = /** @class */function (_super) {\n  __extends(BaseBarSeriesModel, _super);\n  function BaseBarSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = BaseBarSeriesModel.type;\n    return _this;\n  }\n  BaseBarSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true\n    });\n  };\n  BaseBarSeriesModel.prototype.getMarkerPosition = function (value, dims, startingAtTick) {\n    var coordSys = this.coordinateSystem;\n    if (coordSys && coordSys.clampData) {\n      // PENDING if clamp ?\n      var clampData_1 = coordSys.clampData(value);\n      var pt_1 = coordSys.dataToPoint(clampData_1);\n      if (startingAtTick) {\n        each(coordSys.getAxes(), function (axis, idx) {\n          // If axis type is category, use tick coords instead\n          if (axis.type === 'category' && dims != null) {\n            var tickCoords = axis.getTicksCoords();\n            var alignTicksWithLabel = axis.getTickModel().get('alignWithLabel');\n            var targetTickId = clampData_1[idx];\n            // The index of rightmost tick of markArea is 1 larger than x1/y1 index\n            var isEnd = dims[idx] === 'x1' || dims[idx] === 'y1';\n            if (isEnd && !alignTicksWithLabel) {\n              targetTickId += 1;\n            }\n            // The only contains one tick, tickCoords is\n            // like [{coord: 0, tickValue: 0}, {coord: 0}]\n            // to the length should always be larger than 1\n            if (tickCoords.length < 2) {\n              return;\n            } else if (tickCoords.length === 2) {\n              // The left value and right value of the axis are\n              // the same. coord is 0 in both items. Use the max\n              // value of the axis as the coord\n              pt_1[idx] = axis.toGlobalCoord(axis.getExtent()[isEnd ? 1 : 0]);\n              return;\n            }\n            var leftCoord = void 0;\n            var coord = void 0;\n            var stepTickValue = 1;\n            for (var i = 0; i < tickCoords.length; i++) {\n              var tickCoord = tickCoords[i].coord;\n              // The last item of tickCoords doesn't contain\n              // tickValue\n              var tickValue = i === tickCoords.length - 1 ? tickCoords[i - 1].tickValue + stepTickValue : tickCoords[i].tickValue;\n              if (tickValue === targetTickId) {\n                coord = tickCoord;\n                break;\n              } else if (tickValue < targetTickId) {\n                leftCoord = tickCoord;\n              } else if (leftCoord != null && tickValue > targetTickId) {\n                coord = (tickCoord + leftCoord) / 2;\n                break;\n              }\n              if (i === 1) {\n                // Here we assume the step of category axes is\n                // the same\n                stepTickValue = tickValue - tickCoords[0].tickValue;\n              }\n            }\n            if (coord == null) {\n              if (!leftCoord) {\n                // targetTickId is smaller than all tick ids in the\n                // visible area, use the leftmost tick coord\n                coord = tickCoords[0].coord;\n              } else if (leftCoord) {\n                // targetTickId is larger than all tick ids in the\n                // visible area, use the rightmost tick coord\n                coord = tickCoords[tickCoords.length - 1].coord;\n              }\n            }\n            pt_1[idx] = axis.toGlobalCoord(coord);\n          }\n        });\n      } else {\n        var data = this.getData();\n        var offset = data.getLayout('offset');\n        var size = data.getLayout('size');\n        var offsetIndex = coordSys.getBaseAxis().isHorizontal() ? 0 : 1;\n        pt_1[offsetIndex] += offset + size / 2;\n      }\n      return pt_1;\n    }\n    return [NaN, NaN];\n  };\n  BaseBarSeriesModel.type = 'series.__base_bar__';\n  BaseBarSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    // stack: null\n    // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    barMinHeight: 0,\n    barMinAngle: 0,\n    // cursor: null,\n    large: false,\n    largeThreshold: 400,\n    progressive: 3e3,\n    progressiveChunkMode: 'mod'\n  };\n  return BaseBarSeriesModel;\n}(SeriesModel);\nSeriesModel.registerClass(BaseBarSeriesModel);\nexport default BaseBarSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport BaseBarSeriesModel from './BaseBarSeries.js';\nimport createSeriesData from '../helper/createSeriesData.js';\nimport { inheritDefaultOption } from '../../util/component.js';\nvar BarSeriesModel = /** @class */function (_super) {\n  __extends(BarSeriesModel, _super);\n  function BarSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = BarSeriesModel.type;\n    return _this;\n  }\n  BarSeriesModel.prototype.getInitialData = function () {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true,\n      createInvertedIndices: !!this.get('realtimeSort', true) || null\n    });\n  };\n  /**\r\n   * @override\r\n   */\n  BarSeriesModel.prototype.getProgressive = function () {\n    // Do not support progressive in normal mode.\n    return this.get('large') ? this.get('progressive') : false;\n  };\n  /**\r\n   * @override\r\n   */\n  BarSeriesModel.prototype.getProgressiveThreshold = function () {\n    // Do not support progressive in normal mode.\n    var progressiveThreshold = this.get('progressiveThreshold');\n    var largeThreshold = this.get('largeThreshold');\n    if (largeThreshold > progressiveThreshold) {\n      progressiveThreshold = largeThreshold;\n    }\n    return progressiveThreshold;\n  };\n  BarSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    return selectors.rect(data.getItemLayout(dataIndex));\n  };\n  BarSeriesModel.type = 'series.bar';\n  BarSeriesModel.dependencies = ['grid', 'polar'];\n  BarSeriesModel.defaultOption = inheritDefaultOption(BaseBarSeriesModel.defaultOption, {\n    // If clipped\n    // Only available on cartesian2d\n    clip: true,\n    roundCap: false,\n    showBackground: false,\n    backgroundStyle: {\n      color: 'rgba(180, 180, 180, 0.2)',\n      borderColor: null,\n      borderWidth: 0,\n      borderType: 'solid',\n      borderRadius: 0,\n      shadowBlur: 0,\n      shadowColor: null,\n      shadowOffsetX: 0,\n      shadowOffsetY: 0,\n      opacity: 1\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    },\n    realtimeSort: false\n  });\n  return BarSeriesModel;\n}(BaseBarSeriesModel);\nexport default BarSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport { Path } from '../graphic.js';\n/**\r\n * Sausage: similar to sector, but have half circle on both sides\r\n */\nvar SausageShape = /** @class */function () {\n  function SausageShape() {\n    this.cx = 0;\n    this.cy = 0;\n    this.r0 = 0;\n    this.r = 0;\n    this.startAngle = 0;\n    this.endAngle = Math.PI * 2;\n    this.clockwise = true;\n  }\n  return SausageShape;\n}();\nvar SausagePath = /** @class */function (_super) {\n  __extends(SausagePath, _super);\n  function SausagePath(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this.type = 'sausage';\n    return _this;\n  }\n  SausagePath.prototype.getDefaultShape = function () {\n    return new SausageShape();\n  };\n  SausagePath.prototype.buildPath = function (ctx, shape) {\n    var cx = shape.cx;\n    var cy = shape.cy;\n    var r0 = Math.max(shape.r0 || 0, 0);\n    var r = Math.max(shape.r, 0);\n    var dr = (r - r0) * 0.5;\n    var rCenter = r0 + dr;\n    var startAngle = shape.startAngle;\n    var endAngle = shape.endAngle;\n    var clockwise = shape.clockwise;\n    var PI2 = Math.PI * 2;\n    var lessThanCircle = clockwise ? endAngle - startAngle < PI2 : startAngle - endAngle < PI2;\n    if (!lessThanCircle) {\n      // Normalize angles\n      startAngle = endAngle - (clockwise ? PI2 : -PI2);\n    }\n    var unitStartX = Math.cos(startAngle);\n    var unitStartY = Math.sin(startAngle);\n    var unitEndX = Math.cos(endAngle);\n    var unitEndY = Math.sin(endAngle);\n    if (lessThanCircle) {\n      ctx.moveTo(unitStartX * r0 + cx, unitStartY * r0 + cy);\n      ctx.arc(unitStartX * rCenter + cx, unitStartY * rCenter + cy, dr, -Math.PI + startAngle, startAngle, !clockwise);\n    } else {\n      ctx.moveTo(unitStartX * r + cx, unitStartY * r + cy);\n    }\n    ctx.arc(cx, cy, r, startAngle, endAngle, !clockwise);\n    ctx.arc(unitEndX * rCenter + cx, unitEndY * rCenter + cy, dr, endAngle - Math.PI * 2, endAngle - Math.PI, !clockwise);\n    if (r0 !== 0) {\n      ctx.arc(cx, cy, r0, endAngle, startAngle, clockwise);\n    }\n    // ctx.closePath();\n  };\n  return SausagePath;\n}(Path);\nexport default SausagePath;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { calculateTextPosition } from 'zrender/lib/contain/text.js';\nimport { isArray, isNumber } from 'zrender/lib/core/util.js';\nexport function createSectorCalculateTextPosition(positionMapping, opts) {\n  opts = opts || {};\n  var isRoundCap = opts.isRoundCap;\n  return function (out, opts, boundingRect) {\n    var textPosition = opts.position;\n    if (!textPosition || textPosition instanceof Array) {\n      return calculateTextPosition(out, opts, boundingRect);\n    }\n    var mappedSectorPosition = positionMapping(textPosition);\n    var distance = opts.distance != null ? opts.distance : 5;\n    var sector = this.shape;\n    var cx = sector.cx;\n    var cy = sector.cy;\n    var r = sector.r;\n    var r0 = sector.r0;\n    var middleR = (r + r0) / 2;\n    var startAngle = sector.startAngle;\n    var endAngle = sector.endAngle;\n    var middleAngle = (startAngle + endAngle) / 2;\n    var extraDist = isRoundCap ? Math.abs(r - r0) / 2 : 0;\n    var mathCos = Math.cos;\n    var mathSin = Math.sin;\n    // base position: top-left\n    var x = cx + r * mathCos(startAngle);\n    var y = cy + r * mathSin(startAngle);\n    var textAlign = 'left';\n    var textVerticalAlign = 'top';\n    switch (mappedSectorPosition) {\n      case 'startArc':\n        x = cx + (r0 - distance) * mathCos(middleAngle);\n        y = cy + (r0 - distance) * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'top';\n        break;\n      case 'insideStartArc':\n        x = cx + (r0 + distance) * mathCos(middleAngle);\n        y = cy + (r0 + distance) * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'bottom';\n        break;\n      case 'startAngle':\n        x = cx + middleR * mathCos(startAngle) + adjustAngleDistanceX(startAngle, distance + extraDist, false);\n        y = cy + middleR * mathSin(startAngle) + adjustAngleDistanceY(startAngle, distance + extraDist, false);\n        textAlign = 'right';\n        textVerticalAlign = 'middle';\n        break;\n      case 'insideStartAngle':\n        x = cx + middleR * mathCos(startAngle) + adjustAngleDistanceX(startAngle, -distance + extraDist, false);\n        y = cy + middleR * mathSin(startAngle) + adjustAngleDistanceY(startAngle, -distance + extraDist, false);\n        textAlign = 'left';\n        textVerticalAlign = 'middle';\n        break;\n      case 'middle':\n        x = cx + middleR * mathCos(middleAngle);\n        y = cy + middleR * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'middle';\n        break;\n      case 'endArc':\n        x = cx + (r + distance) * mathCos(middleAngle);\n        y = cy + (r + distance) * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'bottom';\n        break;\n      case 'insideEndArc':\n        x = cx + (r - distance) * mathCos(middleAngle);\n        y = cy + (r - distance) * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'top';\n        break;\n      case 'endAngle':\n        x = cx + middleR * mathCos(endAngle) + adjustAngleDistanceX(endAngle, distance + extraDist, true);\n        y = cy + middleR * mathSin(endAngle) + adjustAngleDistanceY(endAngle, distance + extraDist, true);\n        textAlign = 'left';\n        textVerticalAlign = 'middle';\n        break;\n      case 'insideEndAngle':\n        x = cx + middleR * mathCos(endAngle) + adjustAngleDistanceX(endAngle, -distance + extraDist, true);\n        y = cy + middleR * mathSin(endAngle) + adjustAngleDistanceY(endAngle, -distance + extraDist, true);\n        textAlign = 'right';\n        textVerticalAlign = 'middle';\n        break;\n      default:\n        return calculateTextPosition(out, opts, boundingRect);\n    }\n    out = out || {};\n    out.x = x;\n    out.y = y;\n    out.align = textAlign;\n    out.verticalAlign = textVerticalAlign;\n    return out;\n  };\n}\nexport function setSectorTextRotation(sector, textPosition, positionMapping, rotateType) {\n  if (isNumber(rotateType)) {\n    // user-set rotation\n    sector.setTextConfig({\n      rotation: rotateType\n    });\n    return;\n  } else if (isArray(textPosition)) {\n    // user-set position, use 0 as auto rotation\n    sector.setTextConfig({\n      rotation: 0\n    });\n    return;\n  }\n  var shape = sector.shape;\n  var startAngle = shape.clockwise ? shape.startAngle : shape.endAngle;\n  var endAngle = shape.clockwise ? shape.endAngle : shape.startAngle;\n  var middleAngle = (startAngle + endAngle) / 2;\n  var anchorAngle;\n  var mappedSectorPosition = positionMapping(textPosition);\n  switch (mappedSectorPosition) {\n    case 'startArc':\n    case 'insideStartArc':\n    case 'middle':\n    case 'insideEndArc':\n    case 'endArc':\n      anchorAngle = middleAngle;\n      break;\n    case 'startAngle':\n    case 'insideStartAngle':\n      anchorAngle = startAngle;\n      break;\n    case 'endAngle':\n    case 'insideEndAngle':\n      anchorAngle = endAngle;\n      break;\n    default:\n      sector.setTextConfig({\n        rotation: 0\n      });\n      return;\n  }\n  var rotate = Math.PI * 1.5 - anchorAngle;\n  /**\r\n   * TODO: labels with rotate > Math.PI / 2 should be rotate another\r\n   * half round flipped to increase readability. However, only middle\r\n   * position supports this for now, because in other positions, the\r\n   * anchor point is not at the center of the text, so the positions\r\n   * after rotating is not as expected.\r\n   */\n  if (mappedSectorPosition === 'middle' && rotate > Math.PI / 2 && rotate < Math.PI * 1.5) {\n    rotate -= Math.PI;\n  }\n  sector.setTextConfig({\n    rotation: rotate\n  });\n}\nfunction adjustAngleDistanceX(angle, distance, isEnd) {\n  return distance * Math.sin(angle) * (isEnd ? -1 : 1);\n}\nfunction adjustAngleDistanceY(angle, distance, isEnd) {\n  return distance * Math.cos(angle) * (isEnd ? 1 : -1);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { isArray, map } from 'zrender/lib/core/util.js';\nimport { parsePercent } from 'zrender/lib/contain/text.js';\nexport function getSectorCornerRadius(model, shape, zeroIfNull) {\n  var cornerRadius = model.get('borderRadius');\n  if (cornerRadius == null) {\n    return zeroIfNull ? {\n      cornerRadius: 0\n    } : null;\n  }\n  if (!isArray(cornerRadius)) {\n    cornerRadius = [cornerRadius, cornerRadius, cornerRadius, cornerRadius];\n  }\n  var dr = Math.abs(shape.r || 0 - shape.r0 || 0);\n  return {\n    cornerRadius: map(cornerRadius, function (cr) {\n      return parsePercent(cr, dr);\n    })\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport Path from 'zrender/lib/graphic/Path.js';\nimport Group from 'zrender/lib/graphic/Group.js';\nimport { extend, each, map } from 'zrender/lib/core/util.js';\nimport { Rect, Sector, updateProps, initProps, removeElementWithFadeOut, traverseElements } from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport { setLabelStyle, getLabelStatesModels, setLabelValueAnimation, labelInner } from '../../label/labelStyle.js';\nimport { throttle } from '../../util/throttle.js';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys.js';\nimport Sausage from '../../util/shape/sausage.js';\nimport ChartView from '../../view/Chart.js';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem.js';\nimport { getDefaultLabel, getDefaultInterpolatedLabel } from '../helper/labelHelper.js';\nimport { warn } from '../../util/log.js';\nimport { createSectorCalculateTextPosition, setSectorTextRotation } from '../../label/sectorLabel.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nimport { getSectorCornerRadius } from '../helper/sectorHelper.js';\nvar mathMax = Math.max;\nvar mathMin = Math.min;\nfunction getClipArea(coord, data) {\n  var coordSysClipArea = coord.getArea && coord.getArea();\n  if (isCoordinateSystemType(coord, 'cartesian2d')) {\n    var baseAxis = coord.getBaseAxis();\n    // When boundaryGap is false or using time axis. bar may exceed the grid.\n    // We should not clip this part.\n    // See test/bar2.html\n    if (baseAxis.type !== 'category' || !baseAxis.onBand) {\n      var expandWidth = data.getLayout('bandWidth');\n      if (baseAxis.isHorizontal()) {\n        coordSysClipArea.x -= expandWidth;\n        coordSysClipArea.width += expandWidth * 2;\n      } else {\n        coordSysClipArea.y -= expandWidth;\n        coordSysClipArea.height += expandWidth * 2;\n      }\n    }\n  }\n  return coordSysClipArea;\n}\nvar BarView = /** @class */function (_super) {\n  __extends(BarView, _super);\n  function BarView() {\n    var _this = _super.call(this) || this;\n    _this.type = BarView.type;\n    _this._isFirstFrame = true;\n    return _this;\n  }\n  BarView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    this._model = seriesModel;\n    this._removeOnRenderedListener(api);\n    this._updateDrawMode(seriesModel);\n    var coordinateSystemType = seriesModel.get('coordinateSystem');\n    if (coordinateSystemType === 'cartesian2d' || coordinateSystemType === 'polar') {\n      // Clear previously rendered progressive elements.\n      this._progressiveEls = null;\n      this._isLargeDraw ? this._renderLarge(seriesModel, ecModel, api) : this._renderNormal(seriesModel, ecModel, api, payload);\n    } else if (process.env.NODE_ENV !== 'production') {\n      warn('Only cartesian2d and polar supported for bar.');\n    }\n  };\n  BarView.prototype.incrementalPrepareRender = function (seriesModel) {\n    this._clear();\n    this._updateDrawMode(seriesModel);\n    // incremental also need to clip, otherwise might be overlow.\n    // But must not set clip in each frame, otherwise all of the children will be marked redraw.\n    this._updateLargeClip(seriesModel);\n  };\n  BarView.prototype.incrementalRender = function (params, seriesModel) {\n    // Reset\n    this._progressiveEls = [];\n    // Do not support progressive in normal mode.\n    this._incrementalRenderLarge(params, seriesModel);\n  };\n  BarView.prototype.eachRendered = function (cb) {\n    traverseElements(this._progressiveEls || this.group, cb);\n  };\n  BarView.prototype._updateDrawMode = function (seriesModel) {\n    var isLargeDraw = seriesModel.pipelineContext.large;\n    if (this._isLargeDraw == null || isLargeDraw !== this._isLargeDraw) {\n      this._isLargeDraw = isLargeDraw;\n      this._clear();\n    }\n  };\n  BarView.prototype._renderNormal = function (seriesModel, ecModel, api, payload) {\n    var group = this.group;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var coord = seriesModel.coordinateSystem;\n    var baseAxis = coord.getBaseAxis();\n    var isHorizontalOrRadial;\n    if (coord.type === 'cartesian2d') {\n      isHorizontalOrRadial = baseAxis.isHorizontal();\n    } else if (coord.type === 'polar') {\n      isHorizontalOrRadial = baseAxis.dim === 'angle';\n    }\n    var animationModel = seriesModel.isAnimationEnabled() ? seriesModel : null;\n    var realtimeSortCfg = shouldRealtimeSort(seriesModel, coord);\n    if (realtimeSortCfg) {\n      this._enableRealtimeSort(realtimeSortCfg, data, api);\n    }\n    var needsClip = seriesModel.get('clip', true) || realtimeSortCfg;\n    var coordSysClipArea = getClipArea(coord, data);\n    // If there is clipPath created in large mode. Remove it.\n    group.removeClipPath();\n    // We don't use clipPath in normal mode because we needs a perfect animation\n    // And don't want the label are clipped.\n    var roundCap = seriesModel.get('roundCap', true);\n    var drawBackground = seriesModel.get('showBackground', true);\n    var backgroundModel = seriesModel.getModel('backgroundStyle');\n    var barBorderRadius = backgroundModel.get('borderRadius') || 0;\n    var bgEls = [];\n    var oldBgEls = this._backgroundEls;\n    var isInitSort = payload && payload.isInitSort;\n    var isChangeOrder = payload && payload.type === 'changeAxisOrder';\n    function createBackground(dataIndex) {\n      var bgLayout = getLayout[coord.type](data, dataIndex);\n      var bgEl = createBackgroundEl(coord, isHorizontalOrRadial, bgLayout);\n      bgEl.useStyle(backgroundModel.getItemStyle());\n      // Only cartesian2d support borderRadius.\n      if (coord.type === 'cartesian2d') {\n        bgEl.setShape('r', barBorderRadius);\n      } else {\n        bgEl.setShape('cornerRadius', barBorderRadius);\n      }\n      bgEls[dataIndex] = bgEl;\n      return bgEl;\n    }\n    ;\n    data.diff(oldData).add(function (dataIndex) {\n      var itemModel = data.getItemModel(dataIndex);\n      var layout = getLayout[coord.type](data, dataIndex, itemModel);\n      if (drawBackground) {\n        createBackground(dataIndex);\n      }\n      // If dataZoom in filteMode: 'empty', the baseValue can be set as NaN in \"axisProxy\".\n      if (!data.hasValue(dataIndex) || !isValidLayout[coord.type](layout)) {\n        return;\n      }\n      var isClipped = false;\n      if (needsClip) {\n        // Clip will modify the layout params.\n        // And return a boolean to determine if the shape are fully clipped.\n        isClipped = clip[coord.type](coordSysClipArea, layout);\n      }\n      var el = elementCreator[coord.type](seriesModel, data, dataIndex, layout, isHorizontalOrRadial, animationModel, baseAxis.model, false, roundCap);\n      if (realtimeSortCfg) {\n        /**\r\n         * Force label animation because even if the element is\r\n         * ignored because it's clipped, it may not be clipped after\r\n         * changing order. Then, if not using forceLabelAnimation,\r\n         * the label animation was never started, in which case,\r\n         * the label will be the final value and doesn't have label\r\n         * animation.\r\n         */\n        el.forceLabelAnimation = true;\n      }\n      updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\n      if (isInitSort) {\n        el.attr({\n          shape: layout\n        });\n      } else if (realtimeSortCfg) {\n        updateRealtimeAnimation(realtimeSortCfg, animationModel, el, layout, dataIndex, isHorizontalOrRadial, false, false);\n      } else {\n        initProps(el, {\n          shape: layout\n        }, seriesModel, dataIndex);\n      }\n      data.setItemGraphicEl(dataIndex, el);\n      group.add(el);\n      el.ignore = isClipped;\n    }).update(function (newIndex, oldIndex) {\n      var itemModel = data.getItemModel(newIndex);\n      var layout = getLayout[coord.type](data, newIndex, itemModel);\n      if (drawBackground) {\n        var bgEl = void 0;\n        if (oldBgEls.length === 0) {\n          bgEl = createBackground(oldIndex);\n        } else {\n          bgEl = oldBgEls[oldIndex];\n          bgEl.useStyle(backgroundModel.getItemStyle());\n          // Only cartesian2d support borderRadius.\n          if (coord.type === 'cartesian2d') {\n            bgEl.setShape('r', barBorderRadius);\n          } else {\n            bgEl.setShape('cornerRadius', barBorderRadius);\n          }\n          bgEls[newIndex] = bgEl;\n        }\n        var bgLayout = getLayout[coord.type](data, newIndex);\n        var shape = createBackgroundShape(isHorizontalOrRadial, bgLayout, coord);\n        updateProps(bgEl, {\n          shape: shape\n        }, animationModel, newIndex);\n      }\n      var el = oldData.getItemGraphicEl(oldIndex);\n      if (!data.hasValue(newIndex) || !isValidLayout[coord.type](layout)) {\n        group.remove(el);\n        return;\n      }\n      var isClipped = false;\n      if (needsClip) {\n        isClipped = clip[coord.type](coordSysClipArea, layout);\n        if (isClipped) {\n          group.remove(el);\n        }\n      }\n      if (!el) {\n        el = elementCreator[coord.type](seriesModel, data, newIndex, layout, isHorizontalOrRadial, animationModel, baseAxis.model, !!el, roundCap);\n      } else {\n        saveOldStyle(el);\n      }\n      if (realtimeSortCfg) {\n        el.forceLabelAnimation = true;\n      }\n      if (isChangeOrder) {\n        var textEl = el.getTextContent();\n        if (textEl) {\n          var labelInnerStore = labelInner(textEl);\n          if (labelInnerStore.prevValue != null) {\n            /**\r\n             * Set preValue to be value so that no new label\r\n             * should be started, otherwise, it will take a full\r\n             * `animationDurationUpdate` time to finish the\r\n             * animation, which is not expected.\r\n             */\n            labelInnerStore.prevValue = labelInnerStore.value;\n          }\n        }\n      }\n      // Not change anything if only order changed.\n      // Especially not change label.\n      else {\n        updateStyle(el, data, newIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\n      }\n      if (isInitSort) {\n        el.attr({\n          shape: layout\n        });\n      } else if (realtimeSortCfg) {\n        updateRealtimeAnimation(realtimeSortCfg, animationModel, el, layout, newIndex, isHorizontalOrRadial, true, isChangeOrder);\n      } else {\n        updateProps(el, {\n          shape: layout\n        }, seriesModel, newIndex, null);\n      }\n      data.setItemGraphicEl(newIndex, el);\n      el.ignore = isClipped;\n      group.add(el);\n    }).remove(function (dataIndex) {\n      var el = oldData.getItemGraphicEl(dataIndex);\n      el && removeElementWithFadeOut(el, seriesModel, dataIndex);\n    }).execute();\n    var bgGroup = this._backgroundGroup || (this._backgroundGroup = new Group());\n    bgGroup.removeAll();\n    for (var i = 0; i < bgEls.length; ++i) {\n      bgGroup.add(bgEls[i]);\n    }\n    group.add(bgGroup);\n    this._backgroundEls = bgEls;\n    this._data = data;\n  };\n  BarView.prototype._renderLarge = function (seriesModel, ecModel, api) {\n    this._clear();\n    createLarge(seriesModel, this.group);\n    this._updateLargeClip(seriesModel);\n  };\n  BarView.prototype._incrementalRenderLarge = function (params, seriesModel) {\n    this._removeBackground();\n    createLarge(seriesModel, this.group, this._progressiveEls, true);\n  };\n  BarView.prototype._updateLargeClip = function (seriesModel) {\n    // Use clipPath in large mode.\n    var clipPath = seriesModel.get('clip', true) && createClipPath(seriesModel.coordinateSystem, false, seriesModel);\n    var group = this.group;\n    if (clipPath) {\n      group.setClipPath(clipPath);\n    } else {\n      group.removeClipPath();\n    }\n  };\n  BarView.prototype._enableRealtimeSort = function (realtimeSortCfg, data, api) {\n    var _this = this;\n    // If no data in the first frame, wait for data to initSort\n    if (!data.count()) {\n      return;\n    }\n    var baseAxis = realtimeSortCfg.baseAxis;\n    if (this._isFirstFrame) {\n      this._dispatchInitSort(data, realtimeSortCfg, api);\n      this._isFirstFrame = false;\n    } else {\n      var orderMapping_1 = function (idx) {\n        var el = data.getItemGraphicEl(idx);\n        var shape = el && el.shape;\n        return shape &&\n        // The result should be consistent with the initial sort by data value.\n        // Do not support the case that both positive and negative exist.\n        Math.abs(baseAxis.isHorizontal() ? shape.height : shape.width)\n        // If data is NaN, shape.xxx may be NaN, so use || 0 here in case\n        || 0;\n      };\n      this._onRendered = function () {\n        _this._updateSortWithinSameData(data, orderMapping_1, baseAxis, api);\n      };\n      api.getZr().on('rendered', this._onRendered);\n    }\n  };\n  BarView.prototype._dataSort = function (data, baseAxis, orderMapping) {\n    var info = [];\n    data.each(data.mapDimension(baseAxis.dim), function (ordinalNumber, dataIdx) {\n      var mappedValue = orderMapping(dataIdx);\n      mappedValue = mappedValue == null ? NaN : mappedValue;\n      info.push({\n        dataIndex: dataIdx,\n        mappedValue: mappedValue,\n        ordinalNumber: ordinalNumber\n      });\n    });\n    info.sort(function (a, b) {\n      // If NaN, it will be treated as min val.\n      return b.mappedValue - a.mappedValue;\n    });\n    return {\n      ordinalNumbers: map(info, function (item) {\n        return item.ordinalNumber;\n      })\n    };\n  };\n  BarView.prototype._isOrderChangedWithinSameData = function (data, orderMapping, baseAxis) {\n    var scale = baseAxis.scale;\n    var ordinalDataDim = data.mapDimension(baseAxis.dim);\n    var lastValue = Number.MAX_VALUE;\n    for (var tickNum = 0, len = scale.getOrdinalMeta().categories.length; tickNum < len; ++tickNum) {\n      var rawIdx = data.rawIndexOf(ordinalDataDim, scale.getRawOrdinalNumber(tickNum));\n      var value = rawIdx < 0\n      // If some tick have no bar, the tick will be treated as min.\n      ? Number.MIN_VALUE\n      // PENDING: if dataZoom on baseAxis exits, is it a performance issue?\n      : orderMapping(data.indexOfRawIndex(rawIdx));\n      if (value > lastValue) {\n        return true;\n      }\n      lastValue = value;\n    }\n    return false;\n  };\n  /*\r\n   * Consider the case when A and B changed order, whose representing\r\n   * bars are both out of sight, we don't wish to trigger reorder action\r\n   * as long as the order in the view doesn't change.\r\n   */\n  BarView.prototype._isOrderDifferentInView = function (orderInfo, baseAxis) {\n    var scale = baseAxis.scale;\n    var extent = scale.getExtent();\n    var tickNum = Math.max(0, extent[0]);\n    var tickMax = Math.min(extent[1], scale.getOrdinalMeta().categories.length - 1);\n    for (; tickNum <= tickMax; ++tickNum) {\n      if (orderInfo.ordinalNumbers[tickNum] !== scale.getRawOrdinalNumber(tickNum)) {\n        return true;\n      }\n    }\n  };\n  BarView.prototype._updateSortWithinSameData = function (data, orderMapping, baseAxis, api) {\n    if (!this._isOrderChangedWithinSameData(data, orderMapping, baseAxis)) {\n      return;\n    }\n    var sortInfo = this._dataSort(data, baseAxis, orderMapping);\n    if (this._isOrderDifferentInView(sortInfo, baseAxis)) {\n      this._removeOnRenderedListener(api);\n      api.dispatchAction({\n        type: 'changeAxisOrder',\n        componentType: baseAxis.dim + 'Axis',\n        axisId: baseAxis.index,\n        sortInfo: sortInfo\n      });\n    }\n  };\n  BarView.prototype._dispatchInitSort = function (data, realtimeSortCfg, api) {\n    var baseAxis = realtimeSortCfg.baseAxis;\n    var sortResult = this._dataSort(data, baseAxis, function (dataIdx) {\n      return data.get(data.mapDimension(realtimeSortCfg.otherAxis.dim), dataIdx);\n    });\n    api.dispatchAction({\n      type: 'changeAxisOrder',\n      componentType: baseAxis.dim + 'Axis',\n      isInitSort: true,\n      axisId: baseAxis.index,\n      sortInfo: sortResult\n    });\n  };\n  BarView.prototype.remove = function (ecModel, api) {\n    this._clear(this._model);\n    this._removeOnRenderedListener(api);\n  };\n  BarView.prototype.dispose = function (ecModel, api) {\n    this._removeOnRenderedListener(api);\n  };\n  BarView.prototype._removeOnRenderedListener = function (api) {\n    if (this._onRendered) {\n      api.getZr().off('rendered', this._onRendered);\n      this._onRendered = null;\n    }\n  };\n  BarView.prototype._clear = function (model) {\n    var group = this.group;\n    var data = this._data;\n    if (model && model.isAnimationEnabled() && data && !this._isLargeDraw) {\n      this._removeBackground();\n      this._backgroundEls = [];\n      data.eachItemGraphicEl(function (el) {\n        removeElementWithFadeOut(el, model, getECData(el).dataIndex);\n      });\n    } else {\n      group.removeAll();\n    }\n    this._data = null;\n    this._isFirstFrame = true;\n  };\n  BarView.prototype._removeBackground = function () {\n    this.group.remove(this._backgroundGroup);\n    this._backgroundGroup = null;\n  };\n  BarView.type = 'bar';\n  return BarView;\n}(ChartView);\nvar clip = {\n  cartesian2d: function (coordSysBoundingRect, layout) {\n    var signWidth = layout.width < 0 ? -1 : 1;\n    var signHeight = layout.height < 0 ? -1 : 1;\n    // Needs positive width and height\n    if (signWidth < 0) {\n      layout.x += layout.width;\n      layout.width = -layout.width;\n    }\n    if (signHeight < 0) {\n      layout.y += layout.height;\n      layout.height = -layout.height;\n    }\n    var coordSysX2 = coordSysBoundingRect.x + coordSysBoundingRect.width;\n    var coordSysY2 = coordSysBoundingRect.y + coordSysBoundingRect.height;\n    var x = mathMax(layout.x, coordSysBoundingRect.x);\n    var x2 = mathMin(layout.x + layout.width, coordSysX2);\n    var y = mathMax(layout.y, coordSysBoundingRect.y);\n    var y2 = mathMin(layout.y + layout.height, coordSysY2);\n    var xClipped = x2 < x;\n    var yClipped = y2 < y;\n    // When xClipped or yClipped, the element will be marked as `ignore`.\n    // But we should also place the element at the edge of the coord sys bounding rect.\n    // Because if data changed and the bar shows again, its transition animation\n    // will begin at this place.\n    layout.x = xClipped && x > coordSysX2 ? x2 : x;\n    layout.y = yClipped && y > coordSysY2 ? y2 : y;\n    layout.width = xClipped ? 0 : x2 - x;\n    layout.height = yClipped ? 0 : y2 - y;\n    // Reverse back\n    if (signWidth < 0) {\n      layout.x += layout.width;\n      layout.width = -layout.width;\n    }\n    if (signHeight < 0) {\n      layout.y += layout.height;\n      layout.height = -layout.height;\n    }\n    return xClipped || yClipped;\n  },\n  polar: function (coordSysClipArea, layout) {\n    var signR = layout.r0 <= layout.r ? 1 : -1;\n    // Make sure r is larger than r0\n    if (signR < 0) {\n      var tmp = layout.r;\n      layout.r = layout.r0;\n      layout.r0 = tmp;\n    }\n    var r = mathMin(layout.r, coordSysClipArea.r);\n    var r0 = mathMax(layout.r0, coordSysClipArea.r0);\n    layout.r = r;\n    layout.r0 = r0;\n    var clipped = r - r0 < 0;\n    // Reverse back\n    if (signR < 0) {\n      var tmp = layout.r;\n      layout.r = layout.r0;\n      layout.r0 = tmp;\n    }\n    return clipped;\n  }\n};\nvar elementCreator = {\n  cartesian2d: function (seriesModel, data, newIndex, layout, isHorizontal, animationModel, axisModel, isUpdate, roundCap) {\n    var rect = new Rect({\n      shape: extend({}, layout),\n      z2: 1\n    });\n    rect.__dataIndex = newIndex;\n    rect.name = 'item';\n    if (animationModel) {\n      var rectShape = rect.shape;\n      var animateProperty = isHorizontal ? 'height' : 'width';\n      rectShape[animateProperty] = 0;\n    }\n    return rect;\n  },\n  polar: function (seriesModel, data, newIndex, layout, isRadial, animationModel, axisModel, isUpdate, roundCap) {\n    var ShapeClass = !isRadial && roundCap ? Sausage : Sector;\n    var sector = new ShapeClass({\n      shape: layout,\n      z2: 1\n    });\n    sector.name = 'item';\n    var positionMap = createPolarPositionMapping(isRadial);\n    sector.calculateTextPosition = createSectorCalculateTextPosition(positionMap, {\n      isRoundCap: ShapeClass === Sausage\n    });\n    // Animation\n    if (animationModel) {\n      var sectorShape = sector.shape;\n      var animateProperty = isRadial ? 'r' : 'endAngle';\n      var animateTarget = {};\n      sectorShape[animateProperty] = isRadial ? layout.r0 : layout.startAngle;\n      animateTarget[animateProperty] = layout[animateProperty];\n      (isUpdate ? updateProps : initProps)(sector, {\n        shape: animateTarget\n        // __value: typeof dataValue === 'string' ? parseInt(dataValue, 10) : dataValue\n      }, animationModel);\n    }\n    return sector;\n  }\n};\nfunction shouldRealtimeSort(seriesModel, coordSys) {\n  var realtimeSortOption = seriesModel.get('realtimeSort', true);\n  var baseAxis = coordSys.getBaseAxis();\n  if (process.env.NODE_ENV !== 'production') {\n    if (realtimeSortOption) {\n      if (baseAxis.type !== 'category') {\n        warn('`realtimeSort` will not work because this bar series is not based on a category axis.');\n      }\n      if (coordSys.type !== 'cartesian2d') {\n        warn('`realtimeSort` will not work because this bar series is not on cartesian2d.');\n      }\n    }\n  }\n  if (realtimeSortOption && baseAxis.type === 'category' && coordSys.type === 'cartesian2d') {\n    return {\n      baseAxis: baseAxis,\n      otherAxis: coordSys.getOtherAxis(baseAxis)\n    };\n  }\n}\nfunction updateRealtimeAnimation(realtimeSortCfg, seriesAnimationModel, el, layout, newIndex, isHorizontal, isUpdate, isChangeOrder) {\n  var seriesTarget;\n  var axisTarget;\n  if (isHorizontal) {\n    axisTarget = {\n      x: layout.x,\n      width: layout.width\n    };\n    seriesTarget = {\n      y: layout.y,\n      height: layout.height\n    };\n  } else {\n    axisTarget = {\n      y: layout.y,\n      height: layout.height\n    };\n    seriesTarget = {\n      x: layout.x,\n      width: layout.width\n    };\n  }\n  if (!isChangeOrder) {\n    // Keep the original growth animation if only axis order changed.\n    // Not start a new animation.\n    (isUpdate ? updateProps : initProps)(el, {\n      shape: seriesTarget\n    }, seriesAnimationModel, newIndex, null);\n  }\n  var axisAnimationModel = seriesAnimationModel ? realtimeSortCfg.baseAxis.model : null;\n  (isUpdate ? updateProps : initProps)(el, {\n    shape: axisTarget\n  }, axisAnimationModel, newIndex);\n}\nfunction checkPropertiesNotValid(obj, props) {\n  for (var i = 0; i < props.length; i++) {\n    if (!isFinite(obj[props[i]])) {\n      return true;\n    }\n  }\n  return false;\n}\nvar rectPropties = ['x', 'y', 'width', 'height'];\nvar polarPropties = ['cx', 'cy', 'r', 'startAngle', 'endAngle'];\nvar isValidLayout = {\n  cartesian2d: function (layout) {\n    return !checkPropertiesNotValid(layout, rectPropties);\n  },\n  polar: function (layout) {\n    return !checkPropertiesNotValid(layout, polarPropties);\n  }\n};\nvar getLayout = {\n  // itemModel is only used to get borderWidth, which is not needed\n  // when calculating bar background layout.\n  cartesian2d: function (data, dataIndex, itemModel) {\n    var layout = data.getItemLayout(dataIndex);\n    var fixedLineWidth = itemModel ? getLineWidth(itemModel, layout) : 0;\n    // fix layout with lineWidth\n    var signX = layout.width > 0 ? 1 : -1;\n    var signY = layout.height > 0 ? 1 : -1;\n    return {\n      x: layout.x + signX * fixedLineWidth / 2,\n      y: layout.y + signY * fixedLineWidth / 2,\n      width: layout.width - signX * fixedLineWidth,\n      height: layout.height - signY * fixedLineWidth\n    };\n  },\n  polar: function (data, dataIndex, itemModel) {\n    var layout = data.getItemLayout(dataIndex);\n    return {\n      cx: layout.cx,\n      cy: layout.cy,\n      r0: layout.r0,\n      r: layout.r,\n      startAngle: layout.startAngle,\n      endAngle: layout.endAngle,\n      clockwise: layout.clockwise\n    };\n  }\n};\nfunction isZeroOnPolar(layout) {\n  return layout.startAngle != null && layout.endAngle != null && layout.startAngle === layout.endAngle;\n}\nfunction createPolarPositionMapping(isRadial) {\n  return function (isRadial) {\n    var arcOrAngle = isRadial ? 'Arc' : 'Angle';\n    return function (position) {\n      switch (position) {\n        case 'start':\n        case 'insideStart':\n        case 'end':\n        case 'insideEnd':\n          return position + arcOrAngle;\n        default:\n          return position;\n      }\n    };\n  }(isRadial);\n}\nfunction updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, isPolar) {\n  var style = data.getItemVisual(dataIndex, 'style');\n  if (!isPolar) {\n    var borderRadius = itemModel.get(['itemStyle', 'borderRadius']) || 0;\n    el.setShape('r', borderRadius);\n  } else if (!seriesModel.get('roundCap')) {\n    var sectorShape = el.shape;\n    var cornerRadius = getSectorCornerRadius(itemModel.getModel('itemStyle'), sectorShape, true);\n    extend(sectorShape, cornerRadius);\n    el.setShape(sectorShape);\n  }\n  el.useStyle(style);\n  var cursorStyle = itemModel.getShallow('cursor');\n  cursorStyle && el.attr('cursor', cursorStyle);\n  var labelPositionOutside = isPolar ? isHorizontalOrRadial ? layout.r >= layout.r0 ? 'endArc' : 'startArc' : layout.endAngle >= layout.startAngle ? 'endAngle' : 'startAngle' : isHorizontalOrRadial ? layout.height >= 0 ? 'bottom' : 'top' : layout.width >= 0 ? 'right' : 'left';\n  var labelStatesModels = getLabelStatesModels(itemModel);\n  setLabelStyle(el, labelStatesModels, {\n    labelFetcher: seriesModel,\n    labelDataIndex: dataIndex,\n    defaultText: getDefaultLabel(seriesModel.getData(), dataIndex),\n    inheritColor: style.fill,\n    defaultOpacity: style.opacity,\n    defaultOutsidePosition: labelPositionOutside\n  });\n  var label = el.getTextContent();\n  if (isPolar && label) {\n    var position = itemModel.get(['label', 'position']);\n    el.textConfig.inside = position === 'middle' ? true : null;\n    setSectorTextRotation(el, position === 'outside' ? labelPositionOutside : position, createPolarPositionMapping(isHorizontalOrRadial), itemModel.get(['label', 'rotate']));\n  }\n  setLabelValueAnimation(label, labelStatesModels, seriesModel.getRawValue(dataIndex), function (value) {\n    return getDefaultInterpolatedLabel(data, value);\n  });\n  var emphasisModel = itemModel.getModel(['emphasis']);\n  toggleHoverEmphasis(el, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n  setStatesStylesFromModel(el, itemModel);\n  if (isZeroOnPolar(layout)) {\n    el.style.fill = 'none';\n    el.style.stroke = 'none';\n    each(el.states, function (state) {\n      if (state.style) {\n        state.style.fill = state.style.stroke = 'none';\n      }\n    });\n  }\n}\n// In case width or height are too small.\nfunction getLineWidth(itemModel, rawLayout) {\n  // Has no border.\n  var borderColor = itemModel.get(['itemStyle', 'borderColor']);\n  if (!borderColor || borderColor === 'none') {\n    return 0;\n  }\n  var lineWidth = itemModel.get(['itemStyle', 'borderWidth']) || 0;\n  // width or height may be NaN for empty data\n  var width = isNaN(rawLayout.width) ? Number.MAX_VALUE : Math.abs(rawLayout.width);\n  var height = isNaN(rawLayout.height) ? Number.MAX_VALUE : Math.abs(rawLayout.height);\n  return Math.min(lineWidth, width, height);\n}\nvar LagePathShape = /** @class */function () {\n  function LagePathShape() {}\n  return LagePathShape;\n}();\nvar LargePath = /** @class */function (_super) {\n  __extends(LargePath, _super);\n  function LargePath(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this.type = 'largeBar';\n    return _this;\n  }\n  LargePath.prototype.getDefaultShape = function () {\n    return new LagePathShape();\n  };\n  LargePath.prototype.buildPath = function (ctx, shape) {\n    // Drawing lines is more efficient than drawing\n    // a whole line or drawing rects.\n    var points = shape.points;\n    var baseDimIdx = this.baseDimIdx;\n    var valueDimIdx = 1 - this.baseDimIdx;\n    var startPoint = [];\n    var size = [];\n    var barWidth = this.barWidth;\n    for (var i = 0; i < points.length; i += 3) {\n      size[baseDimIdx] = barWidth;\n      size[valueDimIdx] = points[i + 2];\n      startPoint[baseDimIdx] = points[i + baseDimIdx];\n      startPoint[valueDimIdx] = points[i + valueDimIdx];\n      ctx.rect(startPoint[0], startPoint[1], size[0], size[1]);\n    }\n  };\n  return LargePath;\n}(Path);\nfunction createLarge(seriesModel, group, progressiveEls, incremental) {\n  // TODO support polar\n  var data = seriesModel.getData();\n  var baseDimIdx = data.getLayout('valueAxisHorizontal') ? 1 : 0;\n  var largeDataIndices = data.getLayout('largeDataIndices');\n  var barWidth = data.getLayout('size');\n  var backgroundModel = seriesModel.getModel('backgroundStyle');\n  var bgPoints = data.getLayout('largeBackgroundPoints');\n  if (bgPoints) {\n    var bgEl = new LargePath({\n      shape: {\n        points: bgPoints\n      },\n      incremental: !!incremental,\n      silent: true,\n      z2: 0\n    });\n    bgEl.baseDimIdx = baseDimIdx;\n    bgEl.largeDataIndices = largeDataIndices;\n    bgEl.barWidth = barWidth;\n    bgEl.useStyle(backgroundModel.getItemStyle());\n    group.add(bgEl);\n    progressiveEls && progressiveEls.push(bgEl);\n  }\n  var el = new LargePath({\n    shape: {\n      points: data.getLayout('largePoints')\n    },\n    incremental: !!incremental,\n    ignoreCoarsePointer: true,\n    z2: 1\n  });\n  el.baseDimIdx = baseDimIdx;\n  el.largeDataIndices = largeDataIndices;\n  el.barWidth = barWidth;\n  group.add(el);\n  el.useStyle(data.getVisual('style'));\n  // Stroke is rendered first to avoid overlapping with fill\n  el.style.stroke = null;\n  // Enable tooltip and user mouse/touch event handlers.\n  getECData(el).seriesIndex = seriesModel.seriesIndex;\n  if (!seriesModel.get('silent')) {\n    el.on('mousedown', largePathUpdateDataIndex);\n    el.on('mousemove', largePathUpdateDataIndex);\n  }\n  progressiveEls && progressiveEls.push(el);\n}\n// Use throttle to avoid frequently traverse to find dataIndex.\nvar largePathUpdateDataIndex = throttle(function (event) {\n  var largePath = this;\n  var dataIndex = largePathFindDataIndex(largePath, event.offsetX, event.offsetY);\n  getECData(largePath).dataIndex = dataIndex >= 0 ? dataIndex : null;\n}, 30, false);\nfunction largePathFindDataIndex(largePath, x, y) {\n  var baseDimIdx = largePath.baseDimIdx;\n  var valueDimIdx = 1 - baseDimIdx;\n  var points = largePath.shape.points;\n  var largeDataIndices = largePath.largeDataIndices;\n  var startPoint = [];\n  var size = [];\n  var barWidth = largePath.barWidth;\n  for (var i = 0, len = points.length / 3; i < len; i++) {\n    var ii = i * 3;\n    size[baseDimIdx] = barWidth;\n    size[valueDimIdx] = points[ii + 2];\n    startPoint[baseDimIdx] = points[ii + baseDimIdx];\n    startPoint[valueDimIdx] = points[ii + valueDimIdx];\n    if (size[valueDimIdx] < 0) {\n      startPoint[valueDimIdx] += size[valueDimIdx];\n      size[valueDimIdx] = -size[valueDimIdx];\n    }\n    if (x >= startPoint[0] && x <= startPoint[0] + size[0] && y >= startPoint[1] && y <= startPoint[1] + size[1]) {\n      return largeDataIndices[i];\n    }\n  }\n  return -1;\n}\nfunction createBackgroundShape(isHorizontalOrRadial, layout, coord) {\n  if (isCoordinateSystemType(coord, 'cartesian2d')) {\n    var rectShape = layout;\n    var coordLayout = coord.getArea();\n    return {\n      x: isHorizontalOrRadial ? rectShape.x : coordLayout.x,\n      y: isHorizontalOrRadial ? coordLayout.y : rectShape.y,\n      width: isHorizontalOrRadial ? rectShape.width : coordLayout.width,\n      height: isHorizontalOrRadial ? coordLayout.height : rectShape.height\n    };\n  } else {\n    var coordLayout = coord.getArea();\n    var sectorShape = layout;\n    return {\n      cx: coordLayout.cx,\n      cy: coordLayout.cy,\n      r0: isHorizontalOrRadial ? coordLayout.r0 : sectorShape.r0,\n      r: isHorizontalOrRadial ? coordLayout.r : sectorShape.r,\n      startAngle: isHorizontalOrRadial ? sectorShape.startAngle : 0,\n      endAngle: isHorizontalOrRadial ? sectorShape.endAngle : Math.PI * 2\n    };\n  }\n}\nfunction createBackgroundEl(coord, isHorizontalOrRadial, layout) {\n  var ElementClz = coord.type === 'polar' ? Sector : Rect;\n  return new ElementClz({\n    shape: createBackgroundShape(isHorizontalOrRadial, layout, coord),\n    silent: true,\n    z2: 0\n  });\n}\nexport default BarView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { layout, createProgressiveLayout } from '../../layout/barGrid.js';\nimport dataSample from '../../processor/dataSample.js';\nimport BarSeries from './BarSeries.js';\nimport BarView from './BarView.js';\nexport function install(registers) {\n  registers.registerChartView(BarView);\n  registers.registerSeriesModel(BarSeries);\n  registers.registerLayout(registers.PRIORITY.VISUAL.LAYOUT, zrUtil.curry(layout, 'bar'));\n  // Do layout after other overall layout, which can prepare some information.\n  registers.registerLayout(registers.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT, createProgressiveLayout('bar'));\n  // Down sample after filter\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, dataSample('bar'));\n  /**\r\n   * @payload\r\n   * @property {string} [componentType=series]\r\n   * @property {number} [dx]\r\n   * @property {number} [dy]\r\n   * @property {number} [zoom]\r\n   * @property {number} [originX]\r\n   * @property {number} [originY]\r\n   */\n  registers.registerAction({\n    type: 'changeAxisOrder',\n    event: 'changeAxisOrder',\n    update: 'update'\n  }, function (payload, ecModel) {\n    var componentType = payload.componentType || 'series';\n    ecModel.eachComponent({\n      mainType: componentType,\n      query: payload\n    }, function (componentModel) {\n      if (payload.sortInfo) {\n        componentModel.axis.setCategorySortInfo(payload.sortInfo);\n      }\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { parsePercent, linearMap } from '../../util/number.js';\nimport * as layout from '../../util/layout.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { normalizeArcAngles } from 'zrender/lib/core/PathProxy.js';\nimport { makeInner } from '../../util/model.js';\nvar PI2 = Math.PI * 2;\nvar RADIAN = Math.PI / 180;\nfunction getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\nexport function getBasicPieLayout(seriesModel, api) {\n  var viewRect = getViewRect(seriesModel, api);\n  // center can be string or number when coordinateSystem is specified\n  var center = seriesModel.get('center');\n  var radius = seriesModel.get('radius');\n  if (!zrUtil.isArray(radius)) {\n    radius = [0, radius];\n  }\n  var width = parsePercent(viewRect.width, api.getWidth());\n  var height = parsePercent(viewRect.height, api.getHeight());\n  var size = Math.min(width, height);\n  var r0 = parsePercent(radius[0], size / 2);\n  var r = parsePercent(radius[1], size / 2);\n  var cx;\n  var cy;\n  var coordSys = seriesModel.coordinateSystem;\n  if (coordSys) {\n    // percentage is not allowed when coordinate system is specified\n    var point = coordSys.dataToPoint(center);\n    cx = point[0] || 0;\n    cy = point[1] || 0;\n  } else {\n    if (!zrUtil.isArray(center)) {\n      center = [center, center];\n    }\n    cx = parsePercent(center[0], width) + viewRect.x;\n    cy = parsePercent(center[1], height) + viewRect.y;\n  }\n  return {\n    cx: cx,\n    cy: cy,\n    r0: r0,\n    r: r\n  };\n}\nexport default function pieLayout(seriesType, ecModel, api) {\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var viewRect = getViewRect(seriesModel, api);\n    var _a = getBasicPieLayout(seriesModel, api),\n      cx = _a.cx,\n      cy = _a.cy,\n      r = _a.r,\n      r0 = _a.r0;\n    var startAngle = -seriesModel.get('startAngle') * RADIAN;\n    var endAngle = seriesModel.get('endAngle');\n    var padAngle = seriesModel.get('padAngle') * RADIAN;\n    endAngle = endAngle === 'auto' ? startAngle - PI2 : -endAngle * RADIAN;\n    var minAngle = seriesModel.get('minAngle') * RADIAN;\n    var minAndPadAngle = minAngle + padAngle;\n    var validDataCount = 0;\n    data.each(valueDim, function (value) {\n      !isNaN(value) && validDataCount++;\n    });\n    var sum = data.getSum(valueDim);\n    // Sum may be 0\n    var unitRadian = Math.PI / (sum || validDataCount) * 2;\n    var clockwise = seriesModel.get('clockwise');\n    var roseType = seriesModel.get('roseType');\n    var stillShowZeroSum = seriesModel.get('stillShowZeroSum');\n    // [0...max]\n    var extent = data.getDataExtent(valueDim);\n    extent[0] = 0;\n    var dir = clockwise ? 1 : -1;\n    var angles = [startAngle, endAngle];\n    var halfPadAngle = dir * padAngle / 2;\n    normalizeArcAngles(angles, !clockwise);\n    startAngle = angles[0], endAngle = angles[1];\n    var layoutData = getSeriesLayoutData(seriesModel);\n    layoutData.startAngle = startAngle;\n    layoutData.endAngle = endAngle;\n    layoutData.clockwise = clockwise;\n    var angleRange = Math.abs(endAngle - startAngle);\n    // In the case some sector angle is smaller than minAngle\n    var restAngle = angleRange;\n    var valueSumLargerThanMinAngle = 0;\n    var currentAngle = startAngle;\n    data.setLayout({\n      viewRect: viewRect,\n      r: r\n    });\n    data.each(valueDim, function (value, idx) {\n      var angle;\n      if (isNaN(value)) {\n        data.setItemLayout(idx, {\n          angle: NaN,\n          startAngle: NaN,\n          endAngle: NaN,\n          clockwise: clockwise,\n          cx: cx,\n          cy: cy,\n          r0: r0,\n          r: roseType ? NaN : r\n        });\n        return;\n      }\n      // FIXME  2.0  roseType  area \n      if (roseType !== 'area') {\n        angle = sum === 0 && stillShowZeroSum ? unitRadian : value * unitRadian;\n      } else {\n        angle = angleRange / validDataCount;\n      }\n      if (angle < minAndPadAngle) {\n        angle = minAndPadAngle;\n        restAngle -= minAndPadAngle;\n      } else {\n        valueSumLargerThanMinAngle += value;\n      }\n      var endAngle = currentAngle + dir * angle;\n      // calculate display angle\n      var actualStartAngle = 0;\n      var actualEndAngle = 0;\n      if (padAngle > angle) {\n        actualStartAngle = currentAngle + dir * angle / 2;\n        actualEndAngle = actualStartAngle;\n      } else {\n        actualStartAngle = currentAngle + halfPadAngle;\n        actualEndAngle = endAngle - halfPadAngle;\n      }\n      data.setItemLayout(idx, {\n        angle: angle,\n        startAngle: actualStartAngle,\n        endAngle: actualEndAngle,\n        clockwise: clockwise,\n        cx: cx,\n        cy: cy,\n        r0: r0,\n        r: roseType ? linearMap(value, extent, [r0, r]) : r\n      });\n      currentAngle = endAngle;\n    });\n    // Some sector is constrained by minAngle and padAngle\n    // Rest sectors needs recalculate angle\n    if (restAngle < PI2 && validDataCount) {\n      // Average the angle if rest angle is not enough after all angles is\n      // Constrained by minAngle and padAngle\n      if (restAngle <= 1e-3) {\n        var angle_1 = angleRange / validDataCount;\n        data.each(valueDim, function (value, idx) {\n          if (!isNaN(value)) {\n            var layout_1 = data.getItemLayout(idx);\n            layout_1.angle = angle_1;\n            var actualStartAngle = 0;\n            var actualEndAngle = 0;\n            if (angle_1 < padAngle) {\n              actualStartAngle = startAngle + dir * (idx + 1 / 2) * angle_1;\n              actualEndAngle = actualStartAngle;\n            } else {\n              actualStartAngle = startAngle + dir * idx * angle_1 + halfPadAngle;\n              actualEndAngle = startAngle + dir * (idx + 1) * angle_1 - halfPadAngle;\n            }\n            layout_1.startAngle = actualStartAngle;\n            layout_1.endAngle = actualEndAngle;\n          }\n        });\n      } else {\n        unitRadian = restAngle / valueSumLargerThanMinAngle;\n        currentAngle = startAngle;\n        data.each(valueDim, function (value, idx) {\n          if (!isNaN(value)) {\n            var layout_2 = data.getItemLayout(idx);\n            var angle = layout_2.angle === minAndPadAngle ? minAndPadAngle : value * unitRadian;\n            var actualStartAngle = 0;\n            var actualEndAngle = 0;\n            if (angle < padAngle) {\n              actualStartAngle = currentAngle + dir * angle / 2;\n              actualEndAngle = actualStartAngle;\n            } else {\n              actualStartAngle = currentAngle + halfPadAngle;\n              actualEndAngle = currentAngle + dir * angle - halfPadAngle;\n            }\n            layout_2.startAngle = actualStartAngle;\n            layout_2.endAngle = actualEndAngle;\n            currentAngle += dir * angle;\n          }\n        });\n      }\n    }\n  });\n}\nexport var getSeriesLayoutData = makeInner();","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nexport default function dataFilter(seriesType) {\n  return {\n    seriesType: seriesType,\n    reset: function (seriesModel, ecModel) {\n      var legendModels = ecModel.findComponents({\n        mainType: 'legend'\n      });\n      if (!legendModels || !legendModels.length) {\n        return;\n      }\n      var data = seriesModel.getData();\n      data.filterSelf(function (idx) {\n        var name = data.getName(idx);\n        // If in any legend component the status is not selected.\n        for (var i = 0; i < legendModels.length; i++) {\n          // @ts-ignore FIXME: LegendModel\n          if (!legendModels[i].isSelected(name)) {\n            return false;\n          }\n        }\n        return true;\n      });\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n// FIXME emphasis label position is not same with normal label position\nimport { parsePercent } from '../../util/number.js';\nimport { Point } from '../../util/graphic.js';\nimport { each, isNumber } from 'zrender/lib/core/util.js';\nimport { limitTurnAngle, limitSurfaceAngle } from '../../label/labelGuideHelper.js';\nimport { shiftLayoutOnY } from '../../label/labelLayoutHelper.js';\nvar RADIAN = Math.PI / 180;\nfunction adjustSingleSide(list, cx, cy, r, dir, viewWidth, viewHeight, viewLeft, viewTop, farthestX) {\n  if (list.length < 2) {\n    return;\n  }\n  ;\n  function recalculateXOnSemiToAlignOnEllipseCurve(semi) {\n    var rB = semi.rB;\n    var rB2 = rB * rB;\n    for (var i = 0; i < semi.list.length; i++) {\n      var item = semi.list[i];\n      var dy = Math.abs(item.label.y - cy);\n      // horizontal r is always same with original r because x is not changed.\n      var rA = r + item.len;\n      var rA2 = rA * rA;\n      // Use ellipse implicit function to calculate x\n      var dx = Math.sqrt(Math.abs((1 - dy * dy / rB2) * rA2));\n      var newX = cx + (dx + item.len2) * dir;\n      var deltaX = newX - item.label.x;\n      var newTargetWidth = item.targetTextWidth - deltaX * dir;\n      // text x is changed, so need to recalculate width.\n      constrainTextWidth(item, newTargetWidth, true);\n      item.label.x = newX;\n    }\n  }\n  // Adjust X based on the shifted y. Make tight labels aligned on an ellipse curve.\n  function recalculateX(items) {\n    // Extremes of\n    var topSemi = {\n      list: [],\n      maxY: 0\n    };\n    var bottomSemi = {\n      list: [],\n      maxY: 0\n    };\n    for (var i = 0; i < items.length; i++) {\n      if (items[i].labelAlignTo !== 'none') {\n        continue;\n      }\n      var item = items[i];\n      var semi = item.label.y > cy ? bottomSemi : topSemi;\n      var dy = Math.abs(item.label.y - cy);\n      if (dy >= semi.maxY) {\n        var dx = item.label.x - cx - item.len2 * dir;\n        // horizontal r is always same with original r because x is not changed.\n        var rA = r + item.len;\n        // Canculate rB based on the topest / bottemest label.\n        var rB = Math.abs(dx) < rA ? Math.sqrt(dy * dy / (1 - dx * dx / rA / rA)) : rA;\n        semi.rB = rB;\n        semi.maxY = dy;\n      }\n      semi.list.push(item);\n    }\n    recalculateXOnSemiToAlignOnEllipseCurve(topSemi);\n    recalculateXOnSemiToAlignOnEllipseCurve(bottomSemi);\n  }\n  var len = list.length;\n  for (var i = 0; i < len; i++) {\n    if (list[i].position === 'outer' && list[i].labelAlignTo === 'labelLine') {\n      var dx = list[i].label.x - farthestX;\n      list[i].linePoints[1][0] += dx;\n      list[i].label.x = farthestX;\n    }\n  }\n  if (shiftLayoutOnY(list, viewTop, viewTop + viewHeight)) {\n    recalculateX(list);\n  }\n}\nfunction avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight, viewLeft, viewTop) {\n  var leftList = [];\n  var rightList = [];\n  var leftmostX = Number.MAX_VALUE;\n  var rightmostX = -Number.MAX_VALUE;\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    var label = labelLayoutList[i].label;\n    if (isPositionCenter(labelLayoutList[i])) {\n      continue;\n    }\n    if (label.x < cx) {\n      leftmostX = Math.min(leftmostX, label.x);\n      leftList.push(labelLayoutList[i]);\n    } else {\n      rightmostX = Math.max(rightmostX, label.x);\n      rightList.push(labelLayoutList[i]);\n    }\n  }\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    var layout = labelLayoutList[i];\n    if (!isPositionCenter(layout) && layout.linePoints) {\n      if (layout.labelStyleWidth != null) {\n        continue;\n      }\n      var label = layout.label;\n      var linePoints = layout.linePoints;\n      var targetTextWidth = void 0;\n      if (layout.labelAlignTo === 'edge') {\n        if (label.x < cx) {\n          targetTextWidth = linePoints[2][0] - layout.labelDistance - viewLeft - layout.edgeDistance;\n        } else {\n          targetTextWidth = viewLeft + viewWidth - layout.edgeDistance - linePoints[2][0] - layout.labelDistance;\n        }\n      } else if (layout.labelAlignTo === 'labelLine') {\n        if (label.x < cx) {\n          targetTextWidth = leftmostX - viewLeft - layout.bleedMargin;\n        } else {\n          targetTextWidth = viewLeft + viewWidth - rightmostX - layout.bleedMargin;\n        }\n      } else {\n        if (label.x < cx) {\n          targetTextWidth = label.x - viewLeft - layout.bleedMargin;\n        } else {\n          targetTextWidth = viewLeft + viewWidth - label.x - layout.bleedMargin;\n        }\n      }\n      layout.targetTextWidth = targetTextWidth;\n      constrainTextWidth(layout, targetTextWidth);\n    }\n  }\n  adjustSingleSide(rightList, cx, cy, r, 1, viewWidth, viewHeight, viewLeft, viewTop, rightmostX);\n  adjustSingleSide(leftList, cx, cy, r, -1, viewWidth, viewHeight, viewLeft, viewTop, leftmostX);\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    var layout = labelLayoutList[i];\n    if (!isPositionCenter(layout) && layout.linePoints) {\n      var label = layout.label;\n      var linePoints = layout.linePoints;\n      var isAlignToEdge = layout.labelAlignTo === 'edge';\n      var padding = label.style.padding;\n      var paddingH = padding ? padding[1] + padding[3] : 0;\n      // textRect.width already contains paddingH if bgColor is set\n      var extraPaddingH = label.style.backgroundColor ? 0 : paddingH;\n      var realTextWidth = layout.rect.width + extraPaddingH;\n      var dist = linePoints[1][0] - linePoints[2][0];\n      if (isAlignToEdge) {\n        if (label.x < cx) {\n          linePoints[2][0] = viewLeft + layout.edgeDistance + realTextWidth + layout.labelDistance;\n        } else {\n          linePoints[2][0] = viewLeft + viewWidth - layout.edgeDistance - realTextWidth - layout.labelDistance;\n        }\n      } else {\n        if (label.x < cx) {\n          linePoints[2][0] = label.x + layout.labelDistance;\n        } else {\n          linePoints[2][0] = label.x - layout.labelDistance;\n        }\n        linePoints[1][0] = linePoints[2][0] + dist;\n      }\n      linePoints[1][1] = linePoints[2][1] = label.y;\n    }\n  }\n}\n/**\r\n * Set max width of each label, and then wrap each label to the max width.\r\n *\r\n * @param layout label layout\r\n * @param availableWidth max width for the label to display\r\n * @param forceRecalculate recaculate the text layout even if the current width\r\n * is smaller than `availableWidth`. This is useful when the text was previously\r\n * wrapped by calling `constrainTextWidth` but now `availableWidth` changed, in\r\n * which case, previous wrapping should be redo.\r\n */\nfunction constrainTextWidth(layout, availableWidth, forceRecalculate) {\n  if (forceRecalculate === void 0) {\n    forceRecalculate = false;\n  }\n  if (layout.labelStyleWidth != null) {\n    // User-defined style.width has the highest priority.\n    return;\n  }\n  var label = layout.label;\n  var style = label.style;\n  var textRect = layout.rect;\n  var bgColor = style.backgroundColor;\n  var padding = style.padding;\n  var paddingH = padding ? padding[1] + padding[3] : 0;\n  var overflow = style.overflow;\n  // textRect.width already contains paddingH if bgColor is set\n  var oldOuterWidth = textRect.width + (bgColor ? 0 : paddingH);\n  if (availableWidth < oldOuterWidth || forceRecalculate) {\n    var oldHeight = textRect.height;\n    if (overflow && overflow.match('break')) {\n      // Temporarily set background to be null to calculate\n      // the bounding box without background.\n      label.setStyle('backgroundColor', null);\n      // Set constraining width\n      label.setStyle('width', availableWidth - paddingH);\n      // This is the real bounding box of the text without padding.\n      var innerRect = label.getBoundingRect();\n      label.setStyle('width', Math.ceil(innerRect.width));\n      label.setStyle('backgroundColor', bgColor);\n    } else {\n      var availableInnerWidth = availableWidth - paddingH;\n      var newWidth = availableWidth < oldOuterWidth\n      // Current text is too wide, use `availableWidth` as max width.\n      ? availableInnerWidth :\n      // Current available width is enough, but the text may have\n      // already been wrapped with a smaller available width.\n      forceRecalculate ? availableInnerWidth > layout.unconstrainedWidth\n      // Current available is larger than text width,\n      // so don't constrain width (otherwise it may have\n      // empty space in the background).\n      ? null\n      // Current available is smaller than text width, so\n      // use the current available width as constraining\n      // width.\n      : availableInnerWidth\n      // Current available width is enough, so no need to\n      // constrain.\n      : null;\n      label.setStyle('width', newWidth);\n    }\n    var newRect = label.getBoundingRect();\n    textRect.width = newRect.width;\n    var margin = (label.style.margin || 0) + 2.1;\n    textRect.height = newRect.height + margin;\n    textRect.y -= (textRect.height - oldHeight) / 2;\n  }\n}\nfunction isPositionCenter(sectorShape) {\n  // Not change x for center label\n  return sectorShape.position === 'center';\n}\nexport default function pieLabelLayout(seriesModel) {\n  var data = seriesModel.getData();\n  var labelLayoutList = [];\n  var cx;\n  var cy;\n  var hasLabelRotate = false;\n  var minShowLabelRadian = (seriesModel.get('minShowLabelAngle') || 0) * RADIAN;\n  var viewRect = data.getLayout('viewRect');\n  var r = data.getLayout('r');\n  var viewWidth = viewRect.width;\n  var viewLeft = viewRect.x;\n  var viewTop = viewRect.y;\n  var viewHeight = viewRect.height;\n  function setNotShow(el) {\n    el.ignore = true;\n  }\n  function isLabelShown(label) {\n    if (!label.ignore) {\n      return true;\n    }\n    for (var key in label.states) {\n      if (label.states[key].ignore === false) {\n        return true;\n      }\n    }\n    return false;\n  }\n  data.each(function (idx) {\n    var sector = data.getItemGraphicEl(idx);\n    var sectorShape = sector.shape;\n    var label = sector.getTextContent();\n    var labelLine = sector.getTextGuideLine();\n    var itemModel = data.getItemModel(idx);\n    var labelModel = itemModel.getModel('label');\n    // Use position in normal or emphasis\n    var labelPosition = labelModel.get('position') || itemModel.get(['emphasis', 'label', 'position']);\n    var labelDistance = labelModel.get('distanceToLabelLine');\n    var labelAlignTo = labelModel.get('alignTo');\n    var edgeDistance = parsePercent(labelModel.get('edgeDistance'), viewWidth);\n    var bleedMargin = labelModel.get('bleedMargin');\n    var labelLineModel = itemModel.getModel('labelLine');\n    var labelLineLen = labelLineModel.get('length');\n    labelLineLen = parsePercent(labelLineLen, viewWidth);\n    var labelLineLen2 = labelLineModel.get('length2');\n    labelLineLen2 = parsePercent(labelLineLen2, viewWidth);\n    if (Math.abs(sectorShape.endAngle - sectorShape.startAngle) < minShowLabelRadian) {\n      each(label.states, setNotShow);\n      label.ignore = true;\n      if (labelLine) {\n        each(labelLine.states, setNotShow);\n        labelLine.ignore = true;\n      }\n      return;\n    }\n    if (!isLabelShown(label)) {\n      return;\n    }\n    var midAngle = (sectorShape.startAngle + sectorShape.endAngle) / 2;\n    var nx = Math.cos(midAngle);\n    var ny = Math.sin(midAngle);\n    var textX;\n    var textY;\n    var linePoints;\n    var textAlign;\n    cx = sectorShape.cx;\n    cy = sectorShape.cy;\n    var isLabelInside = labelPosition === 'inside' || labelPosition === 'inner';\n    if (labelPosition === 'center') {\n      textX = sectorShape.cx;\n      textY = sectorShape.cy;\n      textAlign = 'center';\n    } else {\n      var x1 = (isLabelInside ? (sectorShape.r + sectorShape.r0) / 2 * nx : sectorShape.r * nx) + cx;\n      var y1 = (isLabelInside ? (sectorShape.r + sectorShape.r0) / 2 * ny : sectorShape.r * ny) + cy;\n      textX = x1 + nx * 3;\n      textY = y1 + ny * 3;\n      if (!isLabelInside) {\n        // For roseType\n        var x2 = x1 + nx * (labelLineLen + r - sectorShape.r);\n        var y2 = y1 + ny * (labelLineLen + r - sectorShape.r);\n        var x3 = x2 + (nx < 0 ? -1 : 1) * labelLineLen2;\n        var y3 = y2;\n        if (labelAlignTo === 'edge') {\n          // Adjust textX because text align of edge is opposite\n          textX = nx < 0 ? viewLeft + edgeDistance : viewLeft + viewWidth - edgeDistance;\n        } else {\n          textX = x3 + (nx < 0 ? -labelDistance : labelDistance);\n        }\n        textY = y3;\n        linePoints = [[x1, y1], [x2, y2], [x3, y3]];\n      }\n      textAlign = isLabelInside ? 'center' : labelAlignTo === 'edge' ? nx > 0 ? 'right' : 'left' : nx > 0 ? 'left' : 'right';\n    }\n    var PI = Math.PI;\n    var labelRotate = 0;\n    var rotate = labelModel.get('rotate');\n    if (isNumber(rotate)) {\n      labelRotate = rotate * (PI / 180);\n    } else if (labelPosition === 'center') {\n      labelRotate = 0;\n    } else if (rotate === 'radial' || rotate === true) {\n      var radialAngle = nx < 0 ? -midAngle + PI : -midAngle;\n      labelRotate = radialAngle;\n    } else if (rotate === 'tangential' && labelPosition !== 'outside' && labelPosition !== 'outer') {\n      var rad = Math.atan2(nx, ny);\n      if (rad < 0) {\n        rad = PI * 2 + rad;\n      }\n      var isDown = ny > 0;\n      if (isDown) {\n        rad = PI + rad;\n      }\n      labelRotate = rad - PI;\n    }\n    hasLabelRotate = !!labelRotate;\n    label.x = textX;\n    label.y = textY;\n    label.rotation = labelRotate;\n    label.setStyle({\n      verticalAlign: 'middle'\n    });\n    // Not sectorShape the inside label\n    if (!isLabelInside) {\n      var textRect = label.getBoundingRect().clone();\n      textRect.applyTransform(label.getComputedTransform());\n      // Text has a default 1px stroke. Exclude this.\n      var margin = (label.style.margin || 0) + 2.1;\n      textRect.y -= margin / 2;\n      textRect.height += margin;\n      labelLayoutList.push({\n        label: label,\n        labelLine: labelLine,\n        position: labelPosition,\n        len: labelLineLen,\n        len2: labelLineLen2,\n        minTurnAngle: labelLineModel.get('minTurnAngle'),\n        maxSurfaceAngle: labelLineModel.get('maxSurfaceAngle'),\n        surfaceNormal: new Point(nx, ny),\n        linePoints: linePoints,\n        textAlign: textAlign,\n        labelDistance: labelDistance,\n        labelAlignTo: labelAlignTo,\n        edgeDistance: edgeDistance,\n        bleedMargin: bleedMargin,\n        rect: textRect,\n        unconstrainedWidth: textRect.width,\n        labelStyleWidth: label.style.width\n      });\n    } else {\n      label.setStyle({\n        align: textAlign\n      });\n      var selectState = label.states.select;\n      if (selectState) {\n        selectState.x += label.x;\n        selectState.y += label.y;\n      }\n    }\n    sector.setTextConfig({\n      inside: isLabelInside\n    });\n  });\n  if (!hasLabelRotate && seriesModel.get('avoidLabelOverlap')) {\n    avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight, viewLeft, viewTop);\n  }\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    var layout = labelLayoutList[i];\n    var label = layout.label;\n    var labelLine = layout.labelLine;\n    var notShowLabel = isNaN(label.x) || isNaN(label.y);\n    if (label) {\n      label.setStyle({\n        align: layout.textAlign\n      });\n      if (notShowLabel) {\n        each(label.states, setNotShow);\n        label.ignore = true;\n      }\n      var selectState = label.states.select;\n      if (selectState) {\n        selectState.x += label.x;\n        selectState.y += label.y;\n      }\n    }\n    if (labelLine) {\n      var linePoints = layout.linePoints;\n      if (notShowLabel || !linePoints) {\n        each(labelLine.states, setNotShow);\n        labelLine.ignore = true;\n      } else {\n        limitTurnAngle(linePoints, layout.minTurnAngle);\n        limitSurfaceAngle(linePoints, layout.surfaceNormal, layout.maxSurfaceAngle);\n        labelLine.setShape({\n          points: linePoints\n        });\n        // Set the anchor to the midpoint of sector\n        label.__hostTarget.textGuideLineConfig = {\n          anchor: new Point(linePoints[0][0], linePoints[0][1])\n        };\n      }\n    }\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport { extend, retrieve3 } from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { setStatesStylesFromModel, toggleHoverEmphasis } from '../../util/states.js';\nimport ChartView from '../../view/Chart.js';\nimport labelLayout from './labelLayout.js';\nimport { setLabelLineStyle, getLabelLineStatesModels } from '../../label/labelGuideHelper.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport { getSectorCornerRadius } from '../helper/sectorHelper.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nimport { getBasicPieLayout, getSeriesLayoutData } from './pieLayout.js';\n/**\r\n * Piece of pie including Sector, Label, LabelLine\r\n */\nvar PiePiece = /** @class */function (_super) {\n  __extends(PiePiece, _super);\n  function PiePiece(data, idx, startAngle) {\n    var _this = _super.call(this) || this;\n    _this.z2 = 2;\n    var text = new graphic.Text();\n    _this.setTextContent(text);\n    _this.updateData(data, idx, startAngle, true);\n    return _this;\n  }\n  PiePiece.prototype.updateData = function (data, idx, startAngle, firstCreate) {\n    var sector = this;\n    var seriesModel = data.hostModel;\n    var itemModel = data.getItemModel(idx);\n    var emphasisModel = itemModel.getModel('emphasis');\n    var layout = data.getItemLayout(idx);\n    // cornerRadius & innerCornerRadius doesn't exist in the item layout. Use `0` if null value is specified.\n    // see `setItemLayout` in `pieLayout.ts`.\n    var sectorShape = extend(getSectorCornerRadius(itemModel.getModel('itemStyle'), layout, true), layout);\n    // Ignore NaN data.\n    if (isNaN(sectorShape.startAngle)) {\n      // Use NaN shape to avoid drawing shape.\n      sector.setShape(sectorShape);\n      return;\n    }\n    if (firstCreate) {\n      sector.setShape(sectorShape);\n      var animationType = seriesModel.getShallow('animationType');\n      if (seriesModel.ecModel.ssr) {\n        // Use scale animation in SSR mode(opacity?)\n        // Because CSS SVG animation doesn't support very customized shape animation.\n        graphic.initProps(sector, {\n          scaleX: 0,\n          scaleY: 0\n        }, seriesModel, {\n          dataIndex: idx,\n          isFrom: true\n        });\n        sector.originX = sectorShape.cx;\n        sector.originY = sectorShape.cy;\n      } else if (animationType === 'scale') {\n        sector.shape.r = layout.r0;\n        graphic.initProps(sector, {\n          shape: {\n            r: layout.r\n          }\n        }, seriesModel, idx);\n      }\n      // Expansion\n      else {\n        if (startAngle != null) {\n          sector.setShape({\n            startAngle: startAngle,\n            endAngle: startAngle\n          });\n          graphic.initProps(sector, {\n            shape: {\n              startAngle: layout.startAngle,\n              endAngle: layout.endAngle\n            }\n          }, seriesModel, idx);\n        } else {\n          sector.shape.endAngle = layout.startAngle;\n          graphic.updateProps(sector, {\n            shape: {\n              endAngle: layout.endAngle\n            }\n          }, seriesModel, idx);\n        }\n      }\n    } else {\n      saveOldStyle(sector);\n      // Transition animation from the old shape\n      graphic.updateProps(sector, {\n        shape: sectorShape\n      }, seriesModel, idx);\n    }\n    sector.useStyle(data.getItemVisual(idx, 'style'));\n    setStatesStylesFromModel(sector, itemModel);\n    var midAngle = (layout.startAngle + layout.endAngle) / 2;\n    var offset = seriesModel.get('selectedOffset');\n    var dx = Math.cos(midAngle) * offset;\n    var dy = Math.sin(midAngle) * offset;\n    var cursorStyle = itemModel.getShallow('cursor');\n    cursorStyle && sector.attr('cursor', cursorStyle);\n    this._updateLabel(seriesModel, data, idx);\n    sector.ensureState('emphasis').shape = extend({\n      r: layout.r + (emphasisModel.get('scale') ? emphasisModel.get('scaleSize') || 0 : 0)\n    }, getSectorCornerRadius(emphasisModel.getModel('itemStyle'), layout));\n    extend(sector.ensureState('select'), {\n      x: dx,\n      y: dy,\n      shape: getSectorCornerRadius(itemModel.getModel(['select', 'itemStyle']), layout)\n    });\n    extend(sector.ensureState('blur'), {\n      shape: getSectorCornerRadius(itemModel.getModel(['blur', 'itemStyle']), layout)\n    });\n    var labelLine = sector.getTextGuideLine();\n    var labelText = sector.getTextContent();\n    labelLine && extend(labelLine.ensureState('select'), {\n      x: dx,\n      y: dy\n    });\n    // TODO: needs dx, dy in zrender?\n    extend(labelText.ensureState('select'), {\n      x: dx,\n      y: dy\n    });\n    toggleHoverEmphasis(this, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n  };\n  PiePiece.prototype._updateLabel = function (seriesModel, data, idx) {\n    var sector = this;\n    var itemModel = data.getItemModel(idx);\n    var labelLineModel = itemModel.getModel('labelLine');\n    var style = data.getItemVisual(idx, 'style');\n    var visualColor = style && style.fill;\n    var visualOpacity = style && style.opacity;\n    setLabelStyle(sector, getLabelStatesModels(itemModel), {\n      labelFetcher: data.hostModel,\n      labelDataIndex: idx,\n      inheritColor: visualColor,\n      defaultOpacity: visualOpacity,\n      defaultText: seriesModel.getFormattedLabel(idx, 'normal') || data.getName(idx)\n    });\n    var labelText = sector.getTextContent();\n    // Set textConfig on sector.\n    sector.setTextConfig({\n      // reset position, rotation\n      position: null,\n      rotation: null\n    });\n    // Make sure update style on labelText after setLabelStyle.\n    // Because setLabelStyle will replace a new style on it.\n    labelText.attr({\n      z2: 10\n    });\n    var labelPosition = seriesModel.get(['label', 'position']);\n    if (labelPosition !== 'outside' && labelPosition !== 'outer') {\n      sector.removeTextGuideLine();\n    } else {\n      var polyline = this.getTextGuideLine();\n      if (!polyline) {\n        polyline = new graphic.Polyline();\n        this.setTextGuideLine(polyline);\n      }\n      // Default use item visual color\n      setLabelLineStyle(this, getLabelLineStatesModels(itemModel), {\n        stroke: visualColor,\n        opacity: retrieve3(labelLineModel.get(['lineStyle', 'opacity']), visualOpacity, 1)\n      });\n    }\n  };\n  return PiePiece;\n}(graphic.Sector);\n// Pie view\nvar PieView = /** @class */function (_super) {\n  __extends(PieView, _super);\n  function PieView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.ignoreLabelLineUpdate = true;\n    return _this;\n  }\n  PieView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    var startAngle;\n    // First render\n    if (!oldData && data.count() > 0) {\n      var shape = data.getItemLayout(0);\n      for (var s = 1; isNaN(shape && shape.startAngle) && s < data.count(); ++s) {\n        shape = data.getItemLayout(s);\n      }\n      if (shape) {\n        startAngle = shape.startAngle;\n      }\n    }\n    // remove empty-circle if it exists\n    if (this._emptyCircleSector) {\n      group.remove(this._emptyCircleSector);\n    }\n    // when all data are filtered, show lightgray empty circle\n    if (data.count() === 0 && seriesModel.get('showEmptyCircle')) {\n      var layoutData = getSeriesLayoutData(seriesModel);\n      var sector = new graphic.Sector({\n        shape: extend(getBasicPieLayout(seriesModel, api), layoutData)\n      });\n      sector.useStyle(seriesModel.getModel('emptyCircleStyle').getItemStyle());\n      this._emptyCircleSector = sector;\n      group.add(sector);\n    }\n    data.diff(oldData).add(function (idx) {\n      var piePiece = new PiePiece(data, idx, startAngle);\n      data.setItemGraphicEl(idx, piePiece);\n      group.add(piePiece);\n    }).update(function (newIdx, oldIdx) {\n      var piePiece = oldData.getItemGraphicEl(oldIdx);\n      piePiece.updateData(data, newIdx, startAngle);\n      piePiece.off('click');\n      group.add(piePiece);\n      data.setItemGraphicEl(newIdx, piePiece);\n    }).remove(function (idx) {\n      var piePiece = oldData.getItemGraphicEl(idx);\n      graphic.removeElementWithFadeOut(piePiece, seriesModel, idx);\n    }).execute();\n    labelLayout(seriesModel);\n    // Always use initial animation.\n    if (seriesModel.get('animationTypeUpdate') !== 'expansion') {\n      this._data = data;\n    }\n  };\n  PieView.prototype.dispose = function () {};\n  PieView.prototype.containPoint = function (point, seriesModel) {\n    var data = seriesModel.getData();\n    var itemLayout = data.getItemLayout(0);\n    if (itemLayout) {\n      var dx = point[0] - itemLayout.cx;\n      var dy = point[1] - itemLayout.cy;\n      var radius = Math.sqrt(dx * dx + dy * dy);\n      return radius <= itemLayout.r && radius >= itemLayout.r0;\n    }\n  };\n  PieView.type = 'pie';\n  return PieView;\n}(ChartView);\nexport default PieView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport prepareSeriesDataSchema from '../../data/helper/createDimensions.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport { extend, isArray } from 'zrender/lib/core/util.js';\n/**\r\n * [Usage]:\r\n * (1)\r\n * createListSimply(seriesModel, ['value']);\r\n * (2)\r\n * createListSimply(seriesModel, {\r\n *     coordDimensions: ['value'],\r\n *     dimensionsCount: 5\r\n * });\r\n */\nexport default function createSeriesDataSimply(seriesModel, opt, nameList) {\n  opt = isArray(opt) && {\n    coordDimensions: opt\n  } || extend({\n    encodeDefine: seriesModel.getEncode()\n  }, opt);\n  var source = seriesModel.getSource();\n  var dimensions = prepareSeriesDataSchema(source, opt).dimensions;\n  var list = new SeriesData(dimensions, seriesModel);\n  list.initData(source, nameList);\n  return list;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n/**\r\n * LegendVisualProvider is an bridge that pick encoded color from data and\r\n * provide to the legend component.\r\n */\nvar LegendVisualProvider = /** @class */function () {\n  function LegendVisualProvider(\n  // Function to get data after filtered. It stores all the encoding info\n  getDataWithEncodedVisual,\n  // Function to get raw data before filtered.\n  getRawData) {\n    this._getDataWithEncodedVisual = getDataWithEncodedVisual;\n    this._getRawData = getRawData;\n  }\n  LegendVisualProvider.prototype.getAllNames = function () {\n    var rawData = this._getRawData();\n    // We find the name from the raw data. In case it's filtered by the legend component.\n    // Normally, the name can be found in rawData, but can't be found in filtered data will display as gray.\n    return rawData.mapArray(rawData.getName);\n  };\n  LegendVisualProvider.prototype.containName = function (name) {\n    var rawData = this._getRawData();\n    return rawData.indexOfName(name) >= 0;\n  };\n  LegendVisualProvider.prototype.indexOfName = function (name) {\n    // Only get data when necessary.\n    // Because LegendVisualProvider constructor may be new in the stage that data is not prepared yet.\n    // Invoking Series#getData immediately will throw an error.\n    var dataWithEncodedVisual = this._getDataWithEncodedVisual();\n    return dataWithEncodedVisual.indexOfName(name);\n  };\n  LegendVisualProvider.prototype.getItemVisual = function (dataIndex, key) {\n    // Get encoded visual properties from final filtered data.\n    var dataWithEncodedVisual = this._getDataWithEncodedVisual();\n    return dataWithEncodedVisual.getItemVisual(dataIndex, key);\n  };\n  return LegendVisualProvider;\n}();\nexport default LegendVisualProvider;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesDataSimply from '../helper/createSeriesDataSimply.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as modelUtil from '../../util/model.js';\nimport { getPercentSeats } from '../../util/number.js';\nimport { makeSeriesEncodeForNameBased } from '../../data/helper/sourceHelper.js';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider.js';\nimport SeriesModel from '../../model/Series.js';\nvar innerData = modelUtil.makeInner();\nvar PieSeriesModel = /** @class */function (_super) {\n  __extends(PieSeriesModel, _super);\n  function PieSeriesModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\r\n   * @overwrite\r\n   */\n  PieSeriesModel.prototype.init = function (option) {\n    _super.prototype.init.apply(this, arguments);\n    // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n    this.legendVisualProvider = new LegendVisualProvider(zrUtil.bind(this.getData, this), zrUtil.bind(this.getRawData, this));\n    this._defaultLabelLine(option);\n  };\n  /**\r\n   * @overwrite\r\n   */\n  PieSeriesModel.prototype.mergeOption = function () {\n    _super.prototype.mergeOption.apply(this, arguments);\n  };\n  /**\r\n   * @overwrite\r\n   */\n  PieSeriesModel.prototype.getInitialData = function () {\n    return createSeriesDataSimply(this, {\n      coordDimensions: ['value'],\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForNameBased, this)\n    });\n  };\n  /**\r\n   * @overwrite\r\n   */\n  PieSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var data = this.getData();\n    // update seats when data is changed\n    var dataInner = innerData(data);\n    var seats = dataInner.seats;\n    if (!seats) {\n      var valueList_1 = [];\n      data.each(data.mapDimension('value'), function (value) {\n        valueList_1.push(value);\n      });\n      seats = dataInner.seats = getPercentSeats(valueList_1, data.hostModel.get('percentPrecision'));\n    }\n    var params = _super.prototype.getDataParams.call(this, dataIndex);\n    // seats may be empty when sum is 0\n    params.percent = seats[dataIndex] || 0;\n    params.$vars.push('percent');\n    return params;\n  };\n  PieSeriesModel.prototype._defaultLabelLine = function (option) {\n    // Extend labelLine emphasis\n    modelUtil.defaultEmphasis(option, 'labelLine', ['show']);\n    var labelLineNormalOpt = option.labelLine;\n    var labelLineEmphasisOpt = option.emphasis.labelLine;\n    // Not show label line if `label.normal.show = false`\n    labelLineNormalOpt.show = labelLineNormalOpt.show && option.label.show;\n    labelLineEmphasisOpt.show = labelLineEmphasisOpt.show && option.emphasis.label.show;\n  };\n  PieSeriesModel.type = 'series.pie';\n  PieSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    colorBy: 'data',\n    // \n    center: ['50%', '50%'],\n    radius: [0, '75%'],\n    // \n    clockwise: true,\n    startAngle: 90,\n    endAngle: 'auto',\n    padAngle: 0,\n    // 0\n    minAngle: 0,\n    // If the angle of a sector less than `minShowLabelAngle`,\n    // the label will not be displayed.\n    minShowLabelAngle: 0,\n    // \n    selectedOffset: 10,\n    // singlemultiple\n    // selectedMode: false,\n    // 'radius' | 'area'\n    // roseType: null,\n    percentPrecision: 2,\n    // If still show when all data zero.\n    stillShowZeroSum: true,\n    // cursor: null,\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0,\n    width: null,\n    height: null,\n    label: {\n      // color: 'inherit',\n      // If rotate around circle\n      rotate: 0,\n      show: true,\n      overflow: 'truncate',\n      // 'outer', 'inside', 'center'\n      position: 'outer',\n      // 'none', 'labelLine', 'edge'. Works only when position is 'outer'\n      alignTo: 'none',\n      // Closest distance between label and chart edge.\n      // Works only position is 'outer' and alignTo is 'edge'.\n      edgeDistance: '25%',\n      // Works only position is 'outer' and alignTo is not 'edge'.\n      bleedMargin: 10,\n      // Distance between text and label line.\n      distanceToLabelLine: 5\n      // formatter:  tooltip.formatter\n      //  textStyle\n      // distance: positioninnerlabel()\n    },\n    // Enabled when label.normal.position is 'outer'\n    labelLine: {\n      show: true,\n      // \n      length: 15,\n      // \n      length2: 15,\n      smooth: false,\n      minTurnAngle: 90,\n      maxSurfaceAngle: 90,\n      lineStyle: {\n        // color: ,\n        width: 1,\n        type: 'solid'\n      }\n    },\n    itemStyle: {\n      borderWidth: 1,\n      borderJoin: 'round'\n    },\n    showEmptyCircle: true,\n    emptyCircleStyle: {\n      color: 'lightgray',\n      opacity: 1\n    },\n    labelLayout: {\n      // Hide the overlapped label.\n      hideOverlap: true\n    },\n    emphasis: {\n      scale: true,\n      scaleSize: 5\n    },\n    // If use strategy to avoid label overlapping\n    avoidLabelOverlap: true,\n    // Animation type. Valid values: expansion, scale\n    animationType: 'expansion',\n    animationDuration: 1000,\n    // Animation type when update. Valid values: transition, expansion\n    animationTypeUpdate: 'transition',\n    animationEasingUpdate: 'cubicInOut',\n    animationDurationUpdate: 500,\n    animationEasing: 'cubicInOut'\n  };\n  return PieSeriesModel;\n}(SeriesModel);\nexport default PieSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { isNumber } from 'zrender/lib/core/util.js';\nexport default function negativeDataFilter(seriesType) {\n  return {\n    seriesType: seriesType,\n    reset: function (seriesModel, ecModel) {\n      var data = seriesModel.getData();\n      data.filterSelf(function (idx) {\n        // handle negative value condition\n        var valueDim = data.mapDimension('value');\n        var curValue = data.get(valueDim, idx);\n        if (isNumber(curValue) && !isNaN(curValue) && curValue < 0) {\n          return false;\n        }\n        return true;\n      });\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { createLegacyDataSelectAction } from '../../legacy/dataSelectAction.js';\nimport pieLayout from '../pie/pieLayout.js';\nimport dataFilter from '../../processor/dataFilter.js';\nimport { curry } from 'zrender/lib/core/util.js';\nimport PieView from './PieView.js';\nimport PieSeriesModel from './PieSeries.js';\nimport negativeDataFilter from '../../processor/negativeDataFilter.js';\nexport function install(registers) {\n  registers.registerChartView(PieView);\n  registers.registerSeriesModel(PieSeriesModel);\n  createLegacyDataSelectAction('pie', registers.registerAction);\n  registers.registerLayout(curry(pieLayout, 'pie'));\n  registers.registerProcessor(dataFilter('pie'));\n  registers.registerProcessor(negativeDataFilter('pie'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component.js';\nvar GridModel = /** @class */function (_super) {\n  __extends(GridModel, _super);\n  function GridModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  GridModel.type = 'grid';\n  GridModel.dependencies = ['xAxis', 'yAxis'];\n  GridModel.layoutMode = 'box';\n  GridModel.defaultOption = {\n    show: false,\n    // zlevel: 0,\n    z: 0,\n    left: '10%',\n    top: 60,\n    right: '10%',\n    bottom: 70,\n    // If grid size contain label\n    containLabel: false,\n    // width: {totalWidth} - left - right,\n    // height: {totalHeight} - top - bottom,\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderWidth: 1,\n    borderColor: '#ccc'\n  };\n  return GridModel;\n}(ComponentModel);\nexport default GridModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ComponentModel from '../../model/Component.js';\nimport { AxisModelCommonMixin } from '../axisModelCommonMixin.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\nvar CartesianAxisModel = /** @class */function (_super) {\n  __extends(CartesianAxisModel, _super);\n  function CartesianAxisModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  CartesianAxisModel.prototype.getCoordSysModel = function () {\n    return this.getReferringComponents('grid', SINGLE_REFERRING).models[0];\n  };\n  CartesianAxisModel.type = 'cartesian2dAxis';\n  return CartesianAxisModel;\n}(ComponentModel);\nexport { CartesianAxisModel };\nzrUtil.mixin(CartesianAxisModel, AxisModelCommonMixin);\nexport default CartesianAxisModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar defaultOption = {\n  show: true,\n  // zlevel: 0,\n  z: 0,\n  // Inverse the axis.\n  inverse: false,\n  // Axis name displayed.\n  name: '',\n  // 'start' | 'middle' | 'end'\n  nameLocation: 'end',\n  // By degree. By default auto rotate by nameLocation.\n  nameRotate: null,\n  nameTruncate: {\n    maxWidth: null,\n    ellipsis: '...',\n    placeholder: '.'\n  },\n  // Use global text style by default.\n  nameTextStyle: {},\n  // The gap between axisName and axisLine.\n  nameGap: 15,\n  // Default `false` to support tooltip.\n  silent: false,\n  // Default `false` to avoid legacy user event listener fail.\n  triggerEvent: false,\n  tooltip: {\n    show: false\n  },\n  axisPointer: {},\n  axisLine: {\n    show: true,\n    onZero: true,\n    onZeroAxisIndex: null,\n    lineStyle: {\n      color: '#6E7079',\n      width: 1,\n      type: 'solid'\n    },\n    // The arrow at both ends the the axis.\n    symbol: ['none', 'none'],\n    symbolSize: [10, 15]\n  },\n  axisTick: {\n    show: true,\n    // Whether axisTick is inside the grid or outside the grid.\n    inside: false,\n    // The length of axisTick.\n    length: 5,\n    lineStyle: {\n      width: 1\n    }\n  },\n  axisLabel: {\n    show: true,\n    // Whether axisLabel is inside the grid or outside the grid.\n    inside: false,\n    rotate: 0,\n    // true | false | null/undefined (auto)\n    showMinLabel: null,\n    // true | false | null/undefined (auto)\n    showMaxLabel: null,\n    margin: 8,\n    // formatter: null,\n    fontSize: 12\n  },\n  splitLine: {\n    show: true,\n    showMinLine: true,\n    showMaxLine: true,\n    lineStyle: {\n      color: ['#E0E6F1'],\n      width: 1,\n      type: 'solid'\n    }\n  },\n  splitArea: {\n    show: false,\n    areaStyle: {\n      color: ['rgba(250,250,250,0.2)', 'rgba(210,219,238,0.2)']\n    }\n  }\n};\nvar categoryAxis = zrUtil.merge({\n  // The gap at both ends of the axis. For categoryAxis, boolean.\n  boundaryGap: true,\n  // Set false to faster category collection.\n  deduplication: null,\n  // splitArea: {\n  // show: false\n  // },\n  splitLine: {\n    show: false\n  },\n  axisTick: {\n    // If tick is align with label when boundaryGap is true\n    alignWithLabel: false,\n    interval: 'auto'\n  },\n  axisLabel: {\n    interval: 'auto'\n  }\n}, defaultOption);\nvar valueAxis = zrUtil.merge({\n  boundaryGap: [0, 0],\n  axisLine: {\n    // Not shown when other axis is categoryAxis in cartesian\n    show: 'auto'\n  },\n  axisTick: {\n    // Not shown when other axis is categoryAxis in cartesian\n    show: 'auto'\n  },\n  // TODO\n  // min/max: [30, datamin, 60] or [20, datamin] or [datamin, 60]\n  splitNumber: 5,\n  minorTick: {\n    // Minor tick, not available for cateogry axis.\n    show: false,\n    // Split number of minor ticks. The value should be in range of (0, 100)\n    splitNumber: 5,\n    // Length of minor tick\n    length: 3,\n    // Line style\n    lineStyle: {\n      // Default to be same with axisTick\n    }\n  },\n  minorSplitLine: {\n    show: false,\n    lineStyle: {\n      color: '#F4F7FD',\n      width: 1\n    }\n  }\n}, defaultOption);\nvar timeAxis = zrUtil.merge({\n  splitNumber: 6,\n  axisLabel: {\n    // To eliminate labels that are not nice\n    showMinLabel: false,\n    showMaxLabel: false,\n    rich: {\n      primary: {\n        fontWeight: 'bold'\n      }\n    }\n  },\n  splitLine: {\n    show: false\n  }\n}, valueAxis);\nvar logAxis = zrUtil.defaults({\n  logBase: 10\n}, valueAxis);\nexport default {\n  category: categoryAxis,\n  value: valueAxis,\n  time: timeAxis,\n  log: logAxis\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nexport var AXIS_TYPES = {\n  value: 1,\n  category: 1,\n  time: 1,\n  log: 1\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport axisDefault from './axisDefault.js';\nimport { getLayoutParams, mergeLayoutParam, fetchLayoutMode } from '../util/layout.js';\nimport OrdinalMeta from '../data/OrdinalMeta.js';\nimport { AXIS_TYPES } from './axisCommonTypes.js';\nimport { each, merge } from 'zrender/lib/core/util.js';\n/**\r\n * Generate sub axis model class\r\n * @param axisName 'x' 'y' 'radius' 'angle' 'parallel' ...\r\n */\nexport default function axisModelCreator(registers, axisName, BaseAxisModelClass, extraDefaultOption) {\n  each(AXIS_TYPES, function (v, axisType) {\n    var defaultOption = merge(merge({}, axisDefault[axisType], true), extraDefaultOption, true);\n    var AxisModel = /** @class */function (_super) {\n      __extends(AxisModel, _super);\n      function AxisModel() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = axisName + 'Axis.' + axisType;\n        return _this;\n      }\n      AxisModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\n        var layoutMode = fetchLayoutMode(this);\n        var inputPositionParams = layoutMode ? getLayoutParams(option) : {};\n        var themeModel = ecModel.getTheme();\n        merge(option, themeModel.get(axisType + 'Axis'));\n        merge(option, this.getDefaultOption());\n        option.type = getAxisType(option);\n        if (layoutMode) {\n          mergeLayoutParam(option, inputPositionParams, layoutMode);\n        }\n      };\n      AxisModel.prototype.optionUpdated = function () {\n        var thisOption = this.option;\n        if (thisOption.type === 'category') {\n          this.__ordinalMeta = OrdinalMeta.createByAxisModel(this);\n        }\n      };\n      /**\r\n       * Should not be called before all of 'getInitailData' finished.\r\n       * Because categories are collected during initializing data.\r\n       */\n      AxisModel.prototype.getCategories = function (rawData) {\n        var option = this.option;\n        // FIXME\n        // warning if called before all of 'getInitailData' finished.\n        if (option.type === 'category') {\n          if (rawData) {\n            return option.data;\n          }\n          return this.__ordinalMeta.categories;\n        }\n      };\n      AxisModel.prototype.getOrdinalMeta = function () {\n        return this.__ordinalMeta;\n      };\n      AxisModel.type = axisName + 'Axis.' + axisType;\n      AxisModel.defaultOption = defaultOption;\n      return AxisModel;\n    }(BaseAxisModelClass);\n    registers.registerComponentModel(AxisModel);\n  });\n  registers.registerSubTypeDefaulter(axisName + 'Axis', getAxisType);\n}\nfunction getAxisType(option) {\n  // Default axis with data is category axis\n  return option.type || (option.data ? 'category' : 'value');\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar Cartesian = /** @class */function () {\n  function Cartesian(name) {\n    this.type = 'cartesian';\n    this._dimList = [];\n    this._axes = {};\n    this.name = name || '';\n  }\n  Cartesian.prototype.getAxis = function (dim) {\n    return this._axes[dim];\n  };\n  Cartesian.prototype.getAxes = function () {\n    return zrUtil.map(this._dimList, function (dim) {\n      return this._axes[dim];\n    }, this);\n  };\n  Cartesian.prototype.getAxesByScale = function (scaleType) {\n    scaleType = scaleType.toLowerCase();\n    return zrUtil.filter(this.getAxes(), function (axis) {\n      return axis.scale.type === scaleType;\n    });\n  };\n  Cartesian.prototype.addAxis = function (axis) {\n    var dim = axis.dim;\n    this._axes[dim] = axis;\n    this._dimList.push(dim);\n  };\n  return Cartesian;\n}();\n;\nexport default Cartesian;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport Cartesian from './Cartesian.js';\nimport { invert } from 'zrender/lib/core/matrix.js';\nimport { applyTransform } from 'zrender/lib/core/vector.js';\nexport var cartesian2DDimensions = ['x', 'y'];\nfunction canCalculateAffineTransform(scale) {\n  return scale.type === 'interval' || scale.type === 'time';\n}\nvar Cartesian2D = /** @class */function (_super) {\n  __extends(Cartesian2D, _super);\n  function Cartesian2D() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = 'cartesian2d';\n    _this.dimensions = cartesian2DDimensions;\n    return _this;\n  }\n  /**\r\n   * Calculate an affine transform matrix if two axes are time or value.\r\n   * It's mainly for accelartion on the large time series data.\r\n   */\n  Cartesian2D.prototype.calcAffineTransform = function () {\n    this._transform = this._invTransform = null;\n    var xAxisScale = this.getAxis('x').scale;\n    var yAxisScale = this.getAxis('y').scale;\n    if (!canCalculateAffineTransform(xAxisScale) || !canCalculateAffineTransform(yAxisScale)) {\n      return;\n    }\n    var xScaleExtent = xAxisScale.getExtent();\n    var yScaleExtent = yAxisScale.getExtent();\n    var start = this.dataToPoint([xScaleExtent[0], yScaleExtent[0]]);\n    var end = this.dataToPoint([xScaleExtent[1], yScaleExtent[1]]);\n    var xScaleSpan = xScaleExtent[1] - xScaleExtent[0];\n    var yScaleSpan = yScaleExtent[1] - yScaleExtent[0];\n    if (!xScaleSpan || !yScaleSpan) {\n      return;\n    }\n    // Accelerate data to point calculation on the special large time series data.\n    var scaleX = (end[0] - start[0]) / xScaleSpan;\n    var scaleY = (end[1] - start[1]) / yScaleSpan;\n    var translateX = start[0] - xScaleExtent[0] * scaleX;\n    var translateY = start[1] - yScaleExtent[0] * scaleY;\n    var m = this._transform = [scaleX, 0, 0, scaleY, translateX, translateY];\n    this._invTransform = invert([], m);\n  };\n  /**\r\n   * Base axis will be used on stacking.\r\n   */\n  Cartesian2D.prototype.getBaseAxis = function () {\n    return this.getAxesByScale('ordinal')[0] || this.getAxesByScale('time')[0] || this.getAxis('x');\n  };\n  Cartesian2D.prototype.containPoint = function (point) {\n    var axisX = this.getAxis('x');\n    var axisY = this.getAxis('y');\n    return axisX.contain(axisX.toLocalCoord(point[0])) && axisY.contain(axisY.toLocalCoord(point[1]));\n  };\n  Cartesian2D.prototype.containData = function (data) {\n    return this.getAxis('x').containData(data[0]) && this.getAxis('y').containData(data[1]);\n  };\n  Cartesian2D.prototype.containZone = function (data1, data2) {\n    var zoneDiag1 = this.dataToPoint(data1);\n    var zoneDiag2 = this.dataToPoint(data2);\n    var area = this.getArea();\n    var zone = new BoundingRect(zoneDiag1[0], zoneDiag1[1], zoneDiag2[0] - zoneDiag1[0], zoneDiag2[1] - zoneDiag1[1]);\n    return area.intersect(zone);\n  };\n  Cartesian2D.prototype.dataToPoint = function (data, clamp, out) {\n    out = out || [];\n    var xVal = data[0];\n    var yVal = data[1];\n    // Fast path\n    if (this._transform\n    // It's supported that if data is like `[Inifity, 123]`, where only Y pixel calculated.\n    && xVal != null && isFinite(xVal) && yVal != null && isFinite(yVal)) {\n      return applyTransform(out, data, this._transform);\n    }\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out[0] = xAxis.toGlobalCoord(xAxis.dataToCoord(xVal, clamp));\n    out[1] = yAxis.toGlobalCoord(yAxis.dataToCoord(yVal, clamp));\n    return out;\n  };\n  Cartesian2D.prototype.clampData = function (data, out) {\n    var xScale = this.getAxis('x').scale;\n    var yScale = this.getAxis('y').scale;\n    var xAxisExtent = xScale.getExtent();\n    var yAxisExtent = yScale.getExtent();\n    var x = xScale.parse(data[0]);\n    var y = yScale.parse(data[1]);\n    out = out || [];\n    out[0] = Math.min(Math.max(Math.min(xAxisExtent[0], xAxisExtent[1]), x), Math.max(xAxisExtent[0], xAxisExtent[1]));\n    out[1] = Math.min(Math.max(Math.min(yAxisExtent[0], yAxisExtent[1]), y), Math.max(yAxisExtent[0], yAxisExtent[1]));\n    return out;\n  };\n  Cartesian2D.prototype.pointToData = function (point, clamp) {\n    var out = [];\n    if (this._invTransform) {\n      return applyTransform(out, point, this._invTransform);\n    }\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out[0] = xAxis.coordToData(xAxis.toLocalCoord(point[0]), clamp);\n    out[1] = yAxis.coordToData(yAxis.toLocalCoord(point[1]), clamp);\n    return out;\n  };\n  Cartesian2D.prototype.getOtherAxis = function (axis) {\n    return this.getAxis(axis.dim === 'x' ? 'y' : 'x');\n  };\n  /**\r\n   * Get rect area of cartesian.\r\n   * Area will have a contain function to determine if a point is in the coordinate system.\r\n   */\n  Cartesian2D.prototype.getArea = function (tolerance) {\n    tolerance = tolerance || 0;\n    var xExtent = this.getAxis('x').getGlobalExtent();\n    var yExtent = this.getAxis('y').getGlobalExtent();\n    var x = Math.min(xExtent[0], xExtent[1]) - tolerance;\n    var y = Math.min(yExtent[0], yExtent[1]) - tolerance;\n    var width = Math.max(xExtent[0], xExtent[1]) - x + tolerance;\n    var height = Math.max(yExtent[0], yExtent[1]) - y + tolerance;\n    return new BoundingRect(x, y, width, height);\n  };\n  return Cartesian2D;\n}(Cartesian);\n;\nexport default Cartesian2D;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../Axis.js';\nvar Axis2D = /** @class */function (_super) {\n  __extends(Axis2D, _super);\n  function Axis2D(dim, scale, coordExtent, axisType, position) {\n    var _this = _super.call(this, dim, scale, coordExtent) || this;\n    /**\r\n     * Index of axis, can be used as key\r\n     * Injected outside.\r\n     */\n    _this.index = 0;\n    _this.type = axisType || 'value';\n    _this.position = position || 'bottom';\n    return _this;\n  }\n  Axis2D.prototype.isHorizontal = function () {\n    var position = this.position;\n    return position === 'top' || position === 'bottom';\n  };\n  /**\r\n   * Each item cooresponds to this.getExtent(), which\r\n   * means globalExtent[0] may greater than globalExtent[1],\r\n   * unless `asc` is input.\r\n   *\r\n   * @param {boolean} [asc]\r\n   * @return {Array.<number>}\r\n   */\n  Axis2D.prototype.getGlobalExtent = function (asc) {\n    var ret = this.getExtent();\n    ret[0] = this.toGlobalCoord(ret[0]);\n    ret[1] = this.toGlobalCoord(ret[1]);\n    asc && ret[0] > ret[1] && ret.reverse();\n    return ret;\n  };\n  Axis2D.prototype.pointToData = function (point, clamp) {\n    return this.coordToData(this.toLocalCoord(point[this.dim === 'x' ? 0 : 1]), clamp);\n  };\n  /**\r\n   * Set ordinalSortInfo\r\n   * @param info new OrdinalSortInfo\r\n   */\n  Axis2D.prototype.setCategorySortInfo = function (info) {\n    if (this.type !== 'category') {\n      return false;\n    }\n    this.model.option.categorySortInfo = info;\n    this.scale.setSortInfo(info);\n  };\n  return Axis2D;\n}(Axis);\nexport default Axis2D;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\n/**\r\n * Can only be called after coordinate system creation stage.\r\n * (Can be called before coordinate system update stage).\r\n */\nexport function layout(gridModel, axisModel, opt) {\n  opt = opt || {};\n  var grid = gridModel.coordinateSystem;\n  var axis = axisModel.axis;\n  var layout = {};\n  var otherAxisOnZeroOf = axis.getAxesOnZeroOf()[0];\n  var rawAxisPosition = axis.position;\n  var axisPosition = otherAxisOnZeroOf ? 'onZero' : rawAxisPosition;\n  var axisDim = axis.dim;\n  var rect = grid.getRect();\n  var rectBound = [rect.x, rect.x + rect.width, rect.y, rect.y + rect.height];\n  var idx = {\n    left: 0,\n    right: 1,\n    top: 0,\n    bottom: 1,\n    onZero: 2\n  };\n  var axisOffset = axisModel.get('offset') || 0;\n  var posBound = axisDim === 'x' ? [rectBound[2] - axisOffset, rectBound[3] + axisOffset] : [rectBound[0] - axisOffset, rectBound[1] + axisOffset];\n  if (otherAxisOnZeroOf) {\n    var onZeroCoord = otherAxisOnZeroOf.toGlobalCoord(otherAxisOnZeroOf.dataToCoord(0));\n    posBound[idx.onZero] = Math.max(Math.min(onZeroCoord, posBound[1]), posBound[0]);\n  }\n  // Axis position\n  layout.position = [axisDim === 'y' ? posBound[idx[axisPosition]] : rectBound[0], axisDim === 'x' ? posBound[idx[axisPosition]] : rectBound[3]];\n  // Axis rotation\n  layout.rotation = Math.PI / 2 * (axisDim === 'x' ? 0 : 1);\n  // Tick and label direction, x y is axisDim\n  var dirMap = {\n    top: -1,\n    bottom: 1,\n    left: -1,\n    right: 1\n  };\n  layout.labelDirection = layout.tickDirection = layout.nameDirection = dirMap[rawAxisPosition];\n  layout.labelOffset = otherAxisOnZeroOf ? posBound[idx[rawAxisPosition]] - posBound[idx.onZero] : 0;\n  if (axisModel.get(['axisTick', 'inside'])) {\n    layout.tickDirection = -layout.tickDirection;\n  }\n  if (zrUtil.retrieve(opt.labelInside, axisModel.get(['axisLabel', 'inside']))) {\n    layout.labelDirection = -layout.labelDirection;\n  }\n  // Special label rotation\n  var labelRotate = axisModel.get(['axisLabel', 'rotate']);\n  layout.labelRotate = axisPosition === 'top' ? -labelRotate : labelRotate;\n  // Over splitLine and splitArea\n  layout.z2 = 1;\n  return layout;\n}\nexport function isCartesian2DSeries(seriesModel) {\n  return seriesModel.get('coordinateSystem') === 'cartesian2d';\n}\nexport function findAxisModels(seriesModel) {\n  var axisModelMap = {\n    xAxisModel: null,\n    yAxisModel: null\n  };\n  zrUtil.each(axisModelMap, function (v, key) {\n    var axisType = key.replace(/Model$/, '');\n    var axisModel = seriesModel.getReferringComponents(axisType, SINGLE_REFERRING).models[0];\n    if (process.env.NODE_ENV !== 'production') {\n      if (!axisModel) {\n        throw new Error(axisType + ' \"' + zrUtil.retrieve3(seriesModel.get(axisType + 'Index'), seriesModel.get(axisType + 'Id'), 0) + '\" not found');\n      }\n    }\n    axisModelMap[key] = axisModel;\n  });\n  return axisModelMap;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { getPrecisionSafe, round } from '../util/number.js';\nimport IntervalScale from '../scale/Interval.js';\nimport { getScaleExtent } from './axisHelper.js';\nimport { warn } from '../util/log.js';\nimport { increaseInterval, isValueNice } from '../scale/helper.js';\nvar mathLog = Math.log;\nexport function alignScaleTicks(scale, axisModel, alignToScale) {\n  var intervalScaleProto = IntervalScale.prototype;\n  // NOTE: There is a precondition for log scale  here:\n  // In log scale we store _interval and _extent of exponent value.\n  // So if we use the method of InternalScale to set/get these data.\n  // It process the exponent value, which is linear and what we want here.\n  var alignToTicks = intervalScaleProto.getTicks.call(alignToScale);\n  var alignToNicedTicks = intervalScaleProto.getTicks.call(alignToScale, true);\n  var alignToSplitNumber = alignToTicks.length - 1;\n  var alignToInterval = intervalScaleProto.getInterval.call(alignToScale);\n  var scaleExtent = getScaleExtent(scale, axisModel);\n  var rawExtent = scaleExtent.extent;\n  var isMinFixed = scaleExtent.fixMin;\n  var isMaxFixed = scaleExtent.fixMax;\n  if (scale.type === 'log') {\n    var logBase = mathLog(scale.base);\n    rawExtent = [mathLog(rawExtent[0]) / logBase, mathLog(rawExtent[1]) / logBase];\n  }\n  scale.setExtent(rawExtent[0], rawExtent[1]);\n  scale.calcNiceExtent({\n    splitNumber: alignToSplitNumber,\n    fixMin: isMinFixed,\n    fixMax: isMaxFixed\n  });\n  var extent = intervalScaleProto.getExtent.call(scale);\n  // Need to update the rawExtent.\n  // Because value in rawExtent may be not parsed. e.g. 'dataMin', 'dataMax'\n  if (isMinFixed) {\n    rawExtent[0] = extent[0];\n  }\n  if (isMaxFixed) {\n    rawExtent[1] = extent[1];\n  }\n  var interval = intervalScaleProto.getInterval.call(scale);\n  var min = rawExtent[0];\n  var max = rawExtent[1];\n  if (isMinFixed && isMaxFixed) {\n    // User set min, max, divide to get new interval\n    interval = (max - min) / alignToSplitNumber;\n  } else if (isMinFixed) {\n    max = rawExtent[0] + interval * alignToSplitNumber;\n    // User set min, expand extent on the other side\n    while (max < rawExtent[1] && isFinite(max) && isFinite(rawExtent[1])) {\n      interval = increaseInterval(interval);\n      max = rawExtent[0] + interval * alignToSplitNumber;\n    }\n  } else if (isMaxFixed) {\n    // User set max, expand extent on the other side\n    min = rawExtent[1] - interval * alignToSplitNumber;\n    while (min > rawExtent[0] && isFinite(min) && isFinite(rawExtent[0])) {\n      interval = increaseInterval(interval);\n      min = rawExtent[1] - interval * alignToSplitNumber;\n    }\n  } else {\n    var nicedSplitNumber = scale.getTicks().length - 1;\n    if (nicedSplitNumber > alignToSplitNumber) {\n      interval = increaseInterval(interval);\n    }\n    var range = interval * alignToSplitNumber;\n    max = Math.ceil(rawExtent[1] / interval) * interval;\n    min = round(max - range);\n    // Not change the result that crossing zero.\n    if (min < 0 && rawExtent[0] >= 0) {\n      min = 0;\n      max = round(range);\n    } else if (max > 0 && rawExtent[1] <= 0) {\n      max = 0;\n      min = -round(range);\n    }\n  }\n  // Adjust min, max based on the extent of alignTo. When min or max is set in alignTo scale\n  var t0 = (alignToTicks[0].value - alignToNicedTicks[0].value) / alignToInterval;\n  var t1 = (alignToTicks[alignToSplitNumber].value - alignToNicedTicks[alignToSplitNumber].value) / alignToInterval;\n  // NOTE: Must in setExtent -> setInterval -> setNiceExtent order.\n  intervalScaleProto.setExtent.call(scale, min + interval * t0, max + interval * t1);\n  intervalScaleProto.setInterval.call(scale, interval);\n  if (t0 || t1) {\n    intervalScaleProto.setNiceExtent.call(scale, min + interval, max - interval);\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    var ticks = intervalScaleProto.getTicks.call(scale);\n    if (ticks[1] && (!isValueNice(interval) || getPrecisionSafe(ticks[1].value) > getPrecisionSafe(interval))) {\n      warn(\n      // eslint-disable-next-line\n      \"The ticks may be not readable when set min: \" + axisModel.get('min') + \", max: \" + axisModel.get('max') + \" and alignTicks: true\");\n    }\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n/**\r\n * Grid is a region which contains at most 4 cartesian systems\r\n *\r\n * TODO Default cartesian\r\n */\nimport { isObject, each, indexOf, retrieve3, keys } from 'zrender/lib/core/util.js';\nimport { getLayoutRect } from '../../util/layout.js';\nimport { createScaleByModel, ifAxisCrossZero, niceScaleExtent, estimateLabelUnionRect, getDataDimensionsOnAxis } from '../../coord/axisHelper.js';\nimport Cartesian2D, { cartesian2DDimensions } from './Cartesian2D.js';\nimport Axis2D from './Axis2D.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\nimport { isCartesian2DSeries, findAxisModels } from './cartesianAxisHelper.js';\nimport { isIntervalOrLogScale } from '../../scale/helper.js';\nimport { alignScaleTicks } from '../axisAlignTicks.js';\nvar Grid = /** @class */function () {\n  function Grid(gridModel, ecModel, api) {\n    // FIXME:TS where used (different from registered type 'cartesian2d')?\n    this.type = 'grid';\n    this._coordsMap = {};\n    this._coordsList = [];\n    this._axesMap = {};\n    this._axesList = [];\n    this.axisPointerEnabled = true;\n    this.dimensions = cartesian2DDimensions;\n    this._initCartesian(gridModel, ecModel, api);\n    this.model = gridModel;\n  }\n  Grid.prototype.getRect = function () {\n    return this._rect;\n  };\n  Grid.prototype.update = function (ecModel, api) {\n    var axesMap = this._axesMap;\n    this._updateScale(ecModel, this.model);\n    function updateAxisTicks(axes) {\n      var alignTo;\n      // Axis is added in order of axisIndex.\n      var axesIndices = keys(axes);\n      var len = axesIndices.length;\n      if (!len) {\n        return;\n      }\n      var axisNeedsAlign = [];\n      // Process once and calculate the ticks for those don't use alignTicks.\n      for (var i = len - 1; i >= 0; i--) {\n        var idx = +axesIndices[i]; // Convert to number.\n        var axis = axes[idx];\n        var model = axis.model;\n        var scale = axis.scale;\n        if (\n        // Only value and log axis without interval support alignTicks.\n        isIntervalOrLogScale(scale) && model.get('alignTicks') && model.get('interval') == null) {\n          axisNeedsAlign.push(axis);\n        } else {\n          niceScaleExtent(scale, model);\n          if (isIntervalOrLogScale(scale)) {\n            // Can only align to interval or log axis.\n            alignTo = axis;\n          }\n        }\n      }\n      ;\n      // All axes has set alignTicks. Pick the first one.\n      // PENDING. Should we find the axis that both set interval, min, max and align to this one?\n      if (axisNeedsAlign.length) {\n        if (!alignTo) {\n          alignTo = axisNeedsAlign.pop();\n          niceScaleExtent(alignTo.scale, alignTo.model);\n        }\n        each(axisNeedsAlign, function (axis) {\n          alignScaleTicks(axis.scale, axis.model, alignTo.scale);\n        });\n      }\n    }\n    updateAxisTicks(axesMap.x);\n    updateAxisTicks(axesMap.y);\n    // Key: axisDim_axisIndex, value: boolean, whether onZero target.\n    var onZeroRecords = {};\n    each(axesMap.x, function (xAxis) {\n      fixAxisOnZero(axesMap, 'y', xAxis, onZeroRecords);\n    });\n    each(axesMap.y, function (yAxis) {\n      fixAxisOnZero(axesMap, 'x', yAxis, onZeroRecords);\n    });\n    // Resize again if containLabel is enabled\n    // FIXME It may cause getting wrong grid size in data processing stage\n    this.resize(this.model, api);\n  };\n  /**\r\n   * Resize the grid\r\n   */\n  Grid.prototype.resize = function (gridModel, api, ignoreContainLabel) {\n    var boxLayoutParams = gridModel.getBoxLayoutParams();\n    var isContainLabel = !ignoreContainLabel && gridModel.get('containLabel');\n    var gridRect = getLayoutRect(boxLayoutParams, {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n    this._rect = gridRect;\n    var axesList = this._axesList;\n    adjustAxes();\n    // Minus label size\n    if (isContainLabel) {\n      each(axesList, function (axis) {\n        if (!axis.model.get(['axisLabel', 'inside'])) {\n          var labelUnionRect = estimateLabelUnionRect(axis);\n          if (labelUnionRect) {\n            var dim = axis.isHorizontal() ? 'height' : 'width';\n            var margin = axis.model.get(['axisLabel', 'margin']);\n            gridRect[dim] -= labelUnionRect[dim] + margin;\n            if (axis.position === 'top') {\n              gridRect.y += labelUnionRect.height + margin;\n            } else if (axis.position === 'left') {\n              gridRect.x += labelUnionRect.width + margin;\n            }\n          }\n        }\n      });\n      adjustAxes();\n    }\n    each(this._coordsList, function (coord) {\n      // Calculate affine matrix to accelerate the data to point transform.\n      // If all the axes scales are time or value.\n      coord.calcAffineTransform();\n    });\n    function adjustAxes() {\n      each(axesList, function (axis) {\n        var isHorizontal = axis.isHorizontal();\n        var extent = isHorizontal ? [0, gridRect.width] : [0, gridRect.height];\n        var idx = axis.inverse ? 1 : 0;\n        axis.setExtent(extent[idx], extent[1 - idx]);\n        updateAxisTransform(axis, isHorizontal ? gridRect.x : gridRect.y);\n      });\n    }\n  };\n  Grid.prototype.getAxis = function (dim, axisIndex) {\n    var axesMapOnDim = this._axesMap[dim];\n    if (axesMapOnDim != null) {\n      return axesMapOnDim[axisIndex || 0];\n    }\n  };\n  Grid.prototype.getAxes = function () {\n    return this._axesList.slice();\n  };\n  Grid.prototype.getCartesian = function (xAxisIndex, yAxisIndex) {\n    if (xAxisIndex != null && yAxisIndex != null) {\n      var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n      return this._coordsMap[key];\n    }\n    if (isObject(xAxisIndex)) {\n      yAxisIndex = xAxisIndex.yAxisIndex;\n      xAxisIndex = xAxisIndex.xAxisIndex;\n    }\n    for (var i = 0, coordList = this._coordsList; i < coordList.length; i++) {\n      if (coordList[i].getAxis('x').index === xAxisIndex || coordList[i].getAxis('y').index === yAxisIndex) {\n        return coordList[i];\n      }\n    }\n  };\n  Grid.prototype.getCartesians = function () {\n    return this._coordsList.slice();\n  };\n  /**\r\n   * @implements\r\n   */\n  Grid.prototype.convertToPixel = function (ecModel, finder, value) {\n    var target = this._findConvertTarget(finder);\n    return target.cartesian ? target.cartesian.dataToPoint(value) : target.axis ? target.axis.toGlobalCoord(target.axis.dataToCoord(value)) : null;\n  };\n  /**\r\n   * @implements\r\n   */\n  Grid.prototype.convertFromPixel = function (ecModel, finder, value) {\n    var target = this._findConvertTarget(finder);\n    return target.cartesian ? target.cartesian.pointToData(value) : target.axis ? target.axis.coordToData(target.axis.toLocalCoord(value)) : null;\n  };\n  Grid.prototype._findConvertTarget = function (finder) {\n    var seriesModel = finder.seriesModel;\n    var xAxisModel = finder.xAxisModel || seriesModel && seriesModel.getReferringComponents('xAxis', SINGLE_REFERRING).models[0];\n    var yAxisModel = finder.yAxisModel || seriesModel && seriesModel.getReferringComponents('yAxis', SINGLE_REFERRING).models[0];\n    var gridModel = finder.gridModel;\n    var coordsList = this._coordsList;\n    var cartesian;\n    var axis;\n    if (seriesModel) {\n      cartesian = seriesModel.coordinateSystem;\n      indexOf(coordsList, cartesian) < 0 && (cartesian = null);\n    } else if (xAxisModel && yAxisModel) {\n      cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n    } else if (xAxisModel) {\n      axis = this.getAxis('x', xAxisModel.componentIndex);\n    } else if (yAxisModel) {\n      axis = this.getAxis('y', yAxisModel.componentIndex);\n    }\n    // Lowest priority.\n    else if (gridModel) {\n      var grid = gridModel.coordinateSystem;\n      if (grid === this) {\n        cartesian = this._coordsList[0];\n      }\n    }\n    return {\n      cartesian: cartesian,\n      axis: axis\n    };\n  };\n  /**\r\n   * @implements\r\n   */\n  Grid.prototype.containPoint = function (point) {\n    var coord = this._coordsList[0];\n    if (coord) {\n      return coord.containPoint(point);\n    }\n  };\n  /**\r\n   * Initialize cartesian coordinate systems\r\n   */\n  Grid.prototype._initCartesian = function (gridModel, ecModel, api) {\n    var _this = this;\n    var grid = this;\n    var axisPositionUsed = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n    var axesMap = {\n      x: {},\n      y: {}\n    };\n    var axesCount = {\n      x: 0,\n      y: 0\n    };\n    // Create axis\n    ecModel.eachComponent('xAxis', createAxisCreator('x'), this);\n    ecModel.eachComponent('yAxis', createAxisCreator('y'), this);\n    if (!axesCount.x || !axesCount.y) {\n      // Roll back when there no either x or y axis\n      this._axesMap = {};\n      this._axesList = [];\n      return;\n    }\n    this._axesMap = axesMap;\n    // Create cartesian2d\n    each(axesMap.x, function (xAxis, xAxisIndex) {\n      each(axesMap.y, function (yAxis, yAxisIndex) {\n        var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n        var cartesian = new Cartesian2D(key);\n        cartesian.master = _this;\n        cartesian.model = gridModel;\n        _this._coordsMap[key] = cartesian;\n        _this._coordsList.push(cartesian);\n        cartesian.addAxis(xAxis);\n        cartesian.addAxis(yAxis);\n      });\n    });\n    function createAxisCreator(dimName) {\n      return function (axisModel, idx) {\n        if (!isAxisUsedInTheGrid(axisModel, gridModel)) {\n          return;\n        }\n        var axisPosition = axisModel.get('position');\n        if (dimName === 'x') {\n          // Fix position\n          if (axisPosition !== 'top' && axisPosition !== 'bottom') {\n            // Default bottom of X\n            axisPosition = axisPositionUsed.bottom ? 'top' : 'bottom';\n          }\n        } else {\n          // Fix position\n          if (axisPosition !== 'left' && axisPosition !== 'right') {\n            // Default left of Y\n            axisPosition = axisPositionUsed.left ? 'right' : 'left';\n          }\n        }\n        axisPositionUsed[axisPosition] = true;\n        var axis = new Axis2D(dimName, createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisPosition);\n        var isCategory = axis.type === 'category';\n        axis.onBand = isCategory && axisModel.get('boundaryGap');\n        axis.inverse = axisModel.get('inverse');\n        // Inject axis into axisModel\n        axisModel.axis = axis;\n        // Inject axisModel into axis\n        axis.model = axisModel;\n        // Inject grid info axis\n        axis.grid = grid;\n        // Index of axis, can be used as key\n        axis.index = idx;\n        grid._axesList.push(axis);\n        axesMap[dimName][idx] = axis;\n        axesCount[dimName]++;\n      };\n    }\n  };\n  /**\r\n   * Update cartesian properties from series.\r\n   */\n  Grid.prototype._updateScale = function (ecModel, gridModel) {\n    // Reset scale\n    each(this._axesList, function (axis) {\n      axis.scale.setExtent(Infinity, -Infinity);\n      if (axis.type === 'category') {\n        var categorySortInfo = axis.model.get('categorySortInfo');\n        axis.scale.setSortInfo(categorySortInfo);\n      }\n    });\n    ecModel.eachSeries(function (seriesModel) {\n      if (isCartesian2DSeries(seriesModel)) {\n        var axesModelMap = findAxisModels(seriesModel);\n        var xAxisModel = axesModelMap.xAxisModel;\n        var yAxisModel = axesModelMap.yAxisModel;\n        if (!isAxisUsedInTheGrid(xAxisModel, gridModel) || !isAxisUsedInTheGrid(yAxisModel, gridModel)) {\n          return;\n        }\n        var cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n        var data = seriesModel.getData();\n        var xAxis = cartesian.getAxis('x');\n        var yAxis = cartesian.getAxis('y');\n        unionExtent(data, xAxis);\n        unionExtent(data, yAxis);\n      }\n    }, this);\n    function unionExtent(data, axis) {\n      each(getDataDimensionsOnAxis(data, axis.dim), function (dim) {\n        axis.scale.unionExtentFromData(data, dim);\n      });\n    }\n  };\n  /**\r\n   * @param dim 'x' or 'y' or 'auto' or null/undefined\r\n   */\n  Grid.prototype.getTooltipAxes = function (dim) {\n    var baseAxes = [];\n    var otherAxes = [];\n    each(this.getCartesians(), function (cartesian) {\n      var baseAxis = dim != null && dim !== 'auto' ? cartesian.getAxis(dim) : cartesian.getBaseAxis();\n      var otherAxis = cartesian.getOtherAxis(baseAxis);\n      indexOf(baseAxes, baseAxis) < 0 && baseAxes.push(baseAxis);\n      indexOf(otherAxes, otherAxis) < 0 && otherAxes.push(otherAxis);\n    });\n    return {\n      baseAxes: baseAxes,\n      otherAxes: otherAxes\n    };\n  };\n  Grid.create = function (ecModel, api) {\n    var grids = [];\n    ecModel.eachComponent('grid', function (gridModel, idx) {\n      var grid = new Grid(gridModel, ecModel, api);\n      grid.name = 'grid_' + idx;\n      // dataSampling requires axis extent, so resize\n      // should be performed in create stage.\n      grid.resize(gridModel, api, true);\n      gridModel.coordinateSystem = grid;\n      grids.push(grid);\n    });\n    // Inject the coordinateSystems into seriesModel\n    ecModel.eachSeries(function (seriesModel) {\n      if (!isCartesian2DSeries(seriesModel)) {\n        return;\n      }\n      var axesModelMap = findAxisModels(seriesModel);\n      var xAxisModel = axesModelMap.xAxisModel;\n      var yAxisModel = axesModelMap.yAxisModel;\n      var gridModel = xAxisModel.getCoordSysModel();\n      if (process.env.NODE_ENV !== 'production') {\n        if (!gridModel) {\n          throw new Error('Grid \"' + retrieve3(xAxisModel.get('gridIndex'), xAxisModel.get('gridId'), 0) + '\" not found');\n        }\n        if (xAxisModel.getCoordSysModel() !== yAxisModel.getCoordSysModel()) {\n          throw new Error('xAxis and yAxis must use the same grid');\n        }\n      }\n      var grid = gridModel.coordinateSystem;\n      seriesModel.coordinateSystem = grid.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n    });\n    return grids;\n  };\n  // For deciding which dimensions to use when creating list data\n  Grid.dimensions = cartesian2DDimensions;\n  return Grid;\n}();\n/**\r\n * Check if the axis is used in the specified grid.\r\n */\nfunction isAxisUsedInTheGrid(axisModel, gridModel) {\n  return axisModel.getCoordSysModel() === gridModel;\n}\nfunction fixAxisOnZero(axesMap, otherAxisDim, axis,\n// Key: see `getOnZeroRecordKey`\nonZeroRecords) {\n  axis.getAxesOnZeroOf = function () {\n    // TODO: onZero of multiple axes.\n    return otherAxisOnZeroOf ? [otherAxisOnZeroOf] : [];\n  };\n  // onZero can not be enabled in these two situations:\n  // 1. When any other axis is a category axis.\n  // 2. When no axis is cross 0 point.\n  var otherAxes = axesMap[otherAxisDim];\n  var otherAxisOnZeroOf;\n  var axisModel = axis.model;\n  var onZero = axisModel.get(['axisLine', 'onZero']);\n  var onZeroAxisIndex = axisModel.get(['axisLine', 'onZeroAxisIndex']);\n  if (!onZero) {\n    return;\n  }\n  // If target axis is specified.\n  if (onZeroAxisIndex != null) {\n    if (canOnZeroToAxis(otherAxes[onZeroAxisIndex])) {\n      otherAxisOnZeroOf = otherAxes[onZeroAxisIndex];\n    }\n  } else {\n    // Find the first available other axis.\n    for (var idx in otherAxes) {\n      if (otherAxes.hasOwnProperty(idx) && canOnZeroToAxis(otherAxes[idx])\n      // Consider that two Y axes on one value axis,\n      // if both onZero, the two Y axes overlap.\n      && !onZeroRecords[getOnZeroRecordKey(otherAxes[idx])]) {\n        otherAxisOnZeroOf = otherAxes[idx];\n        break;\n      }\n    }\n  }\n  if (otherAxisOnZeroOf) {\n    onZeroRecords[getOnZeroRecordKey(otherAxisOnZeroOf)] = true;\n  }\n  function getOnZeroRecordKey(axis) {\n    return axis.dim + '_' + axis.index;\n  }\n}\nfunction canOnZeroToAxis(axis) {\n  return axis && axis.type !== 'category' && axis.type !== 'time' && ifAxisCrossZero(axis);\n}\nfunction updateAxisTransform(axis, coordBase) {\n  var axisExtent = axis.getExtent();\n  var axisExtentSum = axisExtent[0] + axisExtent[1];\n  // Fast transform\n  axis.toGlobalCoord = axis.dim === 'x' ? function (coord) {\n    return coord + coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n  axis.toLocalCoord = axis.dim === 'x' ? function (coord) {\n    return coord - coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n}\nexport default Grid;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { retrieve, defaults, extend, each, isObject, map, isString, isNumber, isFunction, retrieve2 } from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport Model from '../../model/Model.js';\nimport { isRadianAroundZero, remRadian } from '../../util/number.js';\nimport { createSymbol, normalizeSymbolOffset } from '../../util/symbol.js';\nimport * as matrixUtil from 'zrender/lib/core/matrix.js';\nimport { applyTransform as v2ApplyTransform } from 'zrender/lib/core/vector.js';\nimport { shouldShowAllLabels } from '../../coord/axisHelper.js';\nimport { prepareLayoutList, hideOverlap } from '../../label/labelLayoutHelper.js';\nvar PI = Math.PI;\n/**\r\n * A final axis is translated and rotated from a \"standard axis\".\r\n * So opt.position and opt.rotation is required.\r\n *\r\n * A standard axis is and axis from [0, 0] to [0, axisExtent[1]],\r\n * for example: (0, 0) ------------> (0, 50)\r\n *\r\n * nameDirection or tickDirection or labelDirection is 1 means tick\r\n * or label is below the standard axis, whereas is -1 means above\r\n * the standard axis. labelOffset means offset between label and axis,\r\n * which is useful when 'onZero', where axisLabel is in the grid and\r\n * label in outside grid.\r\n *\r\n * Tips: like always,\r\n * positive rotation represents anticlockwise, and negative rotation\r\n * represents clockwise.\r\n * The direction of position coordinate is the same as the direction\r\n * of screen coordinate.\r\n *\r\n * Do not need to consider axis 'inverse', which is auto processed by\r\n * axis extent.\r\n */\nvar AxisBuilder = /** @class */function () {\n  function AxisBuilder(axisModel, opt) {\n    this.group = new graphic.Group();\n    this.opt = opt;\n    this.axisModel = axisModel;\n    // Default value\n    defaults(opt, {\n      labelOffset: 0,\n      nameDirection: 1,\n      tickDirection: 1,\n      labelDirection: 1,\n      silent: true,\n      handleAutoShown: function () {\n        return true;\n      }\n    });\n    // FIXME Not use a separate text group?\n    var transformGroup = new graphic.Group({\n      x: opt.position[0],\n      y: opt.position[1],\n      rotation: opt.rotation\n    });\n    // this.group.add(transformGroup);\n    // this._transformGroup = transformGroup;\n    transformGroup.updateTransform();\n    this._transformGroup = transformGroup;\n  }\n  AxisBuilder.prototype.hasBuilder = function (name) {\n    return !!builders[name];\n  };\n  AxisBuilder.prototype.add = function (name) {\n    builders[name](this.opt, this.axisModel, this.group, this._transformGroup);\n  };\n  AxisBuilder.prototype.getGroup = function () {\n    return this.group;\n  };\n  AxisBuilder.innerTextLayout = function (axisRotation, textRotation, direction) {\n    var rotationDiff = remRadian(textRotation - axisRotation);\n    var textAlign;\n    var textVerticalAlign;\n    if (isRadianAroundZero(rotationDiff)) {\n      // Label is parallel with axis line.\n      textVerticalAlign = direction > 0 ? 'top' : 'bottom';\n      textAlign = 'center';\n    } else if (isRadianAroundZero(rotationDiff - PI)) {\n      // Label is inverse parallel with axis line.\n      textVerticalAlign = direction > 0 ? 'bottom' : 'top';\n      textAlign = 'center';\n    } else {\n      textVerticalAlign = 'middle';\n      if (rotationDiff > 0 && rotationDiff < PI) {\n        textAlign = direction > 0 ? 'right' : 'left';\n      } else {\n        textAlign = direction > 0 ? 'left' : 'right';\n      }\n    }\n    return {\n      rotation: rotationDiff,\n      textAlign: textAlign,\n      textVerticalAlign: textVerticalAlign\n    };\n  };\n  AxisBuilder.makeAxisEventDataBase = function (axisModel) {\n    var eventData = {\n      componentType: axisModel.mainType,\n      componentIndex: axisModel.componentIndex\n    };\n    eventData[axisModel.mainType + 'Index'] = axisModel.componentIndex;\n    return eventData;\n  };\n  AxisBuilder.isLabelSilent = function (axisModel) {\n    var tooltipOpt = axisModel.get('tooltip');\n    return axisModel.get('silent')\n    // Consider mouse cursor, add these restrictions.\n    || !(axisModel.get('triggerEvent') || tooltipOpt && tooltipOpt.show);\n  };\n  return AxisBuilder;\n}();\n;\nvar builders = {\n  axisLine: function (opt, axisModel, group, transformGroup) {\n    var shown = axisModel.get(['axisLine', 'show']);\n    if (shown === 'auto' && opt.handleAutoShown) {\n      shown = opt.handleAutoShown('axisLine');\n    }\n    if (!shown) {\n      return;\n    }\n    var extent = axisModel.axis.getExtent();\n    var matrix = transformGroup.transform;\n    var pt1 = [extent[0], 0];\n    var pt2 = [extent[1], 0];\n    var inverse = pt1[0] > pt2[0];\n    if (matrix) {\n      v2ApplyTransform(pt1, pt1, matrix);\n      v2ApplyTransform(pt2, pt2, matrix);\n    }\n    var lineStyle = extend({\n      lineCap: 'round'\n    }, axisModel.getModel(['axisLine', 'lineStyle']).getLineStyle());\n    var line = new graphic.Line({\n      shape: {\n        x1: pt1[0],\n        y1: pt1[1],\n        x2: pt2[0],\n        y2: pt2[1]\n      },\n      style: lineStyle,\n      strokeContainThreshold: opt.strokeContainThreshold || 5,\n      silent: true,\n      z2: 1\n    });\n    graphic.subPixelOptimizeLine(line.shape, line.style.lineWidth);\n    line.anid = 'line';\n    group.add(line);\n    var arrows = axisModel.get(['axisLine', 'symbol']);\n    if (arrows != null) {\n      var arrowSize = axisModel.get(['axisLine', 'symbolSize']);\n      if (isString(arrows)) {\n        // Use the same arrow for start and end point\n        arrows = [arrows, arrows];\n      }\n      if (isString(arrowSize) || isNumber(arrowSize)) {\n        // Use the same size for width and height\n        arrowSize = [arrowSize, arrowSize];\n      }\n      var arrowOffset = normalizeSymbolOffset(axisModel.get(['axisLine', 'symbolOffset']) || 0, arrowSize);\n      var symbolWidth_1 = arrowSize[0];\n      var symbolHeight_1 = arrowSize[1];\n      each([{\n        rotate: opt.rotation + Math.PI / 2,\n        offset: arrowOffset[0],\n        r: 0\n      }, {\n        rotate: opt.rotation - Math.PI / 2,\n        offset: arrowOffset[1],\n        r: Math.sqrt((pt1[0] - pt2[0]) * (pt1[0] - pt2[0]) + (pt1[1] - pt2[1]) * (pt1[1] - pt2[1]))\n      }], function (point, index) {\n        if (arrows[index] !== 'none' && arrows[index] != null) {\n          var symbol = createSymbol(arrows[index], -symbolWidth_1 / 2, -symbolHeight_1 / 2, symbolWidth_1, symbolHeight_1, lineStyle.stroke, true);\n          // Calculate arrow position with offset\n          var r = point.r + point.offset;\n          var pt = inverse ? pt2 : pt1;\n          symbol.attr({\n            rotation: point.rotate,\n            x: pt[0] + r * Math.cos(opt.rotation),\n            y: pt[1] - r * Math.sin(opt.rotation),\n            silent: true,\n            z2: 11\n          });\n          group.add(symbol);\n        }\n      });\n    }\n  },\n  axisTickLabel: function (opt, axisModel, group, transformGroup) {\n    var ticksEls = buildAxisMajorTicks(group, transformGroup, axisModel, opt);\n    var labelEls = buildAxisLabel(group, transformGroup, axisModel, opt);\n    fixMinMaxLabelShow(axisModel, labelEls, ticksEls);\n    buildAxisMinorTicks(group, transformGroup, axisModel, opt.tickDirection);\n    // This bit fixes the label overlap issue for the time chart.\n    // See https://github.com/apache/echarts/issues/14266 for more.\n    if (axisModel.get(['axisLabel', 'hideOverlap'])) {\n      var labelList = prepareLayoutList(map(labelEls, function (label) {\n        return {\n          label: label,\n          priority: label.z2,\n          defaultAttr: {\n            ignore: label.ignore\n          }\n        };\n      }));\n      hideOverlap(labelList);\n    }\n  },\n  axisName: function (opt, axisModel, group, transformGroup) {\n    var name = retrieve(opt.axisName, axisModel.get('name'));\n    if (!name) {\n      return;\n    }\n    var nameLocation = axisModel.get('nameLocation');\n    var nameDirection = opt.nameDirection;\n    var textStyleModel = axisModel.getModel('nameTextStyle');\n    var gap = axisModel.get('nameGap') || 0;\n    var extent = axisModel.axis.getExtent();\n    var gapSignal = extent[0] > extent[1] ? -1 : 1;\n    var pos = [nameLocation === 'start' ? extent[0] - gapSignal * gap : nameLocation === 'end' ? extent[1] + gapSignal * gap : (extent[0] + extent[1]) / 2,\n    // Reuse labelOffset.\n    isNameLocationCenter(nameLocation) ? opt.labelOffset + nameDirection * gap : 0];\n    var labelLayout;\n    var nameRotation = axisModel.get('nameRotate');\n    if (nameRotation != null) {\n      nameRotation = nameRotation * PI / 180; // To radian.\n    }\n    var axisNameAvailableWidth;\n    if (isNameLocationCenter(nameLocation)) {\n      labelLayout = AxisBuilder.innerTextLayout(opt.rotation, nameRotation != null ? nameRotation : opt.rotation,\n      // Adapt to axis.\n      nameDirection);\n    } else {\n      labelLayout = endTextLayout(opt.rotation, nameLocation, nameRotation || 0, extent);\n      axisNameAvailableWidth = opt.axisNameAvailableWidth;\n      if (axisNameAvailableWidth != null) {\n        axisNameAvailableWidth = Math.abs(axisNameAvailableWidth / Math.sin(labelLayout.rotation));\n        !isFinite(axisNameAvailableWidth) && (axisNameAvailableWidth = null);\n      }\n    }\n    var textFont = textStyleModel.getFont();\n    var truncateOpt = axisModel.get('nameTruncate', true) || {};\n    var ellipsis = truncateOpt.ellipsis;\n    var maxWidth = retrieve(opt.nameTruncateMaxWidth, truncateOpt.maxWidth, axisNameAvailableWidth);\n    var textEl = new graphic.Text({\n      x: pos[0],\n      y: pos[1],\n      rotation: labelLayout.rotation,\n      silent: AxisBuilder.isLabelSilent(axisModel),\n      style: createTextStyle(textStyleModel, {\n        text: name,\n        font: textFont,\n        overflow: 'truncate',\n        width: maxWidth,\n        ellipsis: ellipsis,\n        fill: textStyleModel.getTextColor() || axisModel.get(['axisLine', 'lineStyle', 'color']),\n        align: textStyleModel.get('align') || labelLayout.textAlign,\n        verticalAlign: textStyleModel.get('verticalAlign') || labelLayout.textVerticalAlign\n      }),\n      z2: 1\n    });\n    graphic.setTooltipConfig({\n      el: textEl,\n      componentModel: axisModel,\n      itemName: name\n    });\n    textEl.__fullText = name;\n    // Id for animation\n    textEl.anid = 'name';\n    if (axisModel.get('triggerEvent')) {\n      var eventData = AxisBuilder.makeAxisEventDataBase(axisModel);\n      eventData.targetType = 'axisName';\n      eventData.name = name;\n      getECData(textEl).eventData = eventData;\n    }\n    // FIXME\n    transformGroup.add(textEl);\n    textEl.updateTransform();\n    group.add(textEl);\n    textEl.decomposeTransform();\n  }\n};\nfunction endTextLayout(rotation, textPosition, textRotate, extent) {\n  var rotationDiff = remRadian(textRotate - rotation);\n  var textAlign;\n  var textVerticalAlign;\n  var inverse = extent[0] > extent[1];\n  var onLeft = textPosition === 'start' && !inverse || textPosition !== 'start' && inverse;\n  if (isRadianAroundZero(rotationDiff - PI / 2)) {\n    textVerticalAlign = onLeft ? 'bottom' : 'top';\n    textAlign = 'center';\n  } else if (isRadianAroundZero(rotationDiff - PI * 1.5)) {\n    textVerticalAlign = onLeft ? 'top' : 'bottom';\n    textAlign = 'center';\n  } else {\n    textVerticalAlign = 'middle';\n    if (rotationDiff < PI * 1.5 && rotationDiff > PI / 2) {\n      textAlign = onLeft ? 'left' : 'right';\n    } else {\n      textAlign = onLeft ? 'right' : 'left';\n    }\n  }\n  return {\n    rotation: rotationDiff,\n    textAlign: textAlign,\n    textVerticalAlign: textVerticalAlign\n  };\n}\nfunction fixMinMaxLabelShow(axisModel, labelEls, tickEls) {\n  if (shouldShowAllLabels(axisModel.axis)) {\n    return;\n  }\n  // If min or max are user set, we need to check\n  // If the tick on min(max) are overlap on their neighbour tick\n  // If they are overlapped, we need to hide the min(max) tick label\n  var showMinLabel = axisModel.get(['axisLabel', 'showMinLabel']);\n  var showMaxLabel = axisModel.get(['axisLabel', 'showMaxLabel']);\n  // FIXME\n  // Have not consider onBand yet, where tick els is more than label els.\n  labelEls = labelEls || [];\n  tickEls = tickEls || [];\n  var firstLabel = labelEls[0];\n  var nextLabel = labelEls[1];\n  var lastLabel = labelEls[labelEls.length - 1];\n  var prevLabel = labelEls[labelEls.length - 2];\n  var firstTick = tickEls[0];\n  var nextTick = tickEls[1];\n  var lastTick = tickEls[tickEls.length - 1];\n  var prevTick = tickEls[tickEls.length - 2];\n  if (showMinLabel === false) {\n    ignoreEl(firstLabel);\n    ignoreEl(firstTick);\n  } else if (isTwoLabelOverlapped(firstLabel, nextLabel)) {\n    if (showMinLabel) {\n      ignoreEl(nextLabel);\n      ignoreEl(nextTick);\n    } else {\n      ignoreEl(firstLabel);\n      ignoreEl(firstTick);\n    }\n  }\n  if (showMaxLabel === false) {\n    ignoreEl(lastLabel);\n    ignoreEl(lastTick);\n  } else if (isTwoLabelOverlapped(prevLabel, lastLabel)) {\n    if (showMaxLabel) {\n      ignoreEl(prevLabel);\n      ignoreEl(prevTick);\n    } else {\n      ignoreEl(lastLabel);\n      ignoreEl(lastTick);\n    }\n  }\n}\nfunction ignoreEl(el) {\n  el && (el.ignore = true);\n}\nfunction isTwoLabelOverlapped(current, next) {\n  // current and next has the same rotation.\n  var firstRect = current && current.getBoundingRect().clone();\n  var nextRect = next && next.getBoundingRect().clone();\n  if (!firstRect || !nextRect) {\n    return;\n  }\n  // When checking intersect of two rotated labels, we use mRotationBack\n  // to avoid that boundingRect is enlarge when using `boundingRect.applyTransform`.\n  var mRotationBack = matrixUtil.identity([]);\n  matrixUtil.rotate(mRotationBack, mRotationBack, -current.rotation);\n  firstRect.applyTransform(matrixUtil.mul([], mRotationBack, current.getLocalTransform()));\n  nextRect.applyTransform(matrixUtil.mul([], mRotationBack, next.getLocalTransform()));\n  return firstRect.intersect(nextRect);\n}\nfunction isNameLocationCenter(nameLocation) {\n  return nameLocation === 'middle' || nameLocation === 'center';\n}\nfunction createTicks(ticksCoords, tickTransform, tickEndCoord, tickLineStyle, anidPrefix) {\n  var tickEls = [];\n  var pt1 = [];\n  var pt2 = [];\n  for (var i = 0; i < ticksCoords.length; i++) {\n    var tickCoord = ticksCoords[i].coord;\n    pt1[0] = tickCoord;\n    pt1[1] = 0;\n    pt2[0] = tickCoord;\n    pt2[1] = tickEndCoord;\n    if (tickTransform) {\n      v2ApplyTransform(pt1, pt1, tickTransform);\n      v2ApplyTransform(pt2, pt2, tickTransform);\n    }\n    // Tick line, Not use group transform to have better line draw\n    var tickEl = new graphic.Line({\n      shape: {\n        x1: pt1[0],\n        y1: pt1[1],\n        x2: pt2[0],\n        y2: pt2[1]\n      },\n      style: tickLineStyle,\n      z2: 2,\n      autoBatch: true,\n      silent: true\n    });\n    graphic.subPixelOptimizeLine(tickEl.shape, tickEl.style.lineWidth);\n    tickEl.anid = anidPrefix + '_' + ticksCoords[i].tickValue;\n    tickEls.push(tickEl);\n  }\n  return tickEls;\n}\nfunction buildAxisMajorTicks(group, transformGroup, axisModel, opt) {\n  var axis = axisModel.axis;\n  var tickModel = axisModel.getModel('axisTick');\n  var shown = tickModel.get('show');\n  if (shown === 'auto' && opt.handleAutoShown) {\n    shown = opt.handleAutoShown('axisTick');\n  }\n  if (!shown || axis.scale.isBlank()) {\n    return;\n  }\n  var lineStyleModel = tickModel.getModel('lineStyle');\n  var tickEndCoord = opt.tickDirection * tickModel.get('length');\n  var ticksCoords = axis.getTicksCoords();\n  var ticksEls = createTicks(ticksCoords, transformGroup.transform, tickEndCoord, defaults(lineStyleModel.getLineStyle(), {\n    stroke: axisModel.get(['axisLine', 'lineStyle', 'color'])\n  }), 'ticks');\n  for (var i = 0; i < ticksEls.length; i++) {\n    group.add(ticksEls[i]);\n  }\n  return ticksEls;\n}\nfunction buildAxisMinorTicks(group, transformGroup, axisModel, tickDirection) {\n  var axis = axisModel.axis;\n  var minorTickModel = axisModel.getModel('minorTick');\n  if (!minorTickModel.get('show') || axis.scale.isBlank()) {\n    return;\n  }\n  var minorTicksCoords = axis.getMinorTicksCoords();\n  if (!minorTicksCoords.length) {\n    return;\n  }\n  var lineStyleModel = minorTickModel.getModel('lineStyle');\n  var tickEndCoord = tickDirection * minorTickModel.get('length');\n  var minorTickLineStyle = defaults(lineStyleModel.getLineStyle(), defaults(axisModel.getModel('axisTick').getLineStyle(), {\n    stroke: axisModel.get(['axisLine', 'lineStyle', 'color'])\n  }));\n  for (var i = 0; i < minorTicksCoords.length; i++) {\n    var minorTicksEls = createTicks(minorTicksCoords[i], transformGroup.transform, tickEndCoord, minorTickLineStyle, 'minorticks_' + i);\n    for (var k = 0; k < minorTicksEls.length; k++) {\n      group.add(minorTicksEls[k]);\n    }\n  }\n}\nfunction buildAxisLabel(group, transformGroup, axisModel, opt) {\n  var axis = axisModel.axis;\n  var show = retrieve(opt.axisLabelShow, axisModel.get(['axisLabel', 'show']));\n  if (!show || axis.scale.isBlank()) {\n    return;\n  }\n  var labelModel = axisModel.getModel('axisLabel');\n  var labelMargin = labelModel.get('margin');\n  var labels = axis.getViewLabels();\n  // Special label rotate.\n  var labelRotation = (retrieve(opt.labelRotate, labelModel.get('rotate')) || 0) * PI / 180;\n  var labelLayout = AxisBuilder.innerTextLayout(opt.rotation, labelRotation, opt.labelDirection);\n  var rawCategoryData = axisModel.getCategories && axisModel.getCategories(true);\n  var labelEls = [];\n  var silent = AxisBuilder.isLabelSilent(axisModel);\n  var triggerEvent = axisModel.get('triggerEvent');\n  each(labels, function (labelItem, index) {\n    var tickValue = axis.scale.type === 'ordinal' ? axis.scale.getRawOrdinalNumber(labelItem.tickValue) : labelItem.tickValue;\n    var formattedLabel = labelItem.formattedLabel;\n    var rawLabel = labelItem.rawLabel;\n    var itemLabelModel = labelModel;\n    if (rawCategoryData && rawCategoryData[tickValue]) {\n      var rawCategoryItem = rawCategoryData[tickValue];\n      if (isObject(rawCategoryItem) && rawCategoryItem.textStyle) {\n        itemLabelModel = new Model(rawCategoryItem.textStyle, labelModel, axisModel.ecModel);\n      }\n    }\n    var textColor = itemLabelModel.getTextColor() || axisModel.get(['axisLine', 'lineStyle', 'color']);\n    var tickCoord = axis.dataToCoord(tickValue);\n    var align = itemLabelModel.getShallow('align', true) || labelLayout.textAlign;\n    var alignMin = retrieve2(itemLabelModel.getShallow('alignMinLabel', true), align);\n    var alignMax = retrieve2(itemLabelModel.getShallow('alignMaxLabel', true), align);\n    var verticalAlign = itemLabelModel.getShallow('verticalAlign', true) || itemLabelModel.getShallow('baseline', true) || labelLayout.textVerticalAlign;\n    var verticalAlignMin = retrieve2(itemLabelModel.getShallow('verticalAlignMinLabel', true), verticalAlign);\n    var verticalAlignMax = retrieve2(itemLabelModel.getShallow('verticalAlignMaxLabel', true), verticalAlign);\n    var textEl = new graphic.Text({\n      x: tickCoord,\n      y: opt.labelOffset + opt.labelDirection * labelMargin,\n      rotation: labelLayout.rotation,\n      silent: silent,\n      z2: 10 + (labelItem.level || 0),\n      style: createTextStyle(itemLabelModel, {\n        text: formattedLabel,\n        align: index === 0 ? alignMin : index === labels.length - 1 ? alignMax : align,\n        verticalAlign: index === 0 ? verticalAlignMin : index === labels.length - 1 ? verticalAlignMax : verticalAlign,\n        fill: isFunction(textColor) ? textColor(\n        // (1) In category axis with data zoom, tick is not the original\n        // index of axis.data. So tick should not be exposed to user\n        // in category axis.\n        // (2) Compatible with previous version, which always use formatted label as\n        // input. But in interval scale the formatted label is like '223,445', which\n        // maked user replace ','. So we modify it to return original val but remain\n        // it as 'string' to avoid error in replacing.\n        axis.type === 'category' ? rawLabel : axis.type === 'value' ? tickValue + '' : tickValue, index) : textColor\n      })\n    });\n    textEl.anid = 'label_' + tickValue;\n    graphic.setTooltipConfig({\n      el: textEl,\n      componentModel: axisModel,\n      itemName: formattedLabel,\n      formatterParamsExtra: {\n        isTruncated: function () {\n          return textEl.isTruncated;\n        },\n        value: rawLabel,\n        tickIndex: index\n      }\n    });\n    // Pack data for mouse event\n    if (triggerEvent) {\n      var eventData = AxisBuilder.makeAxisEventDataBase(axisModel);\n      eventData.targetType = 'axisLabel';\n      eventData.value = rawLabel;\n      eventData.tickIndex = index;\n      if (axis.type === 'category') {\n        eventData.dataIndex = tickValue;\n      }\n      getECData(textEl).eventData = eventData;\n    }\n    // FIXME\n    transformGroup.add(textEl);\n    textEl.updateTransform();\n    labelEls.push(textEl);\n    group.add(textEl);\n    textEl.decomposeTransform();\n  });\n  return labelEls;\n}\nexport default AxisBuilder;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport Model from '../../model/Model.js';\nimport { each, curry, clone, defaults, isArray, indexOf } from 'zrender/lib/core/util.js';\n// Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n// allAxesInfo should be updated when setOption performed.\nexport function collect(ecModel, api) {\n  var result = {\n    /**\r\n     * key: makeKey(axis.model)\r\n     * value: {\r\n     *      axis,\r\n     *      coordSys,\r\n     *      axisPointerModel,\r\n     *      triggerTooltip,\r\n     *      triggerEmphasis,\r\n     *      involveSeries,\r\n     *      snap,\r\n     *      seriesModels,\r\n     *      seriesDataCount\r\n     * }\r\n     */\n    axesInfo: {},\n    seriesInvolved: false,\n    /**\r\n     * key: makeKey(coordSys.model)\r\n     * value: Object: key makeKey(axis.model), value: axisInfo\r\n     */\n    coordSysAxesInfo: {},\n    coordSysMap: {}\n  };\n  collectAxesInfo(result, ecModel, api);\n  // Check seriesInvolved for performance, in case too many series in some chart.\n  result.seriesInvolved && collectSeriesInfo(result, ecModel);\n  return result;\n}\nfunction collectAxesInfo(result, ecModel, api) {\n  var globalTooltipModel = ecModel.getComponent('tooltip');\n  var globalAxisPointerModel = ecModel.getComponent('axisPointer');\n  // links can only be set on global.\n  var linksOption = globalAxisPointerModel.get('link', true) || [];\n  var linkGroups = [];\n  // Collect axes info.\n  each(api.getCoordinateSystems(), function (coordSys) {\n    // Some coordinate system do not support axes, like geo.\n    if (!coordSys.axisPointerEnabled) {\n      return;\n    }\n    var coordSysKey = makeKey(coordSys.model);\n    var axesInfoInCoordSys = result.coordSysAxesInfo[coordSysKey] = {};\n    result.coordSysMap[coordSysKey] = coordSys;\n    // Set tooltip (like 'cross') is a convenient way to show axisPointer\n    // for user. So we enable setting tooltip on coordSys model.\n    var coordSysModel = coordSys.model;\n    var baseTooltipModel = coordSysModel.getModel('tooltip', globalTooltipModel);\n    each(coordSys.getAxes(), curry(saveTooltipAxisInfo, false, null));\n    // If axis tooltip used, choose tooltip axis for each coordSys.\n    // Notice this case: coordSys is `grid` but not `cartesian2D` here.\n    if (coordSys.getTooltipAxes && globalTooltipModel\n    // If tooltip.showContent is set as false, tooltip will not\n    // show but axisPointer will show as normal.\n    && baseTooltipModel.get('show')) {\n      // Compatible with previous logic. But series.tooltip.trigger: 'axis'\n      // or series.data[n].tooltip.trigger: 'axis' are not support any more.\n      var triggerAxis = baseTooltipModel.get('trigger') === 'axis';\n      var cross = baseTooltipModel.get(['axisPointer', 'type']) === 'cross';\n      var tooltipAxes = coordSys.getTooltipAxes(baseTooltipModel.get(['axisPointer', 'axis']));\n      if (triggerAxis || cross) {\n        each(tooltipAxes.baseAxes, curry(saveTooltipAxisInfo, cross ? 'cross' : true, triggerAxis));\n      }\n      if (cross) {\n        each(tooltipAxes.otherAxes, curry(saveTooltipAxisInfo, 'cross', false));\n      }\n    }\n    // fromTooltip: true | false | 'cross'\n    // triggerTooltip: true | false | null\n    function saveTooltipAxisInfo(fromTooltip, triggerTooltip, axis) {\n      var axisPointerModel = axis.model.getModel('axisPointer', globalAxisPointerModel);\n      var axisPointerShow = axisPointerModel.get('show');\n      if (!axisPointerShow || axisPointerShow === 'auto' && !fromTooltip && !isHandleTrigger(axisPointerModel)) {\n        return;\n      }\n      if (triggerTooltip == null) {\n        triggerTooltip = axisPointerModel.get('triggerTooltip');\n      }\n      axisPointerModel = fromTooltip ? makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) : axisPointerModel;\n      var snap = axisPointerModel.get('snap');\n      var triggerEmphasis = axisPointerModel.get('triggerEmphasis');\n      var axisKey = makeKey(axis.model);\n      var involveSeries = triggerTooltip || snap || axis.type === 'category';\n      // If result.axesInfo[key] exist, override it (tooltip has higher priority).\n      var axisInfo = result.axesInfo[axisKey] = {\n        key: axisKey,\n        axis: axis,\n        coordSys: coordSys,\n        axisPointerModel: axisPointerModel,\n        triggerTooltip: triggerTooltip,\n        triggerEmphasis: triggerEmphasis,\n        involveSeries: involveSeries,\n        snap: snap,\n        useHandle: isHandleTrigger(axisPointerModel),\n        seriesModels: [],\n        linkGroup: null\n      };\n      axesInfoInCoordSys[axisKey] = axisInfo;\n      result.seriesInvolved = result.seriesInvolved || involveSeries;\n      var groupIndex = getLinkGroupIndex(linksOption, axis);\n      if (groupIndex != null) {\n        var linkGroup = linkGroups[groupIndex] || (linkGroups[groupIndex] = {\n          axesInfo: {}\n        });\n        linkGroup.axesInfo[axisKey] = axisInfo;\n        linkGroup.mapper = linksOption[groupIndex].mapper;\n        axisInfo.linkGroup = linkGroup;\n      }\n    }\n  });\n}\nfunction makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) {\n  var tooltipAxisPointerModel = baseTooltipModel.getModel('axisPointer');\n  var fields = ['type', 'snap', 'lineStyle', 'shadowStyle', 'label', 'animation', 'animationDurationUpdate', 'animationEasingUpdate', 'z'];\n  var volatileOption = {};\n  each(fields, function (field) {\n    volatileOption[field] = clone(tooltipAxisPointerModel.get(field));\n  });\n  // category axis do not auto snap, otherwise some tick that do not\n  // has value can not be hovered. value/time/log axis default snap if\n  // triggered from tooltip and trigger tooltip.\n  volatileOption.snap = axis.type !== 'category' && !!triggerTooltip;\n  // Compatible with previous behavior, tooltip axis does not show label by default.\n  // Only these properties can be overridden from tooltip to axisPointer.\n  if (tooltipAxisPointerModel.get('type') === 'cross') {\n    volatileOption.type = 'line';\n  }\n  var labelOption = volatileOption.label || (volatileOption.label = {});\n  // Follow the convention, do not show label when triggered by tooltip by default.\n  labelOption.show == null && (labelOption.show = false);\n  if (fromTooltip === 'cross') {\n    // When 'cross', both axes show labels.\n    var tooltipAxisPointerLabelShow = tooltipAxisPointerModel.get(['label', 'show']);\n    labelOption.show = tooltipAxisPointerLabelShow != null ? tooltipAxisPointerLabelShow : true;\n    // If triggerTooltip, this is a base axis, which should better not use cross style\n    // (cross style is dashed by default)\n    if (!triggerTooltip) {\n      var crossStyle = volatileOption.lineStyle = tooltipAxisPointerModel.get('crossStyle');\n      crossStyle && defaults(labelOption, crossStyle.textStyle);\n    }\n  }\n  return axis.model.getModel('axisPointer', new Model(volatileOption, globalAxisPointerModel, ecModel));\n}\nfunction collectSeriesInfo(result, ecModel) {\n  // Prepare data for axis trigger\n  ecModel.eachSeries(function (seriesModel) {\n    // Notice this case: this coordSys is `cartesian2D` but not `grid`.\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesTooltipTrigger = seriesModel.get(['tooltip', 'trigger'], true);\n    var seriesTooltipShow = seriesModel.get(['tooltip', 'show'], true);\n    if (!coordSys || seriesTooltipTrigger === 'none' || seriesTooltipTrigger === false || seriesTooltipTrigger === 'item' || seriesTooltipShow === false || seriesModel.get(['axisPointer', 'show'], true) === false) {\n      return;\n    }\n    each(result.coordSysAxesInfo[makeKey(coordSys.model)], function (axisInfo) {\n      var axis = axisInfo.axis;\n      if (coordSys.getAxis(axis.dim) === axis) {\n        axisInfo.seriesModels.push(seriesModel);\n        axisInfo.seriesDataCount == null && (axisInfo.seriesDataCount = 0);\n        axisInfo.seriesDataCount += seriesModel.getData().count();\n      }\n    });\n  });\n}\n/**\r\n * For example:\r\n * {\r\n *     axisPointer: {\r\n *         links: [{\r\n *             xAxisIndex: [2, 4],\r\n *             yAxisIndex: 'all'\r\n *         }, {\r\n *             xAxisId: ['a5', 'a7'],\r\n *             xAxisName: 'xxx'\r\n *         }]\r\n *     }\r\n * }\r\n */\nfunction getLinkGroupIndex(linksOption, axis) {\n  var axisModel = axis.model;\n  var dim = axis.dim;\n  for (var i = 0; i < linksOption.length; i++) {\n    var linkOption = linksOption[i] || {};\n    if (checkPropInLink(linkOption[dim + 'AxisId'], axisModel.id) || checkPropInLink(linkOption[dim + 'AxisIndex'], axisModel.componentIndex) || checkPropInLink(linkOption[dim + 'AxisName'], axisModel.name)) {\n      return i;\n    }\n  }\n}\nfunction checkPropInLink(linkPropValue, axisPropValue) {\n  return linkPropValue === 'all' || isArray(linkPropValue) && indexOf(linkPropValue, axisPropValue) >= 0 || linkPropValue === axisPropValue;\n}\nexport function fixValue(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n  if (!axisInfo) {\n    return;\n  }\n  var axisPointerModel = axisInfo.axisPointerModel;\n  var scale = axisInfo.axis.scale;\n  var option = axisPointerModel.option;\n  var status = axisPointerModel.get('status');\n  var value = axisPointerModel.get('value');\n  // Parse init value for category and time axis.\n  if (value != null) {\n    value = scale.parse(value);\n  }\n  var useHandle = isHandleTrigger(axisPointerModel);\n  // If `handle` used, `axisPointer` will always be displayed, so value\n  // and status should be initialized.\n  if (status == null) {\n    option.status = useHandle ? 'show' : 'hide';\n  }\n  var extent = scale.getExtent().slice();\n  extent[0] > extent[1] && extent.reverse();\n  if (\n  // Pick a value on axis when initializing.\n  value == null\n  // If both `handle` and `dataZoom` are used, value may be out of axis extent,\n  // where we should re-pick a value to keep `handle` displaying normally.\n  || value > extent[1]) {\n    // Make handle displayed on the end of the axis when init, which looks better.\n    value = extent[1];\n  }\n  if (value < extent[0]) {\n    value = extent[0];\n  }\n  option.value = value;\n  if (useHandle) {\n    option.status = axisInfo.axis.scale.isBlank() ? 'hide' : 'show';\n  }\n}\nexport function getAxisInfo(axisModel) {\n  var coordSysAxesInfo = (axisModel.ecModel.getComponent('axisPointer') || {}).coordSysAxesInfo;\n  return coordSysAxesInfo && coordSysAxesInfo.axesInfo[makeKey(axisModel)];\n}\nexport function getAxisPointerModel(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n  return axisInfo && axisInfo.axisPointerModel;\n}\nfunction isHandleTrigger(axisPointerModel) {\n  return !!axisPointerModel.get(['handle', 'show']);\n}\n/**\r\n * @param {module:echarts/model/Model} model\r\n * @return {string} unique key\r\n */\nexport function makeKey(model) {\n  return model.type + '||' + model.id;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as axisPointerModelHelper from '../axisPointer/modelHelper.js';\nimport ComponentView from '../../view/Component.js';\nvar axisPointerClazz = {};\n/**\r\n * Base class of AxisView.\r\n */\nvar AxisView = /** @class */function (_super) {\n  __extends(AxisView, _super);\n  function AxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = AxisView.type;\n    return _this;\n  }\n  /**\r\n   * @override\r\n   */\n  AxisView.prototype.render = function (axisModel, ecModel, api, payload) {\n    // FIXME\n    // This process should proformed after coordinate systems updated\n    // (axis scale updated), and should be performed each time update.\n    // So put it here temporarily, although it is not appropriate to\n    // put a model-writing procedure in `view`.\n    this.axisPointerClass && axisPointerModelHelper.fixValue(axisModel);\n    _super.prototype.render.apply(this, arguments);\n    this._doUpdateAxisPointerClass(axisModel, api, true);\n  };\n  /**\r\n   * Action handler.\r\n   */\n  AxisView.prototype.updateAxisPointer = function (axisModel, ecModel, api, payload) {\n    this._doUpdateAxisPointerClass(axisModel, api, false);\n  };\n  /**\r\n   * @override\r\n   */\n  AxisView.prototype.remove = function (ecModel, api) {\n    var axisPointer = this._axisPointer;\n    axisPointer && axisPointer.remove(api);\n  };\n  /**\r\n   * @override\r\n   */\n  AxisView.prototype.dispose = function (ecModel, api) {\n    this._disposeAxisPointer(api);\n    _super.prototype.dispose.apply(this, arguments);\n  };\n  AxisView.prototype._doUpdateAxisPointerClass = function (axisModel, api, forceRender) {\n    var Clazz = AxisView.getAxisPointerClass(this.axisPointerClass);\n    if (!Clazz) {\n      return;\n    }\n    var axisPointerModel = axisPointerModelHelper.getAxisPointerModel(axisModel);\n    axisPointerModel ? (this._axisPointer || (this._axisPointer = new Clazz())).render(axisModel, axisPointerModel, api, forceRender) : this._disposeAxisPointer(api);\n  };\n  AxisView.prototype._disposeAxisPointer = function (api) {\n    this._axisPointer && this._axisPointer.dispose(api);\n    this._axisPointer = null;\n  };\n  AxisView.registerAxisPointerClass = function (type, clazz) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (axisPointerClazz[type]) {\n        throw new Error('axisPointer ' + type + ' exists');\n      }\n    }\n    axisPointerClazz[type] = clazz;\n  };\n  ;\n  AxisView.getAxisPointerClass = function (type) {\n    return type && axisPointerClazz[type];\n  };\n  ;\n  AxisView.type = 'axis';\n  return AxisView;\n}(ComponentView);\nexport default AxisView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { makeInner } from '../../util/model.js';\nvar inner = makeInner();\nexport function rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel) {\n  var axis = axisModel.axis;\n  if (axis.scale.isBlank()) {\n    return;\n  }\n  // TODO: TYPE\n  var splitAreaModel = axisModel.getModel('splitArea');\n  var areaStyleModel = splitAreaModel.getModel('areaStyle');\n  var areaColors = areaStyleModel.get('color');\n  var gridRect = gridModel.coordinateSystem.getRect();\n  var ticksCoords = axis.getTicksCoords({\n    tickModel: splitAreaModel,\n    clamp: true\n  });\n  if (!ticksCoords.length) {\n    return;\n  }\n  // For Making appropriate splitArea animation, the color and anid\n  // should be corresponding to previous one if possible.\n  var areaColorsLen = areaColors.length;\n  var lastSplitAreaColors = inner(axisView).splitAreaColors;\n  var newSplitAreaColors = zrUtil.createHashMap();\n  var colorIndex = 0;\n  if (lastSplitAreaColors) {\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var cIndex = lastSplitAreaColors.get(ticksCoords[i].tickValue);\n      if (cIndex != null) {\n        colorIndex = (cIndex + (areaColorsLen - 1) * i) % areaColorsLen;\n        break;\n      }\n    }\n  }\n  var prev = axis.toGlobalCoord(ticksCoords[0].coord);\n  var areaStyle = areaStyleModel.getAreaStyle();\n  areaColors = zrUtil.isArray(areaColors) ? areaColors : [areaColors];\n  for (var i = 1; i < ticksCoords.length; i++) {\n    var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n    var x = void 0;\n    var y = void 0;\n    var width = void 0;\n    var height = void 0;\n    if (axis.isHorizontal()) {\n      x = prev;\n      y = gridRect.y;\n      width = tickCoord - x;\n      height = gridRect.height;\n      prev = x + width;\n    } else {\n      x = gridRect.x;\n      y = prev;\n      width = gridRect.width;\n      height = tickCoord - y;\n      prev = y + height;\n    }\n    var tickValue = ticksCoords[i - 1].tickValue;\n    tickValue != null && newSplitAreaColors.set(tickValue, colorIndex);\n    axisGroup.add(new graphic.Rect({\n      anid: tickValue != null ? 'area_' + tickValue : null,\n      shape: {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      },\n      style: zrUtil.defaults({\n        fill: areaColors[colorIndex]\n      }, areaStyle),\n      autoBatch: true,\n      silent: true\n    }));\n    colorIndex = (colorIndex + 1) % areaColorsLen;\n  }\n  inner(axisView).splitAreaColors = newSplitAreaColors;\n}\nexport function rectCoordAxisHandleRemove(axisView) {\n  inner(axisView).splitAreaColors = null;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport AxisBuilder from './AxisBuilder.js';\nimport AxisView from './AxisView.js';\nimport * as cartesianAxisHelper from '../../coord/cartesian/cartesianAxisHelper.js';\nimport { rectCoordAxisBuildSplitArea, rectCoordAxisHandleRemove } from './axisSplitHelper.js';\nimport { isIntervalOrLogScale } from '../../scale/helper.js';\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\nvar selfBuilderAttrs = ['splitArea', 'splitLine', 'minorSplitLine'];\nvar CartesianAxisView = /** @class */function (_super) {\n  __extends(CartesianAxisView, _super);\n  function CartesianAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CartesianAxisView.type;\n    _this.axisPointerClass = 'CartesianAxisPointer';\n    return _this;\n  }\n  /**\r\n   * @override\r\n   */\n  CartesianAxisView.prototype.render = function (axisModel, ecModel, api, payload) {\n    this.group.removeAll();\n    var oldAxisGroup = this._axisGroup;\n    this._axisGroup = new graphic.Group();\n    this.group.add(this._axisGroup);\n    if (!axisModel.get('show')) {\n      return;\n    }\n    var gridModel = axisModel.getCoordSysModel();\n    var layout = cartesianAxisHelper.layout(gridModel, axisModel);\n    var axisBuilder = new AxisBuilder(axisModel, zrUtil.extend({\n      handleAutoShown: function (elementType) {\n        var cartesians = gridModel.coordinateSystem.getCartesians();\n        for (var i = 0; i < cartesians.length; i++) {\n          if (isIntervalOrLogScale(cartesians[i].getOtherAxis(axisModel.axis).scale)) {\n            // Still show axis tick or axisLine if other axis is value / log\n            return true;\n          }\n        }\n        // Not show axisTick or axisLine if other axis is category / time\n        return false;\n      }\n    }, layout));\n    zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n    this._axisGroup.add(axisBuilder.getGroup());\n    zrUtil.each(selfBuilderAttrs, function (name) {\n      if (axisModel.get([name, 'show'])) {\n        axisElementBuilders[name](this, this._axisGroup, axisModel, gridModel);\n      }\n    }, this);\n    // THIS is a special case for bar racing chart.\n    // Update the axis label from the natural initial layout to\n    // sorted layout should has no animation.\n    var isInitialSortFromBarRacing = payload && payload.type === 'changeAxisOrder' && payload.isInitSort;\n    if (!isInitialSortFromBarRacing) {\n      graphic.groupTransition(oldAxisGroup, this._axisGroup, axisModel);\n    }\n    _super.prototype.render.call(this, axisModel, ecModel, api, payload);\n  };\n  CartesianAxisView.prototype.remove = function () {\n    rectCoordAxisHandleRemove(this);\n  };\n  CartesianAxisView.type = 'cartesianAxis';\n  return CartesianAxisView;\n}(AxisView);\nvar axisElementBuilders = {\n  splitLine: function (axisView, axisGroup, axisModel, gridModel) {\n    var axis = axisModel.axis;\n    if (axis.scale.isBlank()) {\n      return;\n    }\n    var splitLineModel = axisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    var showMinLine = splitLineModel.get('showMinLine') !== false;\n    var showMaxLine = splitLineModel.get('showMaxLine') !== false;\n    lineColors = zrUtil.isArray(lineColors) ? lineColors : [lineColors];\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var lineCount = 0;\n    var ticksCoords = axis.getTicksCoords({\n      tickModel: splitLineModel\n    });\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n      if (i === 0 && !showMinLine || i === ticksCoords.length - 1 && !showMaxLine) {\n        continue;\n      }\n      var tickValue = ticksCoords[i].tickValue;\n      if (isHorizontal) {\n        p1[0] = tickCoord;\n        p1[1] = gridRect.y;\n        p2[0] = tickCoord;\n        p2[1] = gridRect.y + gridRect.height;\n      } else {\n        p1[0] = gridRect.x;\n        p1[1] = tickCoord;\n        p2[0] = gridRect.x + gridRect.width;\n        p2[1] = tickCoord;\n      }\n      var colorIndex = lineCount++ % lineColors.length;\n      var line = new graphic.Line({\n        anid: tickValue != null ? 'line_' + tickValue : null,\n        autoBatch: true,\n        shape: {\n          x1: p1[0],\n          y1: p1[1],\n          x2: p2[0],\n          y2: p2[1]\n        },\n        style: zrUtil.defaults({\n          stroke: lineColors[colorIndex]\n        }, lineStyle),\n        silent: true\n      });\n      graphic.subPixelOptimizeLine(line.shape, lineStyle.lineWidth);\n      axisGroup.add(line);\n    }\n  },\n  minorSplitLine: function (axisView, axisGroup, axisModel, gridModel) {\n    var axis = axisModel.axis;\n    var minorSplitLineModel = axisModel.getModel('minorSplitLine');\n    var lineStyleModel = minorSplitLineModel.getModel('lineStyle');\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var minorTicksCoords = axis.getMinorTicksCoords();\n    if (!minorTicksCoords.length) {\n      return;\n    }\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n    for (var i = 0; i < minorTicksCoords.length; i++) {\n      for (var k = 0; k < minorTicksCoords[i].length; k++) {\n        var tickCoord = axis.toGlobalCoord(minorTicksCoords[i][k].coord);\n        if (isHorizontal) {\n          p1[0] = tickCoord;\n          p1[1] = gridRect.y;\n          p2[0] = tickCoord;\n          p2[1] = gridRect.y + gridRect.height;\n        } else {\n          p1[0] = gridRect.x;\n          p1[1] = tickCoord;\n          p2[0] = gridRect.x + gridRect.width;\n          p2[1] = tickCoord;\n        }\n        var line = new graphic.Line({\n          anid: 'minor_line_' + minorTicksCoords[i][k].tickValue,\n          autoBatch: true,\n          shape: {\n            x1: p1[0],\n            y1: p1[1],\n            x2: p2[0],\n            y2: p2[1]\n          },\n          style: lineStyle,\n          silent: true\n        });\n        graphic.subPixelOptimizeLine(line.shape, lineStyle.lineWidth);\n        axisGroup.add(line);\n      }\n    }\n  },\n  splitArea: function (axisView, axisGroup, axisModel, gridModel) {\n    rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel);\n  }\n};\nvar CartesianXAxisView = /** @class */function (_super) {\n  __extends(CartesianXAxisView, _super);\n  function CartesianXAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CartesianXAxisView.type;\n    return _this;\n  }\n  CartesianXAxisView.type = 'xAxis';\n  return CartesianXAxisView;\n}(CartesianAxisView);\nexport { CartesianXAxisView };\nvar CartesianYAxisView = /** @class */function (_super) {\n  __extends(CartesianYAxisView, _super);\n  function CartesianYAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CartesianXAxisView.type;\n    return _this;\n  }\n  CartesianYAxisView.type = 'yAxis';\n  return CartesianYAxisView;\n}(CartesianAxisView);\nexport { CartesianYAxisView };\nexport default CartesianAxisView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component.js';\nimport GridModel from '../../coord/cartesian/GridModel.js';\nimport { Rect } from '../../util/graphic.js';\nimport { defaults } from 'zrender/lib/core/util.js';\nimport { CartesianAxisModel } from '../../coord/cartesian/AxisModel.js';\nimport axisModelCreator from '../../coord/axisModelCreator.js';\nimport Grid from '../../coord/cartesian/Grid.js';\nimport { CartesianXAxisView, CartesianYAxisView } from '../axis/CartesianAxisView.js';\n// Grid view\nvar GridView = /** @class */function (_super) {\n  __extends(GridView, _super);\n  function GridView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = 'grid';\n    return _this;\n  }\n  GridView.prototype.render = function (gridModel, ecModel) {\n    this.group.removeAll();\n    if (gridModel.get('show')) {\n      this.group.add(new Rect({\n        shape: gridModel.coordinateSystem.getRect(),\n        style: defaults({\n          fill: gridModel.get('backgroundColor')\n        }, gridModel.getItemStyle()),\n        silent: true,\n        z2: -1\n      }));\n    }\n  };\n  GridView.type = 'grid';\n  return GridView;\n}(ComponentView);\nvar extraOption = {\n  // gridIndex: 0,\n  // gridId: '',\n  offset: 0\n};\nexport function install(registers) {\n  registers.registerComponentView(GridView);\n  registers.registerComponentModel(GridModel);\n  registers.registerCoordinateSystem('cartesian2d', Grid);\n  axisModelCreator(registers, 'x', CartesianAxisModel, extraOption);\n  axisModelCreator(registers, 'y', CartesianAxisModel, extraOption);\n  registers.registerComponentView(CartesianXAxisView);\n  registers.registerComponentView(CartesianYAxisView);\n  registers.registerPreprocessor(function (option) {\n    // Only create grid when need\n    if (option.xAxis && option.yAxis && !option.grid) {\n      option.grid = {};\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n// @ts-nocheck\nimport * as echarts from '../../core/echarts.js';\nimport { noop } from 'zrender/lib/core/util.js';\nvar ATTR = '\\0_ec_interaction_mutex';\nexport function take(zr, resourceKey, userKey) {\n  var store = getStore(zr);\n  store[resourceKey] = userKey;\n}\nexport function release(zr, resourceKey, userKey) {\n  var store = getStore(zr);\n  var uKey = store[resourceKey];\n  if (uKey === userKey) {\n    store[resourceKey] = null;\n  }\n}\nexport function isTaken(zr, resourceKey) {\n  return !!getStore(zr)[resourceKey];\n}\nfunction getStore(zr) {\n  return zr[ATTR] || (zr[ATTR] = {});\n}\n/**\r\n * payload: {\r\n *     type: 'takeGlobalCursor',\r\n *     key: 'dataZoomSelect', or 'brush', or ...,\r\n *         If no userKey, release global cursor.\r\n * }\r\n */\n// TODO: SELF REGISTERED.\necharts.registerAction({\n  type: 'takeGlobalCursor',\n  event: 'globalCursorTaken',\n  update: 'update'\n}, noop);","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport Eventful from 'zrender/lib/core/Eventful.js';\nimport * as eventTool from 'zrender/lib/core/event.js';\nimport * as interactionMutex from './interactionMutex.js';\nimport { isString, bind, defaults, clone } from 'zrender/lib/core/util.js';\n;\nvar RoamController = /** @class */function (_super) {\n  __extends(RoamController, _super);\n  function RoamController(zr) {\n    var _this = _super.call(this) || this;\n    _this._zr = zr;\n    // Avoid two roamController bind the same handler\n    var mousedownHandler = bind(_this._mousedownHandler, _this);\n    var mousemoveHandler = bind(_this._mousemoveHandler, _this);\n    var mouseupHandler = bind(_this._mouseupHandler, _this);\n    var mousewheelHandler = bind(_this._mousewheelHandler, _this);\n    var pinchHandler = bind(_this._pinchHandler, _this);\n    /**\r\n     * Notice: only enable needed types. For example, if 'zoom'\r\n     * is not needed, 'zoom' should not be enabled, otherwise\r\n     * default mousewheel behaviour (scroll page) will be disabled.\r\n     */\n    _this.enable = function (controlType, opt) {\n      // Disable previous first\n      this.disable();\n      this._opt = defaults(clone(opt) || {}, {\n        zoomOnMouseWheel: true,\n        moveOnMouseMove: true,\n        // By default, wheel do not trigger move.\n        moveOnMouseWheel: false,\n        preventDefaultMouseMove: true\n      });\n      if (controlType == null) {\n        controlType = true;\n      }\n      if (controlType === true || controlType === 'move' || controlType === 'pan') {\n        zr.on('mousedown', mousedownHandler);\n        zr.on('mousemove', mousemoveHandler);\n        zr.on('mouseup', mouseupHandler);\n      }\n      if (controlType === true || controlType === 'scale' || controlType === 'zoom') {\n        zr.on('mousewheel', mousewheelHandler);\n        zr.on('pinch', pinchHandler);\n      }\n    };\n    _this.disable = function () {\n      zr.off('mousedown', mousedownHandler);\n      zr.off('mousemove', mousemoveHandler);\n      zr.off('mouseup', mouseupHandler);\n      zr.off('mousewheel', mousewheelHandler);\n      zr.off('pinch', pinchHandler);\n    };\n    return _this;\n  }\n  RoamController.prototype.isDragging = function () {\n    return this._dragging;\n  };\n  RoamController.prototype.isPinching = function () {\n    return this._pinching;\n  };\n  RoamController.prototype.setPointerChecker = function (pointerChecker) {\n    this.pointerChecker = pointerChecker;\n  };\n  RoamController.prototype.dispose = function () {\n    this.disable();\n  };\n  RoamController.prototype._mousedownHandler = function (e) {\n    if (eventTool.isMiddleOrRightButtonOnMouseUpDown(e)) {\n      return;\n    }\n    var el = e.target;\n    while (el) {\n      if (el.draggable) {\n        return;\n      }\n      // check if host is draggable\n      el = el.__hostTarget || el.parent;\n    }\n    var x = e.offsetX;\n    var y = e.offsetY;\n    // Only check on mosedown, but not mousemove.\n    // Mouse can be out of target when mouse moving.\n    if (this.pointerChecker && this.pointerChecker(e, x, y)) {\n      this._x = x;\n      this._y = y;\n      this._dragging = true;\n    }\n  };\n  RoamController.prototype._mousemoveHandler = function (e) {\n    if (!this._dragging || !isAvailableBehavior('moveOnMouseMove', e, this._opt) || e.gestureEvent === 'pinch' || interactionMutex.isTaken(this._zr, 'globalPan')) {\n      return;\n    }\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var oldX = this._x;\n    var oldY = this._y;\n    var dx = x - oldX;\n    var dy = y - oldY;\n    this._x = x;\n    this._y = y;\n    this._opt.preventDefaultMouseMove && eventTool.stop(e.event);\n    trigger(this, 'pan', 'moveOnMouseMove', e, {\n      dx: dx,\n      dy: dy,\n      oldX: oldX,\n      oldY: oldY,\n      newX: x,\n      newY: y,\n      isAvailableBehavior: null\n    });\n  };\n  RoamController.prototype._mouseupHandler = function (e) {\n    if (!eventTool.isMiddleOrRightButtonOnMouseUpDown(e)) {\n      this._dragging = false;\n    }\n  };\n  RoamController.prototype._mousewheelHandler = function (e) {\n    var shouldZoom = isAvailableBehavior('zoomOnMouseWheel', e, this._opt);\n    var shouldMove = isAvailableBehavior('moveOnMouseWheel', e, this._opt);\n    var wheelDelta = e.wheelDelta;\n    var absWheelDeltaDelta = Math.abs(wheelDelta);\n    var originX = e.offsetX;\n    var originY = e.offsetY;\n    // wheelDelta maybe -0 in chrome mac.\n    if (wheelDelta === 0 || !shouldZoom && !shouldMove) {\n      return;\n    }\n    // If both `shouldZoom` and `shouldMove` is true, trigger\n    // their event both, and the final behavior is determined\n    // by event listener themselves.\n    if (shouldZoom) {\n      // Convenience:\n      // Mac and VM Windows on Mac: scroll up: zoom out.\n      // Windows: scroll up: zoom in.\n      // FIXME: Should do more test in different environment.\n      // wheelDelta is too complicated in difference nvironment\n      // (https://developer.mozilla.org/en-US/docs/Web/Events/mousewheel),\n      // although it has been normallized by zrender.\n      // wheelDelta of mouse wheel is bigger than touch pad.\n      var factor = absWheelDeltaDelta > 3 ? 1.4 : absWheelDeltaDelta > 1 ? 1.2 : 1.1;\n      var scale = wheelDelta > 0 ? factor : 1 / factor;\n      checkPointerAndTrigger(this, 'zoom', 'zoomOnMouseWheel', e, {\n        scale: scale,\n        originX: originX,\n        originY: originY,\n        isAvailableBehavior: null\n      });\n    }\n    if (shouldMove) {\n      // FIXME: Should do more test in different environment.\n      var absDelta = Math.abs(wheelDelta);\n      // wheelDelta of mouse wheel is bigger than touch pad.\n      var scrollDelta = (wheelDelta > 0 ? 1 : -1) * (absDelta > 3 ? 0.4 : absDelta > 1 ? 0.15 : 0.05);\n      checkPointerAndTrigger(this, 'scrollMove', 'moveOnMouseWheel', e, {\n        scrollDelta: scrollDelta,\n        originX: originX,\n        originY: originY,\n        isAvailableBehavior: null\n      });\n    }\n  };\n  RoamController.prototype._pinchHandler = function (e) {\n    if (interactionMutex.isTaken(this._zr, 'globalPan')) {\n      return;\n    }\n    var scale = e.pinchScale > 1 ? 1.1 : 1 / 1.1;\n    checkPointerAndTrigger(this, 'zoom', null, e, {\n      scale: scale,\n      originX: e.pinchX,\n      originY: e.pinchY,\n      isAvailableBehavior: null\n    });\n  };\n  return RoamController;\n}(Eventful);\nfunction checkPointerAndTrigger(controller, eventName, behaviorToCheck, e, contollerEvent) {\n  if (controller.pointerChecker && controller.pointerChecker(e, contollerEvent.originX, contollerEvent.originY)) {\n    // When mouse is out of roamController rect,\n    // default befavoius should not be be disabled, otherwise\n    // page sliding is disabled, contrary to expectation.\n    eventTool.stop(e.event);\n    trigger(controller, eventName, behaviorToCheck, e, contollerEvent);\n  }\n}\nfunction trigger(controller, eventName, behaviorToCheck, e, contollerEvent) {\n  // Also provide behavior checker for event listener, for some case that\n  // multiple components share one listener.\n  contollerEvent.isAvailableBehavior = bind(isAvailableBehavior, null, behaviorToCheck, e);\n  // TODO should not have type issue.\n  controller.trigger(eventName, contollerEvent);\n}\n// settings: {\n//     zoomOnMouseWheel\n//     moveOnMouseMove\n//     moveOnMouseWheel\n// }\n// The value can be: true / false / 'shift' / 'ctrl' / 'alt'.\nfunction isAvailableBehavior(behaviorToCheck, e, settings) {\n  var setting = settings[behaviorToCheck];\n  return !behaviorToCheck || setting && (!isString(setting) || e.event[setting + 'Key']);\n}\nexport default RoamController;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n/**\r\n * Link lists and struct (graph or tree)\r\n */\nimport { curry, each, assert, extend, map, keys } from 'zrender/lib/core/util.js';\nimport { makeInner } from '../../util/model.js';\nvar inner = makeInner();\nfunction linkSeriesData(opt) {\n  var mainData = opt.mainData;\n  var datas = opt.datas;\n  if (!datas) {\n    datas = {\n      main: mainData\n    };\n    opt.datasAttr = {\n      main: 'data'\n    };\n  }\n  opt.datas = opt.mainData = null;\n  linkAll(mainData, datas, opt);\n  // Porxy data original methods.\n  each(datas, function (data) {\n    each(mainData.TRANSFERABLE_METHODS, function (methodName) {\n      data.wrapMethod(methodName, curry(transferInjection, opt));\n    });\n  });\n  // Beyond transfer, additional features should be added to `cloneShallow`.\n  mainData.wrapMethod('cloneShallow', curry(cloneShallowInjection, opt));\n  // Only mainData trigger change, because struct.update may trigger\n  // another changable methods, which may bring about dead lock.\n  each(mainData.CHANGABLE_METHODS, function (methodName) {\n    mainData.wrapMethod(methodName, curry(changeInjection, opt));\n  });\n  // Make sure datas contains mainData.\n  assert(datas[mainData.dataType] === mainData);\n}\nfunction transferInjection(opt, res) {\n  if (isMainData(this)) {\n    // Transfer datas to new main data.\n    var datas = extend({}, inner(this).datas);\n    datas[this.dataType] = res;\n    linkAll(res, datas, opt);\n  } else {\n    // Modify the reference in main data to point newData.\n    linkSingle(res, this.dataType, inner(this).mainData, opt);\n  }\n  return res;\n}\nfunction changeInjection(opt, res) {\n  opt.struct && opt.struct.update();\n  return res;\n}\nfunction cloneShallowInjection(opt, res) {\n  // cloneShallow, which brings about some fragilities, may be inappropriate\n  // to be exposed as an API. So for implementation simplicity we can make\n  // the restriction that cloneShallow of not-mainData should not be invoked\n  // outside, but only be invoked here.\n  each(inner(res).datas, function (data, dataType) {\n    data !== res && linkSingle(data.cloneShallow(), dataType, res, opt);\n  });\n  return res;\n}\n/**\r\n * Supplement method to List.\r\n *\r\n * @public\r\n * @param [dataType] If not specified, return mainData.\r\n */\nfunction getLinkedData(dataType) {\n  var mainData = inner(this).mainData;\n  return dataType == null || mainData == null ? mainData : inner(mainData).datas[dataType];\n}\n/**\r\n * Get list of all linked data\r\n */\nfunction getLinkedDataAll() {\n  var mainData = inner(this).mainData;\n  return mainData == null ? [{\n    data: mainData\n  }] : map(keys(inner(mainData).datas), function (type) {\n    return {\n      type: type,\n      data: inner(mainData).datas[type]\n    };\n  });\n}\nfunction isMainData(data) {\n  return inner(data).mainData === data;\n}\nfunction linkAll(mainData, datas, opt) {\n  inner(mainData).datas = {};\n  each(datas, function (data, dataType) {\n    linkSingle(data, dataType, mainData, opt);\n  });\n}\nfunction linkSingle(data, dataType, mainData, opt) {\n  inner(mainData).datas[dataType] = data;\n  inner(data).mainData = mainData;\n  data.dataType = dataType;\n  if (opt.struct) {\n    data[opt.structAttr] = opt.struct;\n    opt.struct[opt.datasAttr[dataType]] = data;\n  }\n  // Supplement method.\n  data.getLinkedData = getLinkedData;\n  data.getLinkedDataAll = getLinkedDataAll;\n}\nexport default linkSeriesData;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n/**\r\n * Tree data structure\r\n */\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport linkSeriesData from './helper/linkSeriesData.js';\nimport SeriesData from './SeriesData.js';\nimport prepareSeriesDataSchema from './helper/createDimensions.js';\nimport { convertOptionIdName } from '../util/model.js';\nvar TreeNode = /** @class */function () {\n  function TreeNode(name, hostTree) {\n    this.depth = 0;\n    this.height = 0;\n    /**\r\n     * Reference to list item.\r\n     * Do not persistent dataIndex outside,\r\n     * besause it may be changed by list.\r\n     * If dataIndex -1,\r\n     * this node is logical deleted (filtered) in list.\r\n     */\n    this.dataIndex = -1;\n    this.children = [];\n    this.viewChildren = [];\n    this.isExpand = false;\n    this.name = name || '';\n    this.hostTree = hostTree;\n  }\n  /**\r\n   * The node is removed.\r\n   */\n  TreeNode.prototype.isRemoved = function () {\n    return this.dataIndex < 0;\n  };\n  TreeNode.prototype.eachNode = function (options, cb, context) {\n    if (zrUtil.isFunction(options)) {\n      context = cb;\n      cb = options;\n      options = null;\n    }\n    options = options || {};\n    if (zrUtil.isString(options)) {\n      options = {\n        order: options\n      };\n    }\n    var order = options.order || 'preorder';\n    var children = this[options.attr || 'children'];\n    var suppressVisitSub;\n    order === 'preorder' && (suppressVisitSub = cb.call(context, this));\n    for (var i = 0; !suppressVisitSub && i < children.length; i++) {\n      children[i].eachNode(options, cb, context);\n    }\n    order === 'postorder' && cb.call(context, this);\n  };\n  /**\r\n   * Update depth and height of this subtree.\r\n   */\n  TreeNode.prototype.updateDepthAndHeight = function (depth) {\n    var height = 0;\n    this.depth = depth;\n    for (var i = 0; i < this.children.length; i++) {\n      var child = this.children[i];\n      child.updateDepthAndHeight(depth + 1);\n      if (child.height > height) {\n        height = child.height;\n      }\n    }\n    this.height = height + 1;\n  };\n  TreeNode.prototype.getNodeById = function (id) {\n    if (this.getId() === id) {\n      return this;\n    }\n    for (var i = 0, children = this.children, len = children.length; i < len; i++) {\n      var res = children[i].getNodeById(id);\n      if (res) {\n        return res;\n      }\n    }\n  };\n  TreeNode.prototype.contains = function (node) {\n    if (node === this) {\n      return true;\n    }\n    for (var i = 0, children = this.children, len = children.length; i < len; i++) {\n      var res = children[i].contains(node);\n      if (res) {\n        return res;\n      }\n    }\n  };\n  /**\r\n   * @param includeSelf Default false.\r\n   * @return order: [root, child, grandchild, ...]\r\n   */\n  TreeNode.prototype.getAncestors = function (includeSelf) {\n    var ancestors = [];\n    var node = includeSelf ? this : this.parentNode;\n    while (node) {\n      ancestors.push(node);\n      node = node.parentNode;\n    }\n    ancestors.reverse();\n    return ancestors;\n  };\n  TreeNode.prototype.getAncestorsIndices = function () {\n    var indices = [];\n    var currNode = this;\n    while (currNode) {\n      indices.push(currNode.dataIndex);\n      currNode = currNode.parentNode;\n    }\n    indices.reverse();\n    return indices;\n  };\n  TreeNode.prototype.getDescendantIndices = function () {\n    var indices = [];\n    this.eachNode(function (childNode) {\n      indices.push(childNode.dataIndex);\n    });\n    return indices;\n  };\n  TreeNode.prototype.getValue = function (dimension) {\n    var data = this.hostTree.data;\n    return data.getStore().get(data.getDimensionIndex(dimension || 'value'), this.dataIndex);\n  };\n  TreeNode.prototype.setLayout = function (layout, merge) {\n    this.dataIndex >= 0 && this.hostTree.data.setItemLayout(this.dataIndex, layout, merge);\n  };\n  /**\r\n   * @return {Object} layout\r\n   */\n  TreeNode.prototype.getLayout = function () {\n    return this.hostTree.data.getItemLayout(this.dataIndex);\n  };\n  // @depcrecated\n  // getModel<T = unknown, S extends keyof T = keyof T>(path: S): Model<T[S]>\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  TreeNode.prototype.getModel = function (path) {\n    if (this.dataIndex < 0) {\n      return;\n    }\n    var hostTree = this.hostTree;\n    var itemModel = hostTree.data.getItemModel(this.dataIndex);\n    return itemModel.getModel(path);\n  };\n  // TODO: TYPE More specific model\n  TreeNode.prototype.getLevelModel = function () {\n    return (this.hostTree.levelModels || [])[this.depth];\n  };\n  TreeNode.prototype.setVisual = function (key, value) {\n    this.dataIndex >= 0 && this.hostTree.data.setItemVisual(this.dataIndex, key, value);\n  };\n  /**\r\n   * Get item visual\r\n   * FIXME: make return type better\r\n   */\n  TreeNode.prototype.getVisual = function (key) {\n    return this.hostTree.data.getItemVisual(this.dataIndex, key);\n  };\n  TreeNode.prototype.getRawIndex = function () {\n    return this.hostTree.data.getRawIndex(this.dataIndex);\n  };\n  TreeNode.prototype.getId = function () {\n    return this.hostTree.data.getId(this.dataIndex);\n  };\n  /**\r\n   * index in parent's children\r\n   */\n  TreeNode.prototype.getChildIndex = function () {\n    if (this.parentNode) {\n      var children = this.parentNode.children;\n      for (var i = 0; i < children.length; ++i) {\n        if (children[i] === this) {\n          return i;\n        }\n      }\n      return -1;\n    }\n    return -1;\n  };\n  /**\r\n   * if this is an ancestor of another node\r\n   *\r\n   * @param node another node\r\n   * @return if is ancestor\r\n   */\n  TreeNode.prototype.isAncestorOf = function (node) {\n    var parent = node.parentNode;\n    while (parent) {\n      if (parent === this) {\n        return true;\n      }\n      parent = parent.parentNode;\n    }\n    return false;\n  };\n  /**\r\n   * if this is an descendant of another node\r\n   *\r\n   * @param node another node\r\n   * @return if is descendant\r\n   */\n  TreeNode.prototype.isDescendantOf = function (node) {\n    return node !== this && node.isAncestorOf(this);\n  };\n  return TreeNode;\n}();\nexport { TreeNode };\n;\nvar Tree = /** @class */function () {\n  function Tree(hostModel) {\n    this.type = 'tree';\n    this._nodes = [];\n    this.hostModel = hostModel;\n  }\n  Tree.prototype.eachNode = function (options, cb, context) {\n    this.root.eachNode(options, cb, context);\n  };\n  Tree.prototype.getNodeByDataIndex = function (dataIndex) {\n    var rawIndex = this.data.getRawIndex(dataIndex);\n    return this._nodes[rawIndex];\n  };\n  Tree.prototype.getNodeById = function (name) {\n    return this.root.getNodeById(name);\n  };\n  /**\r\n   * Update item available by list,\r\n   * when list has been performed options like 'filterSelf' or 'map'.\r\n   */\n  Tree.prototype.update = function () {\n    var data = this.data;\n    var nodes = this._nodes;\n    for (var i = 0, len = nodes.length; i < len; i++) {\n      nodes[i].dataIndex = -1;\n    }\n    for (var i = 0, len = data.count(); i < len; i++) {\n      nodes[data.getRawIndex(i)].dataIndex = i;\n    }\n  };\n  /**\r\n   * Clear all layouts\r\n   */\n  Tree.prototype.clearLayouts = function () {\n    this.data.clearItemLayouts();\n  };\n  /**\r\n   * data node format:\r\n   * {\r\n   *     name: ...\r\n   *     value: ...\r\n   *     children: [\r\n   *         {\r\n   *             name: ...\r\n   *             value: ...\r\n   *             children: ...\r\n   *         },\r\n   *         ...\r\n   *     ]\r\n   * }\r\n   */\n  Tree.createTree = function (dataRoot, hostModel, beforeLink) {\n    var tree = new Tree(hostModel);\n    var listData = [];\n    var dimMax = 1;\n    buildHierarchy(dataRoot);\n    function buildHierarchy(dataNode, parentNode) {\n      var value = dataNode.value;\n      dimMax = Math.max(dimMax, zrUtil.isArray(value) ? value.length : 1);\n      listData.push(dataNode);\n      var node = new TreeNode(convertOptionIdName(dataNode.name, ''), tree);\n      parentNode ? addChild(node, parentNode) : tree.root = node;\n      tree._nodes.push(node);\n      var children = dataNode.children;\n      if (children) {\n        for (var i = 0; i < children.length; i++) {\n          buildHierarchy(children[i], node);\n        }\n      }\n    }\n    tree.root.updateDepthAndHeight(0);\n    var dimensions = prepareSeriesDataSchema(listData, {\n      coordDimensions: ['value'],\n      dimensionsCount: dimMax\n    }).dimensions;\n    var list = new SeriesData(dimensions, hostModel);\n    list.initData(listData);\n    beforeLink && beforeLink(list);\n    linkSeriesData({\n      mainData: list,\n      struct: tree,\n      structAttr: 'tree'\n    });\n    tree.update();\n    return tree;\n  };\n  return Tree;\n}();\n/**\r\n * It is needed to consider the mess of 'list', 'hostModel' when creating a TreeNote,\r\n * so this function is not ready and not necessary to be public.\r\n */\nfunction addChild(child, node) {\n  var children = node.children;\n  if (child.parentNode === node) {\n    return;\n  }\n  children.push(child);\n  child.parentNode = node;\n}\nexport default Tree;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport function retrieveTargetInfo(payload, validPayloadTypes, seriesModel) {\n  if (payload && zrUtil.indexOf(validPayloadTypes, payload.type) >= 0) {\n    var root = seriesModel.getData().tree.root;\n    var targetNode = payload.targetNode;\n    if (zrUtil.isString(targetNode)) {\n      targetNode = root.getNodeById(targetNode);\n    }\n    if (targetNode && root.contains(targetNode)) {\n      return {\n        node: targetNode\n      };\n    }\n    var targetNodeId = payload.targetNodeId;\n    if (targetNodeId != null && (targetNode = root.getNodeById(targetNodeId))) {\n      return {\n        node: targetNode\n      };\n    }\n  }\n}\n// Not includes the given node at the last item.\nexport function getPathToRoot(node) {\n  var path = [];\n  while (node) {\n    node = node.parentNode;\n    node && path.push(node);\n  }\n  return path.reverse();\n}\nexport function aboveViewRoot(viewRoot, node) {\n  var viewPath = getPathToRoot(viewRoot);\n  return zrUtil.indexOf(viewPath, node) >= 0;\n}\n// From root to the input node (the input node will be included).\nexport function wrapTreePathInfo(node, seriesModel) {\n  var treePathInfo = [];\n  while (node) {\n    var nodeDataIndex = node.dataIndex;\n    treePathInfo.push({\n      name: node.name,\n      dataIndex: nodeDataIndex,\n      value: seriesModel.getRawValue(nodeDataIndex)\n    });\n    node = node.parentNode;\n  }\n  treePathInfo.reverse();\n  return treePathInfo;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as helper from '../helper/treeHelper.js';\nimport { noop } from 'zrender/lib/core/util.js';\nvar actionTypes = ['treemapZoomToNode', 'treemapRender', 'treemapMove'];\nexport function installTreemapAction(registers) {\n  for (var i = 0; i < actionTypes.length; i++) {\n    registers.registerAction({\n      type: actionTypes[i],\n      update: 'updateView'\n    }, noop);\n  }\n  registers.registerAction({\n    type: 'treemapRootToNode',\n    update: 'updateView'\n  }, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'treemap',\n      query: payload\n    }, handleRootToNode);\n    function handleRootToNode(model, index) {\n      var types = ['treemapZoomToNode', 'treemapRootToNode'];\n      var targetInfo = helper.retrieveTargetInfo(payload, types, model);\n      if (targetInfo) {\n        var originViewRoot = model.getViewRoot();\n        if (originViewRoot) {\n          payload.direction = helper.aboveViewRoot(originViewRoot, targetInfo.node) ? 'rollUp' : 'drillDown';\n        }\n        model.resetViewRoot(targetInfo.node);\n      }\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { getDecalFromPalette } from '../../model/mixin/palette.js';\nexport default function enableAriaDecalForTree(seriesModel) {\n  var data = seriesModel.getData();\n  var tree = data.tree;\n  var decalPaletteScope = {};\n  tree.eachNode(function (node) {\n    // Use decal of level 1 node\n    var current = node;\n    while (current && current.depth > 1) {\n      current = current.parentNode;\n    }\n    var decal = getDecalFromPalette(seriesModel.ecModel, current.name || current.dataIndex + '', decalPaletteScope);\n    node.setVisual('decal', decal);\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport SeriesModel from '../../model/Series.js';\nimport Tree from '../../data/Tree.js';\nimport Model from '../../model/Model.js';\nimport { wrapTreePathInfo } from '../helper/treeHelper.js';\nimport { normalizeToArray } from '../../util/model.js';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup.js';\nimport enableAriaDecalForTree from '../helper/enableAriaDecalForTree.js';\nvar TreemapSeriesModel = /** @class */function (_super) {\n  __extends(TreemapSeriesModel, _super);\n  function TreemapSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TreemapSeriesModel.type;\n    _this.preventUsingHoverLayer = true;\n    return _this;\n  }\n  /**\r\n   * @override\r\n   */\n  TreemapSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    // Create a virtual root.\n    var root = {\n      name: option.name,\n      children: option.data\n    };\n    completeTreeValue(root);\n    var levels = option.levels || [];\n    // Used in \"visual priority\" in `treemapVisual.js`.\n    // This way is a little tricky, must satisfy the precondition:\n    //   1. There is no `treeNode.getModel('itemStyle.xxx')` used.\n    //   2. The `Model.prototype.getModel()` will not use any clone-like way.\n    var designatedVisualItemStyle = this.designatedVisualItemStyle = {};\n    var designatedVisualModel = new Model({\n      itemStyle: designatedVisualItemStyle\n    }, this, ecModel);\n    levels = option.levels = setDefault(levels, ecModel);\n    var levelModels = zrUtil.map(levels || [], function (levelDefine) {\n      return new Model(levelDefine, designatedVisualModel, ecModel);\n    }, this);\n    // Make sure always a new tree is created when setOption,\n    // in TreemapView, we check whether oldTree === newTree\n    // to choose mappings approach among old shapes and new shapes.\n    var tree = Tree.createTree(root, this, beforeLink);\n    function beforeLink(nodeData) {\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\n        var node = tree.getNodeByDataIndex(idx);\n        var levelModel = node ? levelModels[node.depth] : null;\n        // If no levelModel, we also need `designatedVisualModel`.\n        model.parentModel = levelModel || designatedVisualModel;\n        return model;\n      });\n    }\n    return tree.data;\n  };\n  TreemapSeriesModel.prototype.optionUpdated = function () {\n    this.resetViewRoot();\n  };\n  /**\r\n   * @override\r\n   * @param {number} dataIndex\r\n   * @param {boolean} [mutipleSeries=false]\r\n   */\n  TreemapSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var value = this.getRawValue(dataIndex);\n    var name = data.getName(dataIndex);\n    return createTooltipMarkup('nameValue', {\n      name: name,\n      value: value\n    });\n  };\n  /**\r\n   * Add tree path to tooltip param\r\n   *\r\n   * @override\r\n   * @param {number} dataIndex\r\n   * @return {Object}\r\n   */\n  TreemapSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var params = _super.prototype.getDataParams.apply(this, arguments);\n    var node = this.getData().tree.getNodeByDataIndex(dataIndex);\n    params.treeAncestors = wrapTreePathInfo(node, this);\n    // compatitable the previous code.\n    params.treePathInfo = params.treeAncestors;\n    return params;\n  };\n  /**\r\n   * @public\r\n   * @param {Object} layoutInfo {\r\n   *                                x: containerGroup x\r\n   *                                y: containerGroup y\r\n   *                                width: containerGroup width\r\n   *                                height: containerGroup height\r\n   *                            }\r\n   */\n  TreemapSeriesModel.prototype.setLayoutInfo = function (layoutInfo) {\n    /**\r\n     * @readOnly\r\n     * @type {Object}\r\n     */\n    this.layoutInfo = this.layoutInfo || {};\n    zrUtil.extend(this.layoutInfo, layoutInfo);\n  };\n  /**\r\n   * @param  {string} id\r\n   * @return {number} index\r\n   */\n  TreemapSeriesModel.prototype.mapIdToIndex = function (id) {\n    // A feature is implemented:\n    // index is monotone increasing with the sequence of\n    // input id at the first time.\n    // This feature can make sure that each data item and its\n    // mapped color have the same index between data list and\n    // color list at the beginning, which is useful for user\n    // to adjust data-color mapping.\n    /**\r\n     * @private\r\n     * @type {Object}\r\n     */\n    var idIndexMap = this._idIndexMap;\n    if (!idIndexMap) {\n      idIndexMap = this._idIndexMap = zrUtil.createHashMap();\n      /**\r\n       * @private\r\n       * @type {number}\r\n       */\n      this._idIndexMapCount = 0;\n    }\n    var index = idIndexMap.get(id);\n    if (index == null) {\n      idIndexMap.set(id, index = this._idIndexMapCount++);\n    }\n    return index;\n  };\n  TreemapSeriesModel.prototype.getViewRoot = function () {\n    return this._viewRoot;\n  };\n  TreemapSeriesModel.prototype.resetViewRoot = function (viewRoot) {\n    viewRoot ? this._viewRoot = viewRoot : viewRoot = this._viewRoot;\n    var root = this.getRawData().tree.root;\n    if (!viewRoot || viewRoot !== root && !root.contains(viewRoot)) {\n      this._viewRoot = root;\n    }\n  };\n  TreemapSeriesModel.prototype.enableAriaDecal = function () {\n    enableAriaDecalForTree(this);\n  };\n  TreemapSeriesModel.type = 'series.treemap';\n  TreemapSeriesModel.layoutMode = 'box';\n  TreemapSeriesModel.defaultOption = {\n    // Disable progressive rendering\n    progressive: 0,\n    // size: ['80%', '80%'],            // deprecated, compatible with ec2.\n    left: 'center',\n    top: 'middle',\n    width: '80%',\n    height: '80%',\n    sort: true,\n    clipWindow: 'origin',\n    squareRatio: 0.5 * (1 + Math.sqrt(5)),\n    leafDepth: null,\n    drillDownIcon: '',\n    // to align specialized icon. \n    zoomToNodeRatio: 0.32 * 0.32,\n    scaleLimit: null,\n    roam: true,\n    nodeClick: 'zoomToNode',\n    animation: true,\n    animationDurationUpdate: 900,\n    animationEasing: 'quinticInOut',\n    breadcrumb: {\n      show: true,\n      height: 22,\n      left: 'center',\n      top: 'bottom',\n      // right\n      // bottom\n      emptyItemWidth: 25,\n      itemStyle: {\n        color: 'rgba(0,0,0,0.7)',\n        textStyle: {\n          color: '#fff'\n        }\n      },\n      emphasis: {\n        itemStyle: {\n          color: 'rgba(0,0,0,0.9)' // '#5793f3',\n        }\n      }\n    },\n    label: {\n      show: true,\n      // Do not use textDistance, for ellipsis rect just the same as treemap node rect.\n      distance: 0,\n      padding: 5,\n      position: 'inside',\n      // formatter: null,\n      color: '#fff',\n      overflow: 'truncate'\n      // align\n      // verticalAlign\n    },\n    upperLabel: {\n      show: false,\n      position: [0, '50%'],\n      height: 20,\n      // formatter: null,\n      // color: '#fff',\n      overflow: 'truncate',\n      // align: null,\n      verticalAlign: 'middle'\n    },\n    itemStyle: {\n      color: null,\n      colorAlpha: null,\n      colorSaturation: null,\n      borderWidth: 0,\n      gapWidth: 0,\n      borderColor: '#fff',\n      borderColorSaturation: null // If specified, borderColor will be ineffective, and the\n      // border color is evaluated by color of current node and\n      // borderColorSaturation.\n    },\n    emphasis: {\n      upperLabel: {\n        show: true,\n        position: [0, '50%'],\n        overflow: 'truncate',\n        verticalAlign: 'middle'\n      }\n    },\n    visualDimension: 0,\n    visualMin: null,\n    visualMax: null,\n    color: [],\n    // level[n].color (if necessary).\n    // + Specify color list of each level. level[0].color would be global\n    // color list if not specified. (see method `setDefault`).\n    // + But set as a empty array to forbid fetch color from global palette\n    // when using nodeModel.get('color'), otherwise nodes on deep level\n    // will always has color palette set and are not able to inherit color\n    // from parent node.\n    // + TreemapSeries.color can not be set as 'none', otherwise effect\n    // legend color fetching (see seriesColor.js).\n    colorAlpha: null,\n    colorSaturation: null,\n    colorMappingBy: 'index',\n    visibleMin: 10,\n    // be rendered. Only works when sort is 'asc' or 'desc'.\n    childrenVisibleMin: null,\n    // grandchildren will not show.\n    // Why grandchildren? If not grandchildren but children,\n    // some siblings show children and some not,\n    // the appearance may be mess and not consistent,\n    levels: [] // Each item: {\n    //     visibleMin, itemStyle, visualDimension, label\n    // }\n  };\n  return TreemapSeriesModel;\n}(SeriesModel);\n/**\r\n * @param {Object} dataNode\r\n */\nfunction completeTreeValue(dataNode) {\n  // Postorder travel tree.\n  // If value of none-leaf node is not set,\n  // calculate it by suming up the value of all children.\n  var sum = 0;\n  zrUtil.each(dataNode.children, function (child) {\n    completeTreeValue(child);\n    var childValue = child.value;\n    zrUtil.isArray(childValue) && (childValue = childValue[0]);\n    sum += childValue;\n  });\n  var thisValue = dataNode.value;\n  if (zrUtil.isArray(thisValue)) {\n    thisValue = thisValue[0];\n  }\n  if (thisValue == null || isNaN(thisValue)) {\n    thisValue = sum;\n  }\n  // Value should not less than 0.\n  if (thisValue < 0) {\n    thisValue = 0;\n  }\n  zrUtil.isArray(dataNode.value) ? dataNode.value[0] = thisValue : dataNode.value = thisValue;\n}\n/**\r\n * set default to level configuration\r\n */\nfunction setDefault(levels, ecModel) {\n  var globalColorList = normalizeToArray(ecModel.get('color'));\n  var globalDecalList = normalizeToArray(ecModel.get(['aria', 'decal', 'decals']));\n  if (!globalColorList) {\n    return;\n  }\n  levels = levels || [];\n  var hasColorDefine;\n  var hasDecalDefine;\n  zrUtil.each(levels, function (levelDefine) {\n    var model = new Model(levelDefine);\n    var modelColor = model.get('color');\n    var modelDecal = model.get('decal');\n    if (model.get(['itemStyle', 'color']) || modelColor && modelColor !== 'none') {\n      hasColorDefine = true;\n    }\n    if (model.get(['itemStyle', 'decal']) || modelDecal && modelDecal !== 'none') {\n      hasDecalDefine = true;\n    }\n  });\n  var level0 = levels[0] || (levels[0] = {});\n  if (!hasColorDefine) {\n    level0.color = globalColorList.slice();\n  }\n  if (!hasDecalDefine && globalDecalList) {\n    level0.decal = globalDecalList.slice();\n  }\n  return levels;\n}\nexport default TreemapSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport * as layout from '../../util/layout.js';\nimport { wrapTreePathInfo } from '../helper/treeHelper.js';\nimport { curry, defaults } from 'zrender/lib/core/util.js';\nimport { convertOptionIdName } from '../../util/model.js';\nimport { toggleHoverEmphasis, Z2_EMPHASIS_LIFT } from '../../util/states.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nvar TEXT_PADDING = 8;\nvar ITEM_GAP = 8;\nvar ARRAY_LENGTH = 5;\nvar Breadcrumb = /** @class */function () {\n  function Breadcrumb(containerGroup) {\n    this.group = new graphic.Group();\n    containerGroup.add(this.group);\n  }\n  Breadcrumb.prototype.render = function (seriesModel, api, targetNode, onSelect) {\n    var model = seriesModel.getModel('breadcrumb');\n    var thisGroup = this.group;\n    thisGroup.removeAll();\n    if (!model.get('show') || !targetNode) {\n      return;\n    }\n    var normalStyleModel = model.getModel('itemStyle');\n    var emphasisModel = model.getModel('emphasis');\n    var textStyleModel = normalStyleModel.getModel('textStyle');\n    var emphasisTextStyleModel = emphasisModel.getModel(['itemStyle', 'textStyle']);\n    var layoutParam = {\n      pos: {\n        left: model.get('left'),\n        right: model.get('right'),\n        top: model.get('top'),\n        bottom: model.get('bottom')\n      },\n      box: {\n        width: api.getWidth(),\n        height: api.getHeight()\n      },\n      emptyItemWidth: model.get('emptyItemWidth'),\n      totalWidth: 0,\n      renderList: []\n    };\n    this._prepare(targetNode, layoutParam, textStyleModel);\n    this._renderContent(seriesModel, layoutParam, normalStyleModel, emphasisModel, textStyleModel, emphasisTextStyleModel, onSelect);\n    layout.positionElement(thisGroup, layoutParam.pos, layoutParam.box);\n  };\n  /**\r\n   * Prepare render list and total width\r\n   * @private\r\n   */\n  Breadcrumb.prototype._prepare = function (targetNode, layoutParam, textStyleModel) {\n    for (var node = targetNode; node; node = node.parentNode) {\n      var text = convertOptionIdName(node.getModel().get('name'), '');\n      var textRect = textStyleModel.getTextRect(text);\n      var itemWidth = Math.max(textRect.width + TEXT_PADDING * 2, layoutParam.emptyItemWidth);\n      layoutParam.totalWidth += itemWidth + ITEM_GAP;\n      layoutParam.renderList.push({\n        node: node,\n        text: text,\n        width: itemWidth\n      });\n    }\n  };\n  /**\r\n   * @private\r\n   */\n  Breadcrumb.prototype._renderContent = function (seriesModel, layoutParam, normalStyleModel, emphasisModel, textStyleModel, emphasisTextStyleModel, onSelect) {\n    // Start rendering.\n    var lastX = 0;\n    var emptyItemWidth = layoutParam.emptyItemWidth;\n    var height = seriesModel.get(['breadcrumb', 'height']);\n    var availableSize = layout.getAvailableSize(layoutParam.pos, layoutParam.box);\n    var totalWidth = layoutParam.totalWidth;\n    var renderList = layoutParam.renderList;\n    var emphasisItemStyle = emphasisModel.getModel('itemStyle').getItemStyle();\n    for (var i = renderList.length - 1; i >= 0; i--) {\n      var item = renderList[i];\n      var itemNode = item.node;\n      var itemWidth = item.width;\n      var text = item.text;\n      // Hdie text and shorten width if necessary.\n      if (totalWidth > availableSize.width) {\n        totalWidth -= itemWidth - emptyItemWidth;\n        itemWidth = emptyItemWidth;\n        text = null;\n      }\n      var el = new graphic.Polygon({\n        shape: {\n          points: makeItemPoints(lastX, 0, itemWidth, height, i === renderList.length - 1, i === 0)\n        },\n        style: defaults(normalStyleModel.getItemStyle(), {\n          lineJoin: 'bevel'\n        }),\n        textContent: new graphic.Text({\n          style: createTextStyle(textStyleModel, {\n            text: text\n          })\n        }),\n        textConfig: {\n          position: 'inside'\n        },\n        z2: Z2_EMPHASIS_LIFT * 1e4,\n        onclick: curry(onSelect, itemNode)\n      });\n      el.disableLabelAnimation = true;\n      el.getTextContent().ensureState('emphasis').style = createTextStyle(emphasisTextStyleModel, {\n        text: text\n      });\n      el.ensureState('emphasis').style = emphasisItemStyle;\n      toggleHoverEmphasis(el, emphasisModel.get('focus'), emphasisModel.get('blurScope'), emphasisModel.get('disabled'));\n      this.group.add(el);\n      packEventData(el, seriesModel, itemNode);\n      lastX += itemWidth + ITEM_GAP;\n    }\n  };\n  Breadcrumb.prototype.remove = function () {\n    this.group.removeAll();\n  };\n  return Breadcrumb;\n}();\nfunction makeItemPoints(x, y, itemWidth, itemHeight, head, tail) {\n  var points = [[head ? x : x - ARRAY_LENGTH, y], [x + itemWidth, y], [x + itemWidth, y + itemHeight], [head ? x : x - ARRAY_LENGTH, y + itemHeight]];\n  !tail && points.splice(2, 0, [x + itemWidth + ARRAY_LENGTH, y + itemHeight / 2]);\n  !head && points.push([x, y + itemHeight / 2]);\n  return points;\n}\n// Package custom mouse event.\nfunction packEventData(el, seriesModel, itemNode) {\n  getECData(el).eventData = {\n    componentType: 'series',\n    componentSubType: 'treemap',\n    componentIndex: seriesModel.componentIndex,\n    seriesIndex: seriesModel.seriesIndex,\n    seriesName: seriesModel.name,\n    seriesType: 'treemap',\n    selfType: 'breadcrumb',\n    nodeData: {\n      dataIndex: itemNode && itemNode.dataIndex,\n      name: itemNode && itemNode.name\n    },\n    treePathInfo: itemNode && wrapTreePathInfo(itemNode, seriesModel)\n  };\n}\nexport default Breadcrumb;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n/**\r\n * Animate multiple elements with a single done-callback.\r\n *\r\n * @example\r\n *  animation\r\n *      .createWrap()\r\n *      .add(el1, {x: 10, y: 10})\r\n *      .add(el2, {shape: {width: 500}, style: {fill: 'red'}}, 400)\r\n *      .done(function () { // done })\r\n *      .start('cubicOut');\r\n */\nvar AnimationWrap = /** @class */function () {\n  function AnimationWrap() {\n    this._storage = [];\n    this._elExistsMap = {};\n  }\n  /**\r\n   * Caution: a el can only be added once, otherwise 'done'\r\n   * might not be called. This method checks this (by el.id),\r\n   * suppresses adding and returns false when existing el found.\r\n   *\r\n   * @return Whether adding succeeded.\r\n   */\n  AnimationWrap.prototype.add = function (el, target, duration, delay, easing) {\n    if (this._elExistsMap[el.id]) {\n      return false;\n    }\n    this._elExistsMap[el.id] = true;\n    this._storage.push({\n      el: el,\n      target: target,\n      duration: duration,\n      delay: delay,\n      easing: easing\n    });\n    return true;\n  };\n  /**\r\n   * Only execute when animation done/aborted.\r\n   */\n  AnimationWrap.prototype.finished = function (callback) {\n    this._finishedCallback = callback;\n    return this;\n  };\n  /**\r\n   * Will stop exist animation firstly.\r\n   */\n  AnimationWrap.prototype.start = function () {\n    var _this = this;\n    var count = this._storage.length;\n    var checkTerminate = function () {\n      count--;\n      if (count <= 0) {\n        // Guard.\n        _this._storage.length = 0;\n        _this._elExistsMap = {};\n        _this._finishedCallback && _this._finishedCallback();\n      }\n    };\n    for (var i = 0, len = this._storage.length; i < len; i++) {\n      var item = this._storage[i];\n      item.el.animateTo(item.target, {\n        duration: item.duration,\n        delay: item.delay,\n        easing: item.easing,\n        setToFinal: true,\n        done: checkTerminate,\n        aborted: checkTerminate\n      });\n    }\n    return this;\n  };\n  return AnimationWrap;\n}();\nexport function createWrap() {\n  return new AnimationWrap();\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport { bind, each, indexOf, curry, extend, normalizeCssArray, isFunction } from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { isHighDownDispatcher, setAsHighDownDispatcher, setDefaultStateProxy, enableHoverFocus, Z2_EMPHASIS_LIFT } from '../../util/states.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nimport * as helper from '../helper/treeHelper.js';\nimport Breadcrumb from './Breadcrumb.js';\nimport RoamController from '../../component/helper/RoamController.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport * as animationUtil from '../../util/animation.js';\nimport makeStyleMapper from '../../model/mixin/makeStyleMapper.js';\nimport ChartView from '../../view/Chart.js';\nimport Displayable from 'zrender/lib/graphic/Displayable.js';\nimport { makeInner, convertOptionIdName } from '../../util/model.js';\nimport { windowOpen } from '../../util/format.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nvar Group = graphic.Group;\nvar Rect = graphic.Rect;\nvar DRAG_THRESHOLD = 3;\nvar PATH_LABEL_NOAMAL = 'label';\nvar PATH_UPPERLABEL_NORMAL = 'upperLabel';\n// Should larger than emphasis states lift z\nvar Z2_BASE = Z2_EMPHASIS_LIFT * 10; // Should bigger than every z2.\nvar Z2_BG = Z2_EMPHASIS_LIFT * 2;\nvar Z2_CONTENT = Z2_EMPHASIS_LIFT * 3;\nvar getStateItemStyle = makeStyleMapper([['fill', 'color'],\n// `borderColor` and `borderWidth` has been occupied,\n// so use `stroke` to indicate the stroke of the rect.\n['stroke', 'strokeColor'], ['lineWidth', 'strokeWidth'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor']\n// Option decal is in `DecalObject` but style.decal is in `PatternObject`.\n// So do not transfer decal directly.\n]);\nvar getItemStyleNormal = function (model) {\n  // Normal style props should include emphasis style props.\n  var itemStyle = getStateItemStyle(model);\n  // Clear styles set by emphasis.\n  itemStyle.stroke = itemStyle.fill = itemStyle.lineWidth = null;\n  return itemStyle;\n};\nvar inner = makeInner();\nvar TreemapView = /** @class */function (_super) {\n  __extends(TreemapView, _super);\n  function TreemapView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TreemapView.type;\n    _this._state = 'ready';\n    _this._storage = createStorage();\n    return _this;\n  }\n  /**\r\n   * @override\r\n   */\n  TreemapView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    var models = ecModel.findComponents({\n      mainType: 'series',\n      subType: 'treemap',\n      query: payload\n    });\n    if (indexOf(models, seriesModel) < 0) {\n      return;\n    }\n    this.seriesModel = seriesModel;\n    this.api = api;\n    this.ecModel = ecModel;\n    var types = ['treemapZoomToNode', 'treemapRootToNode'];\n    var targetInfo = helper.retrieveTargetInfo(payload, types, seriesModel);\n    var payloadType = payload && payload.type;\n    var layoutInfo = seriesModel.layoutInfo;\n    var isInit = !this._oldTree;\n    var thisStorage = this._storage;\n    // Mark new root when action is treemapRootToNode.\n    var reRoot = payloadType === 'treemapRootToNode' && targetInfo && thisStorage ? {\n      rootNodeGroup: thisStorage.nodeGroup[targetInfo.node.getRawIndex()],\n      direction: payload.direction\n    } : null;\n    var containerGroup = this._giveContainerGroup(layoutInfo);\n    var hasAnimation = seriesModel.get('animation');\n    var renderResult = this._doRender(containerGroup, seriesModel, reRoot);\n    hasAnimation && !isInit && (!payloadType || payloadType === 'treemapZoomToNode' || payloadType === 'treemapRootToNode') ? this._doAnimation(containerGroup, renderResult, seriesModel, reRoot) : renderResult.renderFinally();\n    this._resetController(api);\n    this._renderBreadcrumb(seriesModel, api, targetInfo);\n  };\n  TreemapView.prototype._giveContainerGroup = function (layoutInfo) {\n    var containerGroup = this._containerGroup;\n    if (!containerGroup) {\n      // FIXME\n      // containerGroupclipclip\n      containerGroup = this._containerGroup = new Group();\n      this._initEvents(containerGroup);\n      this.group.add(containerGroup);\n    }\n    containerGroup.x = layoutInfo.x;\n    containerGroup.y = layoutInfo.y;\n    return containerGroup;\n  };\n  TreemapView.prototype._doRender = function (containerGroup, seriesModel, reRoot) {\n    var thisTree = seriesModel.getData().tree;\n    var oldTree = this._oldTree;\n    // Clear last shape records.\n    var lastsForAnimation = createStorage();\n    var thisStorage = createStorage();\n    var oldStorage = this._storage;\n    var willInvisibleEls = [];\n    function doRenderNode(thisNode, oldNode, parentGroup, depth) {\n      return renderNode(seriesModel, thisStorage, oldStorage, reRoot, lastsForAnimation, willInvisibleEls, thisNode, oldNode, parentGroup, depth);\n    }\n    // Notice: When thisTree and oldTree are the same tree (see list.cloneShallow),\n    // the oldTree is actually losted, so we cannot find all of the old graphic\n    // elements from tree. So we use this strategy: make element storage, move\n    // from old storage to new storage, clear old storage.\n    dualTravel(thisTree.root ? [thisTree.root] : [], oldTree && oldTree.root ? [oldTree.root] : [], containerGroup, thisTree === oldTree || !oldTree, 0);\n    // Process all removing.\n    var willDeleteEls = clearStorage(oldStorage);\n    this._oldTree = thisTree;\n    this._storage = thisStorage;\n    if (this._controllerHost) {\n      var _oldRootLayout = this.seriesModel.layoutInfo;\n      var rootLayout = thisTree.root.getLayout();\n      if (rootLayout.width === _oldRootLayout.width && rootLayout.height === _oldRootLayout.height) {\n        this._controllerHost.zoom = 1;\n      }\n    }\n    return {\n      lastsForAnimation: lastsForAnimation,\n      willDeleteEls: willDeleteEls,\n      renderFinally: renderFinally\n    };\n    function dualTravel(thisViewChildren, oldViewChildren, parentGroup, sameTree, depth) {\n      // When 'render' is triggered by action,\n      // 'this' and 'old' may be the same tree,\n      // we use rawIndex in that case.\n      if (sameTree) {\n        oldViewChildren = thisViewChildren;\n        each(thisViewChildren, function (child, index) {\n          !child.isRemoved() && processNode(index, index);\n        });\n      }\n      // Diff hierarchically (diff only in each subtree, but not whole).\n      // because, consistency of view is important.\n      else {\n        new DataDiffer(oldViewChildren, thisViewChildren, getKey, getKey).add(processNode).update(processNode).remove(curry(processNode, null)).execute();\n      }\n      function getKey(node) {\n        // Identify by name or raw index.\n        return node.getId();\n      }\n      function processNode(newIndex, oldIndex) {\n        var thisNode = newIndex != null ? thisViewChildren[newIndex] : null;\n        var oldNode = oldIndex != null ? oldViewChildren[oldIndex] : null;\n        var group = doRenderNode(thisNode, oldNode, parentGroup, depth);\n        group && dualTravel(thisNode && thisNode.viewChildren || [], oldNode && oldNode.viewChildren || [], group, sameTree, depth + 1);\n      }\n    }\n    function clearStorage(storage) {\n      var willDeleteEls = createStorage();\n      storage && each(storage, function (store, storageName) {\n        var delEls = willDeleteEls[storageName];\n        each(store, function (el) {\n          el && (delEls.push(el), inner(el).willDelete = true);\n        });\n      });\n      return willDeleteEls;\n    }\n    function renderFinally() {\n      each(willDeleteEls, function (els) {\n        each(els, function (el) {\n          el.parent && el.parent.remove(el);\n        });\n      });\n      each(willInvisibleEls, function (el) {\n        el.invisible = true;\n        // Setting invisible is for optimizing, so no need to set dirty,\n        // just mark as invisible.\n        el.dirty();\n      });\n    }\n  };\n  TreemapView.prototype._doAnimation = function (containerGroup, renderResult, seriesModel, reRoot) {\n    var durationOption = seriesModel.get('animationDurationUpdate');\n    var easingOption = seriesModel.get('animationEasing');\n    // TODO: do not support function until necessary.\n    var duration = (isFunction(durationOption) ? 0 : durationOption) || 0;\n    var easing = (isFunction(easingOption) ? null : easingOption) || 'cubicOut';\n    var animationWrap = animationUtil.createWrap();\n    // Make delete animations.\n    each(renderResult.willDeleteEls, function (store, storageName) {\n      each(store, function (el, rawIndex) {\n        if (el.invisible) {\n          return;\n        }\n        var parent = el.parent; // Always has parent, and parent is nodeGroup.\n        var target;\n        var innerStore = inner(parent);\n        if (reRoot && reRoot.direction === 'drillDown') {\n          target = parent === reRoot.rootNodeGroup\n          // This is the content element of view root.\n          // Only `content` will enter this branch, because\n          // `background` and `nodeGroup` will not be deleted.\n          ? {\n            shape: {\n              x: 0,\n              y: 0,\n              width: innerStore.nodeWidth,\n              height: innerStore.nodeHeight\n            },\n            style: {\n              opacity: 0\n            }\n          }\n          // Others.\n          : {\n            style: {\n              opacity: 0\n            }\n          };\n        } else {\n          var targetX = 0;\n          var targetY = 0;\n          if (!innerStore.willDelete) {\n            // Let node animate to right-bottom corner, cooperating with fadeout,\n            // which is appropriate for user understanding.\n            // Divided by 2 for reRoot rolling up effect.\n            targetX = innerStore.nodeWidth / 2;\n            targetY = innerStore.nodeHeight / 2;\n          }\n          target = storageName === 'nodeGroup' ? {\n            x: targetX,\n            y: targetY,\n            style: {\n              opacity: 0\n            }\n          } : {\n            shape: {\n              x: targetX,\n              y: targetY,\n              width: 0,\n              height: 0\n            },\n            style: {\n              opacity: 0\n            }\n          };\n        }\n        // TODO: do not support delay until necessary.\n        target && animationWrap.add(el, target, duration, 0, easing);\n      });\n    });\n    // Make other animations\n    each(this._storage, function (store, storageName) {\n      each(store, function (el, rawIndex) {\n        var last = renderResult.lastsForAnimation[storageName][rawIndex];\n        var target = {};\n        if (!last) {\n          return;\n        }\n        if (el instanceof graphic.Group) {\n          if (last.oldX != null) {\n            target.x = el.x;\n            target.y = el.y;\n            el.x = last.oldX;\n            el.y = last.oldY;\n          }\n        } else {\n          if (last.oldShape) {\n            target.shape = extend({}, el.shape);\n            el.setShape(last.oldShape);\n          }\n          if (last.fadein) {\n            el.setStyle('opacity', 0);\n            target.style = {\n              opacity: 1\n            };\n          }\n          // When animation is stopped for succedent animation starting,\n          // el.style.opacity might not be 1\n          else if (el.style.opacity !== 1) {\n            target.style = {\n              opacity: 1\n            };\n          }\n        }\n        animationWrap.add(el, target, duration, 0, easing);\n      });\n    }, this);\n    this._state = 'animating';\n    animationWrap.finished(bind(function () {\n      this._state = 'ready';\n      renderResult.renderFinally();\n    }, this)).start();\n  };\n  TreemapView.prototype._resetController = function (api) {\n    var controller = this._controller;\n    var controllerHost = this._controllerHost;\n    if (!controllerHost) {\n      this._controllerHost = {\n        target: this.group\n      };\n      controllerHost = this._controllerHost;\n    }\n    // Init controller.\n    if (!controller) {\n      controller = this._controller = new RoamController(api.getZr());\n      controller.enable(this.seriesModel.get('roam'));\n      controllerHost.zoomLimit = this.seriesModel.get('scaleLimit');\n      controllerHost.zoom = this.seriesModel.get('zoom');\n      controller.on('pan', bind(this._onPan, this));\n      controller.on('zoom', bind(this._onZoom, this));\n    }\n    var rect = new BoundingRect(0, 0, api.getWidth(), api.getHeight());\n    controller.setPointerChecker(function (e, x, y) {\n      return rect.contain(x, y);\n    });\n  };\n  TreemapView.prototype._clearController = function () {\n    var controller = this._controller;\n    this._controllerHost = null;\n    if (controller) {\n      controller.dispose();\n      controller = null;\n    }\n  };\n  TreemapView.prototype._onPan = function (e) {\n    if (this._state !== 'animating' && (Math.abs(e.dx) > DRAG_THRESHOLD || Math.abs(e.dy) > DRAG_THRESHOLD)) {\n      // These param must not be cached.\n      var root = this.seriesModel.getData().tree.root;\n      if (!root) {\n        return;\n      }\n      var rootLayout = root.getLayout();\n      if (!rootLayout) {\n        return;\n      }\n      this.api.dispatchAction({\n        type: 'treemapMove',\n        from: this.uid,\n        seriesId: this.seriesModel.id,\n        rootRect: {\n          x: rootLayout.x + e.dx,\n          y: rootLayout.y + e.dy,\n          width: rootLayout.width,\n          height: rootLayout.height\n        }\n      });\n    }\n  };\n  TreemapView.prototype._onZoom = function (e) {\n    var mouseX = e.originX;\n    var mouseY = e.originY;\n    var zoomDelta = e.scale;\n    if (this._state !== 'animating') {\n      // These param must not be cached.\n      var root = this.seriesModel.getData().tree.root;\n      if (!root) {\n        return;\n      }\n      var rootLayout = root.getLayout();\n      if (!rootLayout) {\n        return;\n      }\n      var rect = new BoundingRect(rootLayout.x, rootLayout.y, rootLayout.width, rootLayout.height);\n      // scaleLimit\n      var zoomLimit = null;\n      var _controllerHost = this._controllerHost;\n      zoomLimit = _controllerHost.zoomLimit;\n      var newZoom = _controllerHost.zoom = _controllerHost.zoom || 1;\n      newZoom *= zoomDelta;\n      if (zoomLimit) {\n        var zoomMin = zoomLimit.min || 0;\n        var zoomMax = zoomLimit.max || Infinity;\n        newZoom = Math.max(Math.min(zoomMax, newZoom), zoomMin);\n      }\n      var zoomScale = newZoom / _controllerHost.zoom;\n      _controllerHost.zoom = newZoom;\n      var layoutInfo = this.seriesModel.layoutInfo;\n      // Transform mouse coord from global to containerGroup.\n      mouseX -= layoutInfo.x;\n      mouseY -= layoutInfo.y;\n      // Scale root bounding rect.\n      var m = matrix.create();\n      matrix.translate(m, m, [-mouseX, -mouseY]);\n      matrix.scale(m, m, [zoomScale, zoomScale]);\n      matrix.translate(m, m, [mouseX, mouseY]);\n      rect.applyTransform(m);\n      this.api.dispatchAction({\n        type: 'treemapRender',\n        from: this.uid,\n        seriesId: this.seriesModel.id,\n        rootRect: {\n          x: rect.x,\n          y: rect.y,\n          width: rect.width,\n          height: rect.height\n        }\n      });\n    }\n  };\n  TreemapView.prototype._initEvents = function (containerGroup) {\n    var _this = this;\n    containerGroup.on('click', function (e) {\n      if (_this._state !== 'ready') {\n        return;\n      }\n      var nodeClick = _this.seriesModel.get('nodeClick', true);\n      if (!nodeClick) {\n        return;\n      }\n      var targetInfo = _this.findTarget(e.offsetX, e.offsetY);\n      if (!targetInfo) {\n        return;\n      }\n      var node = targetInfo.node;\n      if (node.getLayout().isLeafRoot) {\n        _this._rootToNode(targetInfo);\n      } else {\n        if (nodeClick === 'zoomToNode') {\n          _this._zoomToNode(targetInfo);\n        } else if (nodeClick === 'link') {\n          var itemModel = node.hostTree.data.getItemModel(node.dataIndex);\n          var link = itemModel.get('link', true);\n          var linkTarget = itemModel.get('target', true) || 'blank';\n          link && windowOpen(link, linkTarget);\n        }\n      }\n    }, this);\n  };\n  TreemapView.prototype._renderBreadcrumb = function (seriesModel, api, targetInfo) {\n    var _this = this;\n    if (!targetInfo) {\n      targetInfo = seriesModel.get('leafDepth', true) != null ? {\n        node: seriesModel.getViewRoot()\n      }\n      // FIXME\n      // better way?\n      // Find breadcrumb tail on center of containerGroup.\n      : this.findTarget(api.getWidth() / 2, api.getHeight() / 2);\n      if (!targetInfo) {\n        targetInfo = {\n          node: seriesModel.getData().tree.root\n        };\n      }\n    }\n    (this._breadcrumb || (this._breadcrumb = new Breadcrumb(this.group))).render(seriesModel, api, targetInfo.node, function (node) {\n      if (_this._state !== 'animating') {\n        helper.aboveViewRoot(seriesModel.getViewRoot(), node) ? _this._rootToNode({\n          node: node\n        }) : _this._zoomToNode({\n          node: node\n        });\n      }\n    });\n  };\n  /**\r\n   * @override\r\n   */\n  TreemapView.prototype.remove = function () {\n    this._clearController();\n    this._containerGroup && this._containerGroup.removeAll();\n    this._storage = createStorage();\n    this._state = 'ready';\n    this._breadcrumb && this._breadcrumb.remove();\n  };\n  TreemapView.prototype.dispose = function () {\n    this._clearController();\n  };\n  TreemapView.prototype._zoomToNode = function (targetInfo) {\n    this.api.dispatchAction({\n      type: 'treemapZoomToNode',\n      from: this.uid,\n      seriesId: this.seriesModel.id,\n      targetNode: targetInfo.node\n    });\n  };\n  TreemapView.prototype._rootToNode = function (targetInfo) {\n    this.api.dispatchAction({\n      type: 'treemapRootToNode',\n      from: this.uid,\n      seriesId: this.seriesModel.id,\n      targetNode: targetInfo.node\n    });\n  };\n  /**\r\n   * @public\r\n   * @param {number} x Global coord x.\r\n   * @param {number} y Global coord y.\r\n   * @return {Object} info If not found, return undefined;\r\n   * @return {number} info.node Target node.\r\n   * @return {number} info.offsetX x refer to target node.\r\n   * @return {number} info.offsetY y refer to target node.\r\n   */\n  TreemapView.prototype.findTarget = function (x, y) {\n    var targetInfo;\n    var viewRoot = this.seriesModel.getViewRoot();\n    viewRoot.eachNode({\n      attr: 'viewChildren',\n      order: 'preorder'\n    }, function (node) {\n      var bgEl = this._storage.background[node.getRawIndex()];\n      // If invisible, there might be no element.\n      if (bgEl) {\n        var point = bgEl.transformCoordToLocal(x, y);\n        var shape = bgEl.shape;\n        // For performance consideration, don't use 'getBoundingRect'.\n        if (shape.x <= point[0] && point[0] <= shape.x + shape.width && shape.y <= point[1] && point[1] <= shape.y + shape.height) {\n          targetInfo = {\n            node: node,\n            offsetX: point[0],\n            offsetY: point[1]\n          };\n        } else {\n          return false; // Suppress visit subtree.\n        }\n      }\n    }, this);\n    return targetInfo;\n  };\n  TreemapView.type = 'treemap';\n  return TreemapView;\n}(ChartView);\n/**\r\n * @inner\r\n */\nfunction createStorage() {\n  return {\n    nodeGroup: [],\n    background: [],\n    content: []\n  };\n}\n/**\r\n * @inner\r\n * @return Return undefined means do not travel further.\r\n */\nfunction renderNode(seriesModel, thisStorage, oldStorage, reRoot, lastsForAnimation, willInvisibleEls, thisNode, oldNode, parentGroup, depth) {\n  // Whether under viewRoot.\n  if (!thisNode) {\n    // Deleting nodes will be performed finally. This method just find\n    // element from old storage, or create new element, set them to new\n    // storage, and set styles.\n    return;\n  }\n  // -------------------------------------------------------------------\n  // Start of closure variables available in \"Procedures in renderNode\".\n  var thisLayout = thisNode.getLayout();\n  var data = seriesModel.getData();\n  var nodeModel = thisNode.getModel();\n  // Only for enabling highlight/downplay. Clear firstly.\n  // Because some node will not be rendered.\n  data.setItemGraphicEl(thisNode.dataIndex, null);\n  if (!thisLayout || !thisLayout.isInView) {\n    return;\n  }\n  var thisWidth = thisLayout.width;\n  var thisHeight = thisLayout.height;\n  var borderWidth = thisLayout.borderWidth;\n  var thisInvisible = thisLayout.invisible;\n  var thisRawIndex = thisNode.getRawIndex();\n  var oldRawIndex = oldNode && oldNode.getRawIndex();\n  var thisViewChildren = thisNode.viewChildren;\n  var upperHeight = thisLayout.upperHeight;\n  var isParent = thisViewChildren && thisViewChildren.length;\n  var itemStyleNormalModel = nodeModel.getModel('itemStyle');\n  var itemStyleEmphasisModel = nodeModel.getModel(['emphasis', 'itemStyle']);\n  var itemStyleBlurModel = nodeModel.getModel(['blur', 'itemStyle']);\n  var itemStyleSelectModel = nodeModel.getModel(['select', 'itemStyle']);\n  var borderRadius = itemStyleNormalModel.get('borderRadius') || 0;\n  // End of closure ariables available in \"Procedures in renderNode\".\n  // -----------------------------------------------------------------\n  // Node group\n  var group = giveGraphic('nodeGroup', Group);\n  if (!group) {\n    return;\n  }\n  parentGroup.add(group);\n  // x,y are not set when el is above view root.\n  group.x = thisLayout.x || 0;\n  group.y = thisLayout.y || 0;\n  group.markRedraw();\n  inner(group).nodeWidth = thisWidth;\n  inner(group).nodeHeight = thisHeight;\n  if (thisLayout.isAboveViewRoot) {\n    return group;\n  }\n  // Background\n  var bg = giveGraphic('background', Rect, depth, Z2_BG);\n  bg && renderBackground(group, bg, isParent && thisLayout.upperLabelHeight);\n  var emphasisModel = nodeModel.getModel('emphasis');\n  var focus = emphasisModel.get('focus');\n  var blurScope = emphasisModel.get('blurScope');\n  var isDisabled = emphasisModel.get('disabled');\n  var focusOrIndices = focus === 'ancestor' ? thisNode.getAncestorsIndices() : focus === 'descendant' ? thisNode.getDescendantIndices() : focus;\n  // No children, render content.\n  if (isParent) {\n    // Because of the implementation about \"traverse\" in graphic hover style, we\n    // can not set hover listener on the \"group\" of non-leaf node. Otherwise the\n    // hover event from the descendents will be listenered.\n    if (isHighDownDispatcher(group)) {\n      setAsHighDownDispatcher(group, false);\n    }\n    if (bg) {\n      setAsHighDownDispatcher(bg, !isDisabled);\n      // Only for enabling highlight/downplay.\n      data.setItemGraphicEl(thisNode.dataIndex, bg);\n      enableHoverFocus(bg, focusOrIndices, blurScope);\n    }\n  } else {\n    var content = giveGraphic('content', Rect, depth, Z2_CONTENT);\n    content && renderContent(group, content);\n    bg.disableMorphing = true;\n    if (bg && isHighDownDispatcher(bg)) {\n      setAsHighDownDispatcher(bg, false);\n    }\n    setAsHighDownDispatcher(group, !isDisabled);\n    // Only for enabling highlight/downplay.\n    data.setItemGraphicEl(thisNode.dataIndex, group);\n    var cursorStyle = nodeModel.getShallow('cursor');\n    cursorStyle && content.attr('cursor', cursorStyle);\n    enableHoverFocus(group, focusOrIndices, blurScope);\n  }\n  return group;\n  // ----------------------------\n  // | Procedures in renderNode |\n  // ----------------------------\n  function renderBackground(group, bg, useUpperLabel) {\n    var ecData = getECData(bg);\n    // For tooltip.\n    ecData.dataIndex = thisNode.dataIndex;\n    ecData.seriesIndex = seriesModel.seriesIndex;\n    bg.setShape({\n      x: 0,\n      y: 0,\n      width: thisWidth,\n      height: thisHeight,\n      r: borderRadius\n    });\n    if (thisInvisible) {\n      // If invisible, do not set visual, otherwise the element will\n      // change immediately before animation. We think it is OK to\n      // remain its origin color when moving out of the view window.\n      processInvisible(bg);\n    } else {\n      bg.invisible = false;\n      var style = thisNode.getVisual('style');\n      var visualBorderColor = style.stroke;\n      var normalStyle = getItemStyleNormal(itemStyleNormalModel);\n      normalStyle.fill = visualBorderColor;\n      var emphasisStyle = getStateItemStyle(itemStyleEmphasisModel);\n      emphasisStyle.fill = itemStyleEmphasisModel.get('borderColor');\n      var blurStyle = getStateItemStyle(itemStyleBlurModel);\n      blurStyle.fill = itemStyleBlurModel.get('borderColor');\n      var selectStyle = getStateItemStyle(itemStyleSelectModel);\n      selectStyle.fill = itemStyleSelectModel.get('borderColor');\n      if (useUpperLabel) {\n        var upperLabelWidth = thisWidth - 2 * borderWidth;\n        prepareText(\n        // PENDING: convert ZRColor to ColorString for text.\n        bg, visualBorderColor, style.opacity, {\n          x: borderWidth,\n          y: 0,\n          width: upperLabelWidth,\n          height: upperHeight\n        });\n      }\n      // For old bg.\n      else {\n        bg.removeTextContent();\n      }\n      bg.setStyle(normalStyle);\n      bg.ensureState('emphasis').style = emphasisStyle;\n      bg.ensureState('blur').style = blurStyle;\n      bg.ensureState('select').style = selectStyle;\n      setDefaultStateProxy(bg);\n    }\n    group.add(bg);\n  }\n  function renderContent(group, content) {\n    var ecData = getECData(content);\n    // For tooltip.\n    ecData.dataIndex = thisNode.dataIndex;\n    ecData.seriesIndex = seriesModel.seriesIndex;\n    var contentWidth = Math.max(thisWidth - 2 * borderWidth, 0);\n    var contentHeight = Math.max(thisHeight - 2 * borderWidth, 0);\n    content.culling = true;\n    content.setShape({\n      x: borderWidth,\n      y: borderWidth,\n      width: contentWidth,\n      height: contentHeight,\n      r: borderRadius\n    });\n    if (thisInvisible) {\n      // If invisible, do not set visual, otherwise the element will\n      // change immediately before animation. We think it is OK to\n      // remain its origin color when moving out of the view window.\n      processInvisible(content);\n    } else {\n      content.invisible = false;\n      var nodeStyle = thisNode.getVisual('style');\n      var visualColor = nodeStyle.fill;\n      var normalStyle = getItemStyleNormal(itemStyleNormalModel);\n      normalStyle.fill = visualColor;\n      normalStyle.decal = nodeStyle.decal;\n      var emphasisStyle = getStateItemStyle(itemStyleEmphasisModel);\n      var blurStyle = getStateItemStyle(itemStyleBlurModel);\n      var selectStyle = getStateItemStyle(itemStyleSelectModel);\n      // PENDING: convert ZRColor to ColorString for text.\n      prepareText(content, visualColor, nodeStyle.opacity, null);\n      content.setStyle(normalStyle);\n      content.ensureState('emphasis').style = emphasisStyle;\n      content.ensureState('blur').style = blurStyle;\n      content.ensureState('select').style = selectStyle;\n      setDefaultStateProxy(content);\n    }\n    group.add(content);\n  }\n  function processInvisible(element) {\n    // Delay invisible setting utill animation finished,\n    // avoid element vanish suddenly before animation.\n    !element.invisible && willInvisibleEls.push(element);\n  }\n  function prepareText(rectEl, visualColor, visualOpacity,\n  // Can be null/undefined\n  upperLabelRect) {\n    var normalLabelModel = nodeModel.getModel(upperLabelRect ? PATH_UPPERLABEL_NORMAL : PATH_LABEL_NOAMAL);\n    var defaultText = convertOptionIdName(nodeModel.get('name'), null);\n    var isShow = normalLabelModel.getShallow('show');\n    setLabelStyle(rectEl, getLabelStatesModels(nodeModel, upperLabelRect ? PATH_UPPERLABEL_NORMAL : PATH_LABEL_NOAMAL), {\n      defaultText: isShow ? defaultText : null,\n      inheritColor: visualColor,\n      defaultOpacity: visualOpacity,\n      labelFetcher: seriesModel,\n      labelDataIndex: thisNode.dataIndex\n    });\n    var textEl = rectEl.getTextContent();\n    if (!textEl) {\n      return;\n    }\n    var textStyle = textEl.style;\n    var textPadding = normalizeCssArray(textStyle.padding || 0);\n    if (upperLabelRect) {\n      rectEl.setTextConfig({\n        layoutRect: upperLabelRect\n      });\n      textEl.disableLabelLayout = true;\n    }\n    textEl.beforeUpdate = function () {\n      var width = Math.max((upperLabelRect ? upperLabelRect.width : rectEl.shape.width) - textPadding[1] - textPadding[3], 0);\n      var height = Math.max((upperLabelRect ? upperLabelRect.height : rectEl.shape.height) - textPadding[0] - textPadding[2], 0);\n      if (textStyle.width !== width || textStyle.height !== height) {\n        textEl.setStyle({\n          width: width,\n          height: height\n        });\n      }\n    };\n    textStyle.truncateMinChar = 2;\n    textStyle.lineOverflow = 'truncate';\n    addDrillDownIcon(textStyle, upperLabelRect, thisLayout);\n    var textEmphasisState = textEl.getState('emphasis');\n    addDrillDownIcon(textEmphasisState ? textEmphasisState.style : null, upperLabelRect, thisLayout);\n  }\n  function addDrillDownIcon(style, upperLabelRect, thisLayout) {\n    var text = style ? style.text : null;\n    if (!upperLabelRect && thisLayout.isLeafRoot && text != null) {\n      var iconChar = seriesModel.get('drillDownIcon', true);\n      style.text = iconChar ? iconChar + ' ' + text : text;\n    }\n  }\n  function giveGraphic(storageName, Ctor, depth, z) {\n    var element = oldRawIndex != null && oldStorage[storageName][oldRawIndex];\n    var lasts = lastsForAnimation[storageName];\n    if (element) {\n      // Remove from oldStorage\n      oldStorage[storageName][oldRawIndex] = null;\n      prepareAnimationWhenHasOld(lasts, element);\n    }\n    // If invisible and no old element, do not create new element (for optimizing).\n    else if (!thisInvisible) {\n      element = new Ctor();\n      if (element instanceof Displayable) {\n        element.z2 = calculateZ2(depth, z);\n      }\n      prepareAnimationWhenNoOld(lasts, element);\n    }\n    // Set to thisStorage\n    return thisStorage[storageName][thisRawIndex] = element;\n  }\n  function prepareAnimationWhenHasOld(lasts, element) {\n    var lastCfg = lasts[thisRawIndex] = {};\n    if (element instanceof Group) {\n      lastCfg.oldX = element.x;\n      lastCfg.oldY = element.y;\n    } else {\n      lastCfg.oldShape = extend({}, element.shape);\n    }\n  }\n  // If a element is new, we need to find the animation start point carefully,\n  // otherwise it will looks strange when 'zoomToNode'.\n  function prepareAnimationWhenNoOld(lasts, element) {\n    var lastCfg = lasts[thisRawIndex] = {};\n    var parentNode = thisNode.parentNode;\n    var isGroup = element instanceof graphic.Group;\n    if (parentNode && (!reRoot || reRoot.direction === 'drillDown')) {\n      var parentOldX = 0;\n      var parentOldY = 0;\n      // New nodes appear from right-bottom corner in 'zoomToNode' animation.\n      // For convenience, get old bounding rect from background.\n      var parentOldBg = lastsForAnimation.background[parentNode.getRawIndex()];\n      if (!reRoot && parentOldBg && parentOldBg.oldShape) {\n        parentOldX = parentOldBg.oldShape.width;\n        parentOldY = parentOldBg.oldShape.height;\n      }\n      // When no parent old shape found, its parent is new too,\n      // so we can just use {x:0, y:0}.\n      if (isGroup) {\n        lastCfg.oldX = 0;\n        lastCfg.oldY = parentOldY;\n      } else {\n        lastCfg.oldShape = {\n          x: parentOldX,\n          y: parentOldY,\n          width: 0,\n          height: 0\n        };\n      }\n    }\n    // Fade in, user can be aware that these nodes are new.\n    lastCfg.fadein = !isGroup;\n  }\n}\n// We cannot set all background with the same z, because the behaviour of\n// drill down and roll up differ background creation sequence from tree\n// hierarchy sequence, which cause lower background elements to overlap\n// upper ones. So we calculate z based on depth.\n// Moreover, we try to shrink down z interval to [0, 1] to avoid that\n// treemap with large z overlaps other components.\nfunction calculateZ2(depth, z2InLevel) {\n  return depth * Z2_BASE + z2InLevel;\n}\nexport default TreemapView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as zrColor from 'zrender/lib/tool/color.js';\nimport { linearMap } from '../util/number.js';\nimport { warn } from '../util/log.js';\nvar each = zrUtil.each;\nvar isObject = zrUtil.isObject;\nvar CATEGORY_DEFAULT_VISUAL_INDEX = -1;\nvar VisualMapping = /** @class */function () {\n  function VisualMapping(option) {\n    var mappingMethod = option.mappingMethod;\n    var visualType = option.type;\n    var thisOption = this.option = zrUtil.clone(option);\n    this.type = visualType;\n    this.mappingMethod = mappingMethod;\n    this._normalizeData = normalizers[mappingMethod];\n    var visualHandler = VisualMapping.visualHandlers[visualType];\n    this.applyVisual = visualHandler.applyVisual;\n    this.getColorMapper = visualHandler.getColorMapper;\n    this._normalizedToVisual = visualHandler._normalizedToVisual[mappingMethod];\n    if (mappingMethod === 'piecewise') {\n      normalizeVisualRange(thisOption);\n      preprocessForPiecewise(thisOption);\n    } else if (mappingMethod === 'category') {\n      thisOption.categories ? preprocessForSpecifiedCategory(thisOption)\n      // categories is ordinal when thisOption.categories not specified,\n      // which need no more preprocess except normalize visual.\n      : normalizeVisualRange(thisOption, true);\n    } else {\n      // mappingMethod === 'linear' or 'fixed'\n      zrUtil.assert(mappingMethod !== 'linear' || thisOption.dataExtent);\n      normalizeVisualRange(thisOption);\n    }\n  }\n  VisualMapping.prototype.mapValueToVisual = function (value) {\n    var normalized = this._normalizeData(value);\n    return this._normalizedToVisual(normalized, value);\n  };\n  VisualMapping.prototype.getNormalizer = function () {\n    return zrUtil.bind(this._normalizeData, this);\n  };\n  /**\r\n   * List available visual types.\r\n   *\r\n   * @public\r\n   * @return {Array.<string>}\r\n   */\n  VisualMapping.listVisualTypes = function () {\n    return zrUtil.keys(VisualMapping.visualHandlers);\n  };\n  // /**\n  //  * @public\n  //  */\n  // static addVisualHandler(name, handler) {\n  //     visualHandlers[name] = handler;\n  // }\n  /**\r\n   * @public\r\n   */\n  VisualMapping.isValidType = function (visualType) {\n    return VisualMapping.visualHandlers.hasOwnProperty(visualType);\n  };\n  /**\r\n   * Convenient method.\r\n   * Visual can be Object or Array or primary type.\r\n   */\n  VisualMapping.eachVisual = function (visual, callback, context) {\n    if (zrUtil.isObject(visual)) {\n      zrUtil.each(visual, callback, context);\n    } else {\n      callback.call(context, visual);\n    }\n  };\n  VisualMapping.mapVisual = function (visual, callback, context) {\n    var isPrimary;\n    var newVisual = zrUtil.isArray(visual) ? [] : zrUtil.isObject(visual) ? {} : (isPrimary = true, null);\n    VisualMapping.eachVisual(visual, function (v, key) {\n      var newVal = callback.call(context, v, key);\n      isPrimary ? newVisual = newVal : newVisual[key] = newVal;\n    });\n    return newVisual;\n  };\n  /**\r\n   * Retrieve visual properties from given object.\r\n   */\n  VisualMapping.retrieveVisuals = function (obj) {\n    var ret = {};\n    var hasVisual;\n    obj && each(VisualMapping.visualHandlers, function (h, visualType) {\n      if (obj.hasOwnProperty(visualType)) {\n        ret[visualType] = obj[visualType];\n        hasVisual = true;\n      }\n    });\n    return hasVisual ? ret : null;\n  };\n  /**\r\n   * Give order to visual types, considering colorSaturation, colorAlpha depends on color.\r\n   *\r\n   * @public\r\n   * @param {(Object|Array)} visualTypes If Object, like: {color: ..., colorSaturation: ...}\r\n   *                                     IF Array, like: ['color', 'symbol', 'colorSaturation']\r\n   * @return {Array.<string>} Sorted visual types.\r\n   */\n  VisualMapping.prepareVisualTypes = function (visualTypes) {\n    if (zrUtil.isArray(visualTypes)) {\n      visualTypes = visualTypes.slice();\n    } else if (isObject(visualTypes)) {\n      var types_1 = [];\n      each(visualTypes, function (item, type) {\n        types_1.push(type);\n      });\n      visualTypes = types_1;\n    } else {\n      return [];\n    }\n    visualTypes.sort(function (type1, type2) {\n      // color should be front of colorSaturation, colorAlpha, ...\n      // symbol and symbolSize do not matter.\n      return type2 === 'color' && type1 !== 'color' && type1.indexOf('color') === 0 ? 1 : -1;\n    });\n    return visualTypes;\n  };\n  /**\r\n   * 'color', 'colorSaturation', 'colorAlpha', ... are depends on 'color'.\r\n   * Other visuals are only depends on themself.\r\n   */\n  VisualMapping.dependsOn = function (visualType1, visualType2) {\n    return visualType2 === 'color' ? !!(visualType1 && visualType1.indexOf(visualType2) === 0) : visualType1 === visualType2;\n  };\n  /**\r\n   * @param value\r\n   * @param pieceList [{value: ..., interval: [min, max]}, ...]\r\n   *                         Always from small to big.\r\n   * @param findClosestWhenOutside Default to be false\r\n   * @return index\r\n   */\n  VisualMapping.findPieceIndex = function (value, pieceList, findClosestWhenOutside) {\n    var possibleI;\n    var abs = Infinity;\n    // value has the higher priority.\n    for (var i = 0, len = pieceList.length; i < len; i++) {\n      var pieceValue = pieceList[i].value;\n      if (pieceValue != null) {\n        if (pieceValue === value\n        // FIXME\n        // It is supposed to compare value according to value type of dimension,\n        // but currently value type can exactly be string or number.\n        // Compromise for numeric-like string (like '12'), especially\n        // in the case that visualMap.categories is ['22', '33'].\n        || zrUtil.isString(pieceValue) && pieceValue === value + '') {\n          return i;\n        }\n        findClosestWhenOutside && updatePossible(pieceValue, i);\n      }\n    }\n    for (var i = 0, len = pieceList.length; i < len; i++) {\n      var piece = pieceList[i];\n      var interval = piece.interval;\n      var close_1 = piece.close;\n      if (interval) {\n        if (interval[0] === -Infinity) {\n          if (littleThan(close_1[1], value, interval[1])) {\n            return i;\n          }\n        } else if (interval[1] === Infinity) {\n          if (littleThan(close_1[0], interval[0], value)) {\n            return i;\n          }\n        } else if (littleThan(close_1[0], interval[0], value) && littleThan(close_1[1], value, interval[1])) {\n          return i;\n        }\n        findClosestWhenOutside && updatePossible(interval[0], i);\n        findClosestWhenOutside && updatePossible(interval[1], i);\n      }\n    }\n    if (findClosestWhenOutside) {\n      return value === Infinity ? pieceList.length - 1 : value === -Infinity ? 0 : possibleI;\n    }\n    function updatePossible(val, index) {\n      var newAbs = Math.abs(val - value);\n      if (newAbs < abs) {\n        abs = newAbs;\n        possibleI = index;\n      }\n    }\n  };\n  VisualMapping.visualHandlers = {\n    color: {\n      applyVisual: makeApplyVisual('color'),\n      getColorMapper: function () {\n        var thisOption = this.option;\n        return zrUtil.bind(thisOption.mappingMethod === 'category' ? function (value, isNormalized) {\n          !isNormalized && (value = this._normalizeData(value));\n          return doMapCategory.call(this, value);\n        } : function (value, isNormalized, out) {\n          // If output rgb array\n          // which will be much faster and useful in pixel manipulation\n          var returnRGBArray = !!out;\n          !isNormalized && (value = this._normalizeData(value));\n          out = zrColor.fastLerp(value, thisOption.parsedVisual, out);\n          return returnRGBArray ? out : zrColor.stringify(out, 'rgba');\n        }, this);\n      },\n      _normalizedToVisual: {\n        linear: function (normalized) {\n          return zrColor.stringify(zrColor.fastLerp(normalized, this.option.parsedVisual), 'rgba');\n        },\n        category: doMapCategory,\n        piecewise: function (normalized, value) {\n          var result = getSpecifiedVisual.call(this, value);\n          if (result == null) {\n            result = zrColor.stringify(zrColor.fastLerp(normalized, this.option.parsedVisual), 'rgba');\n          }\n          return result;\n        },\n        fixed: doMapFixed\n      }\n    },\n    colorHue: makePartialColorVisualHandler(function (color, value) {\n      return zrColor.modifyHSL(color, value);\n    }),\n    colorSaturation: makePartialColorVisualHandler(function (color, value) {\n      return zrColor.modifyHSL(color, null, value);\n    }),\n    colorLightness: makePartialColorVisualHandler(function (color, value) {\n      return zrColor.modifyHSL(color, null, null, value);\n    }),\n    colorAlpha: makePartialColorVisualHandler(function (color, value) {\n      return zrColor.modifyAlpha(color, value);\n    }),\n    decal: {\n      applyVisual: makeApplyVisual('decal'),\n      _normalizedToVisual: {\n        linear: null,\n        category: doMapCategory,\n        piecewise: null,\n        fixed: null\n      }\n    },\n    opacity: {\n      applyVisual: makeApplyVisual('opacity'),\n      _normalizedToVisual: createNormalizedToNumericVisual([0, 1])\n    },\n    liftZ: {\n      applyVisual: makeApplyVisual('liftZ'),\n      _normalizedToVisual: {\n        linear: doMapFixed,\n        category: doMapFixed,\n        piecewise: doMapFixed,\n        fixed: doMapFixed\n      }\n    },\n    symbol: {\n      applyVisual: function (value, getter, setter) {\n        var symbolCfg = this.mapValueToVisual(value);\n        setter('symbol', symbolCfg);\n      },\n      _normalizedToVisual: {\n        linear: doMapToArray,\n        category: doMapCategory,\n        piecewise: function (normalized, value) {\n          var result = getSpecifiedVisual.call(this, value);\n          if (result == null) {\n            result = doMapToArray.call(this, normalized);\n          }\n          return result;\n        },\n        fixed: doMapFixed\n      }\n    },\n    symbolSize: {\n      applyVisual: makeApplyVisual('symbolSize'),\n      _normalizedToVisual: createNormalizedToNumericVisual([0, 1])\n    }\n  };\n  return VisualMapping;\n}();\nfunction preprocessForPiecewise(thisOption) {\n  var pieceList = thisOption.pieceList;\n  thisOption.hasSpecialVisual = false;\n  zrUtil.each(pieceList, function (piece, index) {\n    piece.originIndex = index;\n    // piece.visual is \"result visual value\" but not\n    // a visual range, so it does not need to be normalized.\n    if (piece.visual != null) {\n      thisOption.hasSpecialVisual = true;\n    }\n  });\n}\nfunction preprocessForSpecifiedCategory(thisOption) {\n  // Hash categories.\n  var categories = thisOption.categories;\n  var categoryMap = thisOption.categoryMap = {};\n  var visual = thisOption.visual;\n  each(categories, function (cate, index) {\n    categoryMap[cate] = index;\n  });\n  // Process visual map input.\n  if (!zrUtil.isArray(visual)) {\n    var visualArr_1 = [];\n    if (zrUtil.isObject(visual)) {\n      each(visual, function (v, cate) {\n        var index = categoryMap[cate];\n        visualArr_1[index != null ? index : CATEGORY_DEFAULT_VISUAL_INDEX] = v;\n      });\n    } else {\n      // Is primary type, represents default visual.\n      visualArr_1[CATEGORY_DEFAULT_VISUAL_INDEX] = visual;\n    }\n    visual = setVisualToOption(thisOption, visualArr_1);\n  }\n  // Remove categories that has no visual,\n  // then we can mapping them to CATEGORY_DEFAULT_VISUAL_INDEX.\n  for (var i = categories.length - 1; i >= 0; i--) {\n    if (visual[i] == null) {\n      delete categoryMap[categories[i]];\n      categories.pop();\n    }\n  }\n}\nfunction normalizeVisualRange(thisOption, isCategory) {\n  var visual = thisOption.visual;\n  var visualArr = [];\n  if (zrUtil.isObject(visual)) {\n    each(visual, function (v) {\n      visualArr.push(v);\n    });\n  } else if (visual != null) {\n    visualArr.push(visual);\n  }\n  var doNotNeedPair = {\n    color: 1,\n    symbol: 1\n  };\n  if (!isCategory && visualArr.length === 1 && !doNotNeedPair.hasOwnProperty(thisOption.type)) {\n    // Do not care visualArr.length === 0, which is illegal.\n    visualArr[1] = visualArr[0];\n  }\n  setVisualToOption(thisOption, visualArr);\n}\nfunction makePartialColorVisualHandler(applyValue) {\n  return {\n    applyVisual: function (value, getter, setter) {\n      // Only used in HSL\n      var colorChannel = this.mapValueToVisual(value);\n      // Must not be array value\n      setter('color', applyValue(getter('color'), colorChannel));\n    },\n    _normalizedToVisual: createNormalizedToNumericVisual([0, 1])\n  };\n}\nfunction doMapToArray(normalized) {\n  var visual = this.option.visual;\n  return visual[Math.round(linearMap(normalized, [0, 1], [0, visual.length - 1], true))] || {}; // TODO {}?\n}\nfunction makeApplyVisual(visualType) {\n  return function (value, getter, setter) {\n    setter(visualType, this.mapValueToVisual(value));\n  };\n}\nfunction doMapCategory(normalized) {\n  var visual = this.option.visual;\n  return visual[this.option.loop && normalized !== CATEGORY_DEFAULT_VISUAL_INDEX ? normalized % visual.length : normalized];\n}\nfunction doMapFixed() {\n  // visual will be convert to array.\n  return this.option.visual[0];\n}\n/**\r\n * Create mapped to numeric visual\r\n */\nfunction createNormalizedToNumericVisual(sourceExtent) {\n  return {\n    linear: function (normalized) {\n      return linearMap(normalized, sourceExtent, this.option.visual, true);\n    },\n    category: doMapCategory,\n    piecewise: function (normalized, value) {\n      var result = getSpecifiedVisual.call(this, value);\n      if (result == null) {\n        result = linearMap(normalized, sourceExtent, this.option.visual, true);\n      }\n      return result;\n    },\n    fixed: doMapFixed\n  };\n}\nfunction getSpecifiedVisual(value) {\n  var thisOption = this.option;\n  var pieceList = thisOption.pieceList;\n  if (thisOption.hasSpecialVisual) {\n    var pieceIndex = VisualMapping.findPieceIndex(value, pieceList);\n    var piece = pieceList[pieceIndex];\n    if (piece && piece.visual) {\n      return piece.visual[this.type];\n    }\n  }\n}\nfunction setVisualToOption(thisOption, visualArr) {\n  thisOption.visual = visualArr;\n  if (thisOption.type === 'color') {\n    thisOption.parsedVisual = zrUtil.map(visualArr, function (item) {\n      var color = zrColor.parse(item);\n      if (!color && process.env.NODE_ENV !== 'production') {\n        warn(\"'\" + item + \"' is an illegal color, fallback to '#000000'\", true);\n      }\n      return color || [0, 0, 0, 1];\n    });\n  }\n  return visualArr;\n}\n/**\r\n * Normalizers by mapping methods.\r\n */\nvar normalizers = {\n  linear: function (value) {\n    return linearMap(value, this.option.dataExtent, [0, 1], true);\n  },\n  piecewise: function (value) {\n    var pieceList = this.option.pieceList;\n    var pieceIndex = VisualMapping.findPieceIndex(value, pieceList, true);\n    if (pieceIndex != null) {\n      return linearMap(pieceIndex, [0, pieceList.length - 1], [0, 1], true);\n    }\n  },\n  category: function (value) {\n    var index = this.option.categories ? this.option.categoryMap[value] : value; // ordinal value\n    return index == null ? CATEGORY_DEFAULT_VISUAL_INDEX : index;\n  },\n  fixed: zrUtil.noop\n};\nfunction littleThan(close, a, b) {\n  return close ? a <= b : a < b;\n}\nexport default VisualMapping;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport VisualMapping from '../../visual/VisualMapping.js';\nimport { each, extend, isArray } from 'zrender/lib/core/util.js';\nimport { modifyHSL, modifyAlpha } from 'zrender/lib/tool/color.js';\nimport { makeInner } from '../../util/model.js';\nvar ITEM_STYLE_NORMAL = 'itemStyle';\nvar inner = makeInner();\nexport default {\n  seriesType: 'treemap',\n  reset: function (seriesModel) {\n    var tree = seriesModel.getData().tree;\n    var root = tree.root;\n    if (root.isRemoved()) {\n      return;\n    }\n    travelTree(root,\n    // Visual should calculate from tree root but not view root.\n    {}, seriesModel.getViewRoot().getAncestors(), seriesModel);\n  }\n};\nfunction travelTree(node, designatedVisual, viewRootAncestors, seriesModel) {\n  var nodeModel = node.getModel();\n  var nodeLayout = node.getLayout();\n  var data = node.hostTree.data;\n  // Optimize\n  if (!nodeLayout || nodeLayout.invisible || !nodeLayout.isInView) {\n    return;\n  }\n  var nodeItemStyleModel = nodeModel.getModel(ITEM_STYLE_NORMAL);\n  var visuals = buildVisuals(nodeItemStyleModel, designatedVisual, seriesModel);\n  var existsStyle = data.ensureUniqueItemVisual(node.dataIndex, 'style');\n  // calculate border color\n  var borderColor = nodeItemStyleModel.get('borderColor');\n  var borderColorSaturation = nodeItemStyleModel.get('borderColorSaturation');\n  var thisNodeColor;\n  if (borderColorSaturation != null) {\n    // For performance, do not always execute 'calculateColor'.\n    thisNodeColor = calculateColor(visuals);\n    borderColor = calculateBorderColor(borderColorSaturation, thisNodeColor);\n  }\n  existsStyle.stroke = borderColor;\n  var viewChildren = node.viewChildren;\n  if (!viewChildren || !viewChildren.length) {\n    thisNodeColor = calculateColor(visuals);\n    // Apply visual to this node.\n    existsStyle.fill = thisNodeColor;\n  } else {\n    var mapping_1 = buildVisualMapping(node, nodeModel, nodeLayout, nodeItemStyleModel, visuals, viewChildren);\n    // Designate visual to children.\n    each(viewChildren, function (child, index) {\n      // If higher than viewRoot, only ancestors of viewRoot is needed to visit.\n      if (child.depth >= viewRootAncestors.length || child === viewRootAncestors[child.depth]) {\n        var childVisual = mapVisual(nodeModel, visuals, child, index, mapping_1, seriesModel);\n        travelTree(child, childVisual, viewRootAncestors, seriesModel);\n      }\n    });\n  }\n}\nfunction buildVisuals(nodeItemStyleModel, designatedVisual, seriesModel) {\n  var visuals = extend({}, designatedVisual);\n  var designatedVisualItemStyle = seriesModel.designatedVisualItemStyle;\n  each(['color', 'colorAlpha', 'colorSaturation'], function (visualName) {\n    // Priority: thisNode > thisLevel > parentNodeDesignated > seriesModel\n    designatedVisualItemStyle[visualName] = designatedVisual[visualName];\n    var val = nodeItemStyleModel.get(visualName);\n    designatedVisualItemStyle[visualName] = null;\n    val != null && (visuals[visualName] = val);\n  });\n  return visuals;\n}\nfunction calculateColor(visuals) {\n  var color = getValueVisualDefine(visuals, 'color');\n  if (color) {\n    var colorAlpha = getValueVisualDefine(visuals, 'colorAlpha');\n    var colorSaturation = getValueVisualDefine(visuals, 'colorSaturation');\n    if (colorSaturation) {\n      color = modifyHSL(color, null, null, colorSaturation);\n    }\n    if (colorAlpha) {\n      color = modifyAlpha(color, colorAlpha);\n    }\n    return color;\n  }\n}\nfunction calculateBorderColor(borderColorSaturation, thisNodeColor) {\n  return thisNodeColor != null\n  // Can only be string\n  ? modifyHSL(thisNodeColor, null, null, borderColorSaturation) : null;\n}\nfunction getValueVisualDefine(visuals, name) {\n  var value = visuals[name];\n  if (value != null && value !== 'none') {\n    return value;\n  }\n}\nfunction buildVisualMapping(node, nodeModel, nodeLayout, nodeItemStyleModel, visuals, viewChildren) {\n  if (!viewChildren || !viewChildren.length) {\n    return;\n  }\n  var rangeVisual = getRangeVisual(nodeModel, 'color') || visuals.color != null && visuals.color !== 'none' && (getRangeVisual(nodeModel, 'colorAlpha') || getRangeVisual(nodeModel, 'colorSaturation'));\n  if (!rangeVisual) {\n    return;\n  }\n  var visualMin = nodeModel.get('visualMin');\n  var visualMax = nodeModel.get('visualMax');\n  var dataExtent = nodeLayout.dataExtent.slice();\n  visualMin != null && visualMin < dataExtent[0] && (dataExtent[0] = visualMin);\n  visualMax != null && visualMax > dataExtent[1] && (dataExtent[1] = visualMax);\n  var colorMappingBy = nodeModel.get('colorMappingBy');\n  var opt = {\n    type: rangeVisual.name,\n    dataExtent: dataExtent,\n    visual: rangeVisual.range\n  };\n  if (opt.type === 'color' && (colorMappingBy === 'index' || colorMappingBy === 'id')) {\n    opt.mappingMethod = 'category';\n    opt.loop = true;\n    // categories is ordinal, so do not set opt.categories.\n  } else {\n    opt.mappingMethod = 'linear';\n  }\n  var mapping = new VisualMapping(opt);\n  inner(mapping).drColorMappingBy = colorMappingBy;\n  return mapping;\n}\n// Notice: If we don't have the attribute 'colorRange', but only use\n// attribute 'color' to represent both concepts of 'colorRange' and 'color',\n// (It means 'colorRange' when 'color' is Array, means 'color' when not array),\n// this problem will be encountered:\n// If a level-1 node doesn't have children, and its siblings have children,\n// and colorRange is set on level-1, then the node cannot be colored.\n// So we separate 'colorRange' and 'color' to different attributes.\nfunction getRangeVisual(nodeModel, name) {\n  // 'colorRange', 'colorARange', 'colorSRange'.\n  // If not exists on this node, fetch from levels and series.\n  var range = nodeModel.get(name);\n  return isArray(range) && range.length ? {\n    name: name,\n    range: range\n  } : null;\n}\nfunction mapVisual(nodeModel, visuals, child, index, mapping, seriesModel) {\n  var childVisuals = extend({}, visuals);\n  if (mapping) {\n    // Only support color, colorAlpha, colorSaturation.\n    var mappingType = mapping.type;\n    var colorMappingBy = mappingType === 'color' && inner(mapping).drColorMappingBy;\n    var value = colorMappingBy === 'index' ? index : colorMappingBy === 'id' ? seriesModel.mapIdToIndex(child.getId()) : child.getValue(nodeModel.get('visualDimension'));\n    childVisuals[mappingType] = mapping.mapValueToVisual(value);\n  }\n  return childVisuals;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n/*\r\n* A third-party license is embedded for some of the code in this file:\r\n* The treemap layout implementation was originally copied from\r\n* \"d3.js\" with some modifications made for this project.\r\n* (See more details in the comment of the method \"squarify\" below.)\r\n* The use of the source code of this file is also subject to the terms\r\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\r\n* </licenses/LICENSE-d3>).\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport { parsePercent, MAX_SAFE_INTEGER } from '../../util/number.js';\nimport * as layout from '../../util/layout.js';\nimport * as helper from '../helper/treeHelper.js';\nvar mathMax = Math.max;\nvar mathMin = Math.min;\nvar retrieveValue = zrUtil.retrieve;\nvar each = zrUtil.each;\nvar PATH_BORDER_WIDTH = ['itemStyle', 'borderWidth'];\nvar PATH_GAP_WIDTH = ['itemStyle', 'gapWidth'];\nvar PATH_UPPER_LABEL_SHOW = ['upperLabel', 'show'];\nvar PATH_UPPER_LABEL_HEIGHT = ['upperLabel', 'height'];\n;\n/**\r\n * @public\r\n */\nexport default {\n  seriesType: 'treemap',\n  reset: function (seriesModel, ecModel, api, payload) {\n    // Layout result in each node:\n    // {x, y, width, height, area, borderWidth}\n    var ecWidth = api.getWidth();\n    var ecHeight = api.getHeight();\n    var seriesOption = seriesModel.option;\n    var layoutInfo = layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n    var size = seriesOption.size || []; // Compatible with ec2.\n    var containerWidth = parsePercent(retrieveValue(layoutInfo.width, size[0]), ecWidth);\n    var containerHeight = parsePercent(retrieveValue(layoutInfo.height, size[1]), ecHeight);\n    // Fetch payload info.\n    var payloadType = payload && payload.type;\n    var types = ['treemapZoomToNode', 'treemapRootToNode'];\n    var targetInfo = helper.retrieveTargetInfo(payload, types, seriesModel);\n    var rootRect = payloadType === 'treemapRender' || payloadType === 'treemapMove' ? payload.rootRect : null;\n    var viewRoot = seriesModel.getViewRoot();\n    var viewAbovePath = helper.getPathToRoot(viewRoot);\n    if (payloadType !== 'treemapMove') {\n      var rootSize = payloadType === 'treemapZoomToNode' ? estimateRootSize(seriesModel, targetInfo, viewRoot, containerWidth, containerHeight) : rootRect ? [rootRect.width, rootRect.height] : [containerWidth, containerHeight];\n      var sort_1 = seriesOption.sort;\n      if (sort_1 && sort_1 !== 'asc' && sort_1 !== 'desc') {\n        // Default to be desc order.\n        sort_1 = 'desc';\n      }\n      var options = {\n        squareRatio: seriesOption.squareRatio,\n        sort: sort_1,\n        leafDepth: seriesOption.leafDepth\n      };\n      // layout should be cleared because using updateView but not update.\n      viewRoot.hostTree.clearLayouts();\n      // TODO\n      // optimize: if out of view clip, do not layout.\n      // But take care that if do not render node out of view clip,\n      // how to calculate start po\n      var viewRootLayout_1 = {\n        x: 0,\n        y: 0,\n        width: rootSize[0],\n        height: rootSize[1],\n        area: rootSize[0] * rootSize[1]\n      };\n      viewRoot.setLayout(viewRootLayout_1);\n      squarify(viewRoot, options, false, 0);\n      // Supplement layout.\n      viewRootLayout_1 = viewRoot.getLayout();\n      each(viewAbovePath, function (node, index) {\n        var childValue = (viewAbovePath[index + 1] || viewRoot).getValue();\n        node.setLayout(zrUtil.extend({\n          dataExtent: [childValue, childValue],\n          borderWidth: 0,\n          upperHeight: 0\n        }, viewRootLayout_1));\n      });\n    }\n    var treeRoot = seriesModel.getData().tree.root;\n    treeRoot.setLayout(calculateRootPosition(layoutInfo, rootRect, targetInfo), true);\n    seriesModel.setLayoutInfo(layoutInfo);\n    // FIXME\n    // clipec\n    prunning(treeRoot,\n    // Transform to base element coordinate system.\n    new BoundingRect(-layoutInfo.x, -layoutInfo.y, ecWidth, ecHeight), viewAbovePath, viewRoot, 0);\n  }\n};\n/**\r\n * Layout treemap with squarify algorithm.\r\n * The original presentation of this algorithm\r\n * was made by Mark Bruls, Kees Huizing, and Jarke J. van Wijk\r\n * <https://graphics.ethz.ch/teaching/scivis_common/Literature/squarifiedTreeMaps.pdf>.\r\n * The implementation of this algorithm was originally copied from \"d3.js\"\r\n * <https://github.com/d3/d3/blob/9cc9a875e636a1dcf36cc1e07bdf77e1ad6e2c74/src/layout/treemap.js>\r\n * with some modifications made for this program.\r\n * See the license statement at the head of this file.\r\n *\r\n * @protected\r\n * @param {module:echarts/data/Tree~TreeNode} node\r\n * @param {Object} options\r\n * @param {string} options.sort 'asc' or 'desc'\r\n * @param {number} options.squareRatio\r\n * @param {boolean} hideChildren\r\n * @param {number} depth\r\n */\nfunction squarify(node, options, hideChildren, depth) {\n  var width;\n  var height;\n  if (node.isRemoved()) {\n    return;\n  }\n  var thisLayout = node.getLayout();\n  width = thisLayout.width;\n  height = thisLayout.height;\n  // Considering border and gap\n  var nodeModel = node.getModel();\n  var borderWidth = nodeModel.get(PATH_BORDER_WIDTH);\n  var halfGapWidth = nodeModel.get(PATH_GAP_WIDTH) / 2;\n  var upperLabelHeight = getUpperLabelHeight(nodeModel);\n  var upperHeight = Math.max(borderWidth, upperLabelHeight);\n  var layoutOffset = borderWidth - halfGapWidth;\n  var layoutOffsetUpper = upperHeight - halfGapWidth;\n  node.setLayout({\n    borderWidth: borderWidth,\n    upperHeight: upperHeight,\n    upperLabelHeight: upperLabelHeight\n  }, true);\n  width = mathMax(width - 2 * layoutOffset, 0);\n  height = mathMax(height - layoutOffset - layoutOffsetUpper, 0);\n  var totalArea = width * height;\n  var viewChildren = initChildren(node, nodeModel, totalArea, options, hideChildren, depth);\n  if (!viewChildren.length) {\n    return;\n  }\n  var rect = {\n    x: layoutOffset,\n    y: layoutOffsetUpper,\n    width: width,\n    height: height\n  };\n  var rowFixedLength = mathMin(width, height);\n  var best = Infinity; // the best row score so far\n  var row = [];\n  row.area = 0;\n  for (var i = 0, len = viewChildren.length; i < len;) {\n    var child = viewChildren[i];\n    row.push(child);\n    row.area += child.getLayout().area;\n    var score = worst(row, rowFixedLength, options.squareRatio);\n    // continue with this orientation\n    if (score <= best) {\n      i++;\n      best = score;\n    }\n    // abort, and try a different orientation\n    else {\n      row.area -= row.pop().getLayout().area;\n      position(row, rowFixedLength, rect, halfGapWidth, false);\n      rowFixedLength = mathMin(rect.width, rect.height);\n      row.length = row.area = 0;\n      best = Infinity;\n    }\n  }\n  if (row.length) {\n    position(row, rowFixedLength, rect, halfGapWidth, true);\n  }\n  if (!hideChildren) {\n    var childrenVisibleMin = nodeModel.get('childrenVisibleMin');\n    if (childrenVisibleMin != null && totalArea < childrenVisibleMin) {\n      hideChildren = true;\n    }\n  }\n  for (var i = 0, len = viewChildren.length; i < len; i++) {\n    squarify(viewChildren[i], options, hideChildren, depth + 1);\n  }\n}\n/**\r\n * Set area to each child, and calculate data extent for visual coding.\r\n */\nfunction initChildren(node, nodeModel, totalArea, options, hideChildren, depth) {\n  var viewChildren = node.children || [];\n  var orderBy = options.sort;\n  orderBy !== 'asc' && orderBy !== 'desc' && (orderBy = null);\n  var overLeafDepth = options.leafDepth != null && options.leafDepth <= depth;\n  // leafDepth has higher priority.\n  if (hideChildren && !overLeafDepth) {\n    return node.viewChildren = [];\n  }\n  // Sort children, order by desc.\n  viewChildren = zrUtil.filter(viewChildren, function (child) {\n    return !child.isRemoved();\n  });\n  sort(viewChildren, orderBy);\n  var info = statistic(nodeModel, viewChildren, orderBy);\n  if (info.sum === 0) {\n    return node.viewChildren = [];\n  }\n  info.sum = filterByThreshold(nodeModel, totalArea, info.sum, orderBy, viewChildren);\n  if (info.sum === 0) {\n    return node.viewChildren = [];\n  }\n  // Set area to each child.\n  for (var i = 0, len = viewChildren.length; i < len; i++) {\n    var area = viewChildren[i].getValue() / info.sum * totalArea;\n    // Do not use setLayout({...}, true), because it is needed to clear last layout.\n    viewChildren[i].setLayout({\n      area: area\n    });\n  }\n  if (overLeafDepth) {\n    viewChildren.length && node.setLayout({\n      isLeafRoot: true\n    }, true);\n    viewChildren.length = 0;\n  }\n  node.viewChildren = viewChildren;\n  node.setLayout({\n    dataExtent: info.dataExtent\n  }, true);\n  return viewChildren;\n}\n/**\r\n * Consider 'visibleMin'. Modify viewChildren and get new sum.\r\n */\nfunction filterByThreshold(nodeModel, totalArea, sum, orderBy, orderedChildren) {\n  // visibleMin is not supported yet when no option.sort.\n  if (!orderBy) {\n    return sum;\n  }\n  var visibleMin = nodeModel.get('visibleMin');\n  var len = orderedChildren.length;\n  var deletePoint = len;\n  // Always travel from little value to big value.\n  for (var i = len - 1; i >= 0; i--) {\n    var value = orderedChildren[orderBy === 'asc' ? len - i - 1 : i].getValue();\n    if (value / sum * totalArea < visibleMin) {\n      deletePoint = i;\n      sum -= value;\n    }\n  }\n  orderBy === 'asc' ? orderedChildren.splice(0, len - deletePoint) : orderedChildren.splice(deletePoint, len - deletePoint);\n  return sum;\n}\n/**\r\n * Sort\r\n */\nfunction sort(viewChildren, orderBy) {\n  if (orderBy) {\n    viewChildren.sort(function (a, b) {\n      var diff = orderBy === 'asc' ? a.getValue() - b.getValue() : b.getValue() - a.getValue();\n      return diff === 0 ? orderBy === 'asc' ? a.dataIndex - b.dataIndex : b.dataIndex - a.dataIndex : diff;\n    });\n  }\n  return viewChildren;\n}\n/**\r\n * Statistic\r\n */\nfunction statistic(nodeModel, children, orderBy) {\n  // Calculate sum.\n  var sum = 0;\n  for (var i = 0, len = children.length; i < len; i++) {\n    sum += children[i].getValue();\n  }\n  // Statistic data extent for latter visual coding.\n  // Notice: data extent should be calculate based on raw children\n  // but not filtered view children, otherwise visual mapping will not\n  // be stable when zoom (where children is filtered by visibleMin).\n  var dimension = nodeModel.get('visualDimension');\n  var dataExtent;\n  // The same as area dimension.\n  if (!children || !children.length) {\n    dataExtent = [NaN, NaN];\n  } else if (dimension === 'value' && orderBy) {\n    dataExtent = [children[children.length - 1].getValue(), children[0].getValue()];\n    orderBy === 'asc' && dataExtent.reverse();\n  }\n  // Other dimension.\n  else {\n    dataExtent = [Infinity, -Infinity];\n    each(children, function (child) {\n      var value = child.getValue(dimension);\n      value < dataExtent[0] && (dataExtent[0] = value);\n      value > dataExtent[1] && (dataExtent[1] = value);\n    });\n  }\n  return {\n    sum: sum,\n    dataExtent: dataExtent\n  };\n}\n/**\r\n * Computes the score for the specified row,\r\n * as the worst aspect ratio.\r\n */\nfunction worst(row, rowFixedLength, ratio) {\n  var areaMax = 0;\n  var areaMin = Infinity;\n  for (var i = 0, area = void 0, len = row.length; i < len; i++) {\n    area = row[i].getLayout().area;\n    if (area) {\n      area < areaMin && (areaMin = area);\n      area > areaMax && (areaMax = area);\n    }\n  }\n  var squareArea = row.area * row.area;\n  var f = rowFixedLength * rowFixedLength * ratio;\n  return squareArea ? mathMax(f * areaMax / squareArea, squareArea / (f * areaMin)) : Infinity;\n}\n/**\r\n * Positions the specified row of nodes. Modifies `rect`.\r\n */\nfunction position(row, rowFixedLength, rect, halfGapWidth, flush) {\n  // When rowFixedLength === rect.width,\n  // it is horizontal subdivision,\n  // rowFixedLength is the width of the subdivision,\n  // rowOtherLength is the height of the subdivision,\n  // and nodes will be positioned from left to right.\n  // wh[idx0WhenH] means: when horizontal,\n  //      wh[idx0WhenH] => wh[0] => 'width'.\n  //      xy[idx1WhenH] => xy[1] => 'y'.\n  var idx0WhenH = rowFixedLength === rect.width ? 0 : 1;\n  var idx1WhenH = 1 - idx0WhenH;\n  var xy = ['x', 'y'];\n  var wh = ['width', 'height'];\n  var last = rect[xy[idx0WhenH]];\n  var rowOtherLength = rowFixedLength ? row.area / rowFixedLength : 0;\n  if (flush || rowOtherLength > rect[wh[idx1WhenH]]) {\n    rowOtherLength = rect[wh[idx1WhenH]]; // over+underflow\n  }\n  for (var i = 0, rowLen = row.length; i < rowLen; i++) {\n    var node = row[i];\n    var nodeLayout = {};\n    var step = rowOtherLength ? node.getLayout().area / rowOtherLength : 0;\n    var wh1 = nodeLayout[wh[idx1WhenH]] = mathMax(rowOtherLength - 2 * halfGapWidth, 0);\n    // We use Math.max/min to avoid negative width/height when considering gap width.\n    var remain = rect[xy[idx0WhenH]] + rect[wh[idx0WhenH]] - last;\n    var modWH = i === rowLen - 1 || remain < step ? remain : step;\n    var wh0 = nodeLayout[wh[idx0WhenH]] = mathMax(modWH - 2 * halfGapWidth, 0);\n    nodeLayout[xy[idx1WhenH]] = rect[xy[idx1WhenH]] + mathMin(halfGapWidth, wh1 / 2);\n    nodeLayout[xy[idx0WhenH]] = last + mathMin(halfGapWidth, wh0 / 2);\n    last += modWH;\n    node.setLayout(nodeLayout, true);\n  }\n  rect[xy[idx1WhenH]] += rowOtherLength;\n  rect[wh[idx1WhenH]] -= rowOtherLength;\n}\n// Return [containerWidth, containerHeight] as default.\nfunction estimateRootSize(seriesModel, targetInfo, viewRoot, containerWidth, containerHeight) {\n  // If targetInfo.node exists, we zoom to the node,\n  // so estimate whole width and height by target node.\n  var currNode = (targetInfo || {}).node;\n  var defaultSize = [containerWidth, containerHeight];\n  if (!currNode || currNode === viewRoot) {\n    return defaultSize;\n  }\n  var parent;\n  var viewArea = containerWidth * containerHeight;\n  var area = viewArea * seriesModel.option.zoomToNodeRatio;\n  while (parent = currNode.parentNode) {\n    // jshint ignore:line\n    var sum = 0;\n    var siblings = parent.children;\n    for (var i = 0, len = siblings.length; i < len; i++) {\n      sum += siblings[i].getValue();\n    }\n    var currNodeValue = currNode.getValue();\n    if (currNodeValue === 0) {\n      return defaultSize;\n    }\n    area *= sum / currNodeValue;\n    // Considering border, suppose aspect ratio is 1.\n    var parentModel = parent.getModel();\n    var borderWidth = parentModel.get(PATH_BORDER_WIDTH);\n    var upperHeight = Math.max(borderWidth, getUpperLabelHeight(parentModel));\n    area += 4 * borderWidth * borderWidth + (3 * borderWidth + upperHeight) * Math.pow(area, 0.5);\n    area > MAX_SAFE_INTEGER && (area = MAX_SAFE_INTEGER);\n    currNode = parent;\n  }\n  area < viewArea && (area = viewArea);\n  var scale = Math.pow(area / viewArea, 0.5);\n  return [containerWidth * scale, containerHeight * scale];\n}\n// Root position based on coord of containerGroup\nfunction calculateRootPosition(layoutInfo, rootRect, targetInfo) {\n  if (rootRect) {\n    return {\n      x: rootRect.x,\n      y: rootRect.y\n    };\n  }\n  var defaultPosition = {\n    x: 0,\n    y: 0\n  };\n  if (!targetInfo) {\n    return defaultPosition;\n  }\n  // If targetInfo is fetched by 'retrieveTargetInfo',\n  // old tree and new tree are the same tree,\n  // so the node still exists and we can visit it.\n  var targetNode = targetInfo.node;\n  var layout = targetNode.getLayout();\n  if (!layout) {\n    return defaultPosition;\n  }\n  // Transform coord from local to container.\n  var targetCenter = [layout.width / 2, layout.height / 2];\n  var node = targetNode;\n  while (node) {\n    var nodeLayout = node.getLayout();\n    targetCenter[0] += nodeLayout.x;\n    targetCenter[1] += nodeLayout.y;\n    node = node.parentNode;\n  }\n  return {\n    x: layoutInfo.width / 2 - targetCenter[0],\n    y: layoutInfo.height / 2 - targetCenter[1]\n  };\n}\n// Mark nodes visible for prunning when visual coding and rendering.\n// Prunning depends on layout and root position, so we have to do it after layout.\nfunction prunning(node, clipRect, viewAbovePath, viewRoot, depth) {\n  var nodeLayout = node.getLayout();\n  var nodeInViewAbovePath = viewAbovePath[depth];\n  var isAboveViewRoot = nodeInViewAbovePath && nodeInViewAbovePath === node;\n  if (nodeInViewAbovePath && !isAboveViewRoot || depth === viewAbovePath.length && node !== viewRoot) {\n    return;\n  }\n  node.setLayout({\n    // isInView means: viewRoot sub tree + viewAbovePath\n    isInView: true,\n    // invisible only means: outside view clip so that the node can not\n    // see but still layout for animation preparation but not render.\n    invisible: !isAboveViewRoot && !clipRect.intersect(nodeLayout),\n    isAboveViewRoot: isAboveViewRoot\n  }, true);\n  // Transform to child coordinate.\n  var childClipRect = new BoundingRect(clipRect.x - nodeLayout.x, clipRect.y - nodeLayout.y, clipRect.width, clipRect.height);\n  each(node.viewChildren || [], function (child) {\n    prunning(child, childClipRect, viewAbovePath, viewRoot, depth + 1);\n  });\n}\nfunction getUpperLabelHeight(model) {\n  return model.get(PATH_UPPER_LABEL_SHOW) ? model.get(PATH_UPPER_LABEL_HEIGHT) : 0;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { installTreemapAction } from './treemapAction.js';\nimport TreemapSeriesModel from './TreemapSeries.js';\nimport TreemapView from './TreemapView.js';\nimport treemapVisual from './treemapVisual.js';\nimport treemapLayout from './treemapLayout.js';\nexport function install(registers) {\n  registers.registerSeriesModel(TreemapSeriesModel);\n  registers.registerChartView(TreemapView);\n  registers.registerVisual(treemapVisual);\n  registers.registerLayout(treemapLayout);\n  installTreemapAction(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as axisPointerModelHelper from './modelHelper.js';\nimport * as eventTool from 'zrender/lib/core/event.js';\nimport * as throttleUtil from '../../util/throttle.js';\nimport { makeInner } from '../../util/model.js';\nvar inner = makeInner();\nvar clone = zrUtil.clone;\nvar bind = zrUtil.bind;\n/**\r\n * Base axis pointer class in 2D.\r\n */\nvar BaseAxisPointer = /** @class */function () {\n  function BaseAxisPointer() {\n    this._dragging = false;\n    /**\r\n     * In px, arbitrary value. Do not set too small,\r\n     * no animation is ok for most cases.\r\n     */\n    this.animationThreshold = 15;\n  }\n  /**\r\n   * @implement\r\n   */\n  BaseAxisPointer.prototype.render = function (axisModel, axisPointerModel, api, forceRender) {\n    var value = axisPointerModel.get('value');\n    var status = axisPointerModel.get('status');\n    // Bind them to `this`, not in closure, otherwise they will not\n    // be replaced when user calling setOption in not merge mode.\n    this._axisModel = axisModel;\n    this._axisPointerModel = axisPointerModel;\n    this._api = api;\n    // Optimize: `render` will be called repeatedly during mouse move.\n    // So it is power consuming if performing `render` each time,\n    // especially on mobile device.\n    if (!forceRender && this._lastValue === value && this._lastStatus === status) {\n      return;\n    }\n    this._lastValue = value;\n    this._lastStatus = status;\n    var group = this._group;\n    var handle = this._handle;\n    if (!status || status === 'hide') {\n      // Do not clear here, for animation better.\n      group && group.hide();\n      handle && handle.hide();\n      return;\n    }\n    group && group.show();\n    handle && handle.show();\n    // Otherwise status is 'show'\n    var elOption = {};\n    this.makeElOption(elOption, value, axisModel, axisPointerModel, api);\n    // Enable change axis pointer type.\n    var graphicKey = elOption.graphicKey;\n    if (graphicKey !== this._lastGraphicKey) {\n      this.clear(api);\n    }\n    this._lastGraphicKey = graphicKey;\n    var moveAnimation = this._moveAnimation = this.determineAnimation(axisModel, axisPointerModel);\n    if (!group) {\n      group = this._group = new graphic.Group();\n      this.createPointerEl(group, elOption, axisModel, axisPointerModel);\n      this.createLabelEl(group, elOption, axisModel, axisPointerModel);\n      api.getZr().add(group);\n    } else {\n      var doUpdateProps = zrUtil.curry(updateProps, axisPointerModel, moveAnimation);\n      this.updatePointerEl(group, elOption, doUpdateProps);\n      this.updateLabelEl(group, elOption, doUpdateProps, axisPointerModel);\n    }\n    updateMandatoryProps(group, axisPointerModel, true);\n    this._renderHandle(value);\n  };\n  /**\r\n   * @implement\r\n   */\n  BaseAxisPointer.prototype.remove = function (api) {\n    this.clear(api);\n  };\n  /**\r\n   * @implement\r\n   */\n  BaseAxisPointer.prototype.dispose = function (api) {\n    this.clear(api);\n  };\n  /**\r\n   * @protected\r\n   */\n  BaseAxisPointer.prototype.determineAnimation = function (axisModel, axisPointerModel) {\n    var animation = axisPointerModel.get('animation');\n    var axis = axisModel.axis;\n    var isCategoryAxis = axis.type === 'category';\n    var useSnap = axisPointerModel.get('snap');\n    // Value axis without snap always do not snap.\n    if (!useSnap && !isCategoryAxis) {\n      return false;\n    }\n    if (animation === 'auto' || animation == null) {\n      var animationThreshold = this.animationThreshold;\n      if (isCategoryAxis && axis.getBandWidth() > animationThreshold) {\n        return true;\n      }\n      // It is important to auto animation when snap used. Consider if there is\n      // a dataZoom, animation will be disabled when too many points exist, while\n      // it will be enabled for better visual effect when little points exist.\n      if (useSnap) {\n        var seriesDataCount = axisPointerModelHelper.getAxisInfo(axisModel).seriesDataCount;\n        var axisExtent = axis.getExtent();\n        // Approximate band width\n        return Math.abs(axisExtent[0] - axisExtent[1]) / seriesDataCount > animationThreshold;\n      }\n      return false;\n    }\n    return animation === true;\n  };\n  /**\r\n   * add {pointer, label, graphicKey} to elOption\r\n   * @protected\r\n   */\n  BaseAxisPointer.prototype.makeElOption = function (elOption, value, axisModel, axisPointerModel, api) {\n    // Should be implemenented by sub-class.\n  };\n  /**\r\n   * @protected\r\n   */\n  BaseAxisPointer.prototype.createPointerEl = function (group, elOption, axisModel, axisPointerModel) {\n    var pointerOption = elOption.pointer;\n    if (pointerOption) {\n      var pointerEl = inner(group).pointerEl = new graphic[pointerOption.type](clone(elOption.pointer));\n      group.add(pointerEl);\n    }\n  };\n  /**\r\n   * @protected\r\n   */\n  BaseAxisPointer.prototype.createLabelEl = function (group, elOption, axisModel, axisPointerModel) {\n    if (elOption.label) {\n      var labelEl = inner(group).labelEl = new graphic.Text(clone(elOption.label));\n      group.add(labelEl);\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  };\n  /**\r\n   * @protected\r\n   */\n  BaseAxisPointer.prototype.updatePointerEl = function (group, elOption, updateProps) {\n    var pointerEl = inner(group).pointerEl;\n    if (pointerEl && elOption.pointer) {\n      pointerEl.setStyle(elOption.pointer.style);\n      updateProps(pointerEl, {\n        shape: elOption.pointer.shape\n      });\n    }\n  };\n  /**\r\n   * @protected\r\n   */\n  BaseAxisPointer.prototype.updateLabelEl = function (group, elOption, updateProps, axisPointerModel) {\n    var labelEl = inner(group).labelEl;\n    if (labelEl) {\n      labelEl.setStyle(elOption.label.style);\n      updateProps(labelEl, {\n        // Consider text length change in vertical axis, animation should\n        // be used on shape, otherwise the effect will be weird.\n        // TODOTODO\n        // shape: elOption.label.shape,\n        x: elOption.label.x,\n        y: elOption.label.y\n      });\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  };\n  /**\r\n   * @private\r\n   */\n  BaseAxisPointer.prototype._renderHandle = function (value) {\n    if (this._dragging || !this.updateHandleTransform) {\n      return;\n    }\n    var axisPointerModel = this._axisPointerModel;\n    var zr = this._api.getZr();\n    var handle = this._handle;\n    var handleModel = axisPointerModel.getModel('handle');\n    var status = axisPointerModel.get('status');\n    if (!handleModel.get('show') || !status || status === 'hide') {\n      handle && zr.remove(handle);\n      this._handle = null;\n      return;\n    }\n    var isInit;\n    if (!this._handle) {\n      isInit = true;\n      handle = this._handle = graphic.createIcon(handleModel.get('icon'), {\n        cursor: 'move',\n        draggable: true,\n        onmousemove: function (e) {\n          // For mobile device, prevent screen slider on the button.\n          eventTool.stop(e.event);\n        },\n        onmousedown: bind(this._onHandleDragMove, this, 0, 0),\n        drift: bind(this._onHandleDragMove, this),\n        ondragend: bind(this._onHandleDragEnd, this)\n      });\n      zr.add(handle);\n    }\n    updateMandatoryProps(handle, axisPointerModel, false);\n    // update style\n    handle.setStyle(handleModel.getItemStyle(null, ['color', 'borderColor', 'borderWidth', 'opacity', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY']));\n    // update position\n    var handleSize = handleModel.get('size');\n    if (!zrUtil.isArray(handleSize)) {\n      handleSize = [handleSize, handleSize];\n    }\n    handle.scaleX = handleSize[0] / 2;\n    handle.scaleY = handleSize[1] / 2;\n    throttleUtil.createOrUpdate(this, '_doDispatchAxisPointer', handleModel.get('throttle') || 0, 'fixRate');\n    this._moveHandleToValue(value, isInit);\n  };\n  BaseAxisPointer.prototype._moveHandleToValue = function (value, isInit) {\n    updateProps(this._axisPointerModel, !isInit && this._moveAnimation, this._handle, getHandleTransProps(this.getHandleTransform(value, this._axisModel, this._axisPointerModel)));\n  };\n  BaseAxisPointer.prototype._onHandleDragMove = function (dx, dy) {\n    var handle = this._handle;\n    if (!handle) {\n      return;\n    }\n    this._dragging = true;\n    // Persistent for throttle.\n    var trans = this.updateHandleTransform(getHandleTransProps(handle), [dx, dy], this._axisModel, this._axisPointerModel);\n    this._payloadInfo = trans;\n    handle.stopAnimation();\n    handle.attr(getHandleTransProps(trans));\n    inner(handle).lastProp = null;\n    this._doDispatchAxisPointer();\n  };\n  /**\r\n   * Throttled method.\r\n   */\n  BaseAxisPointer.prototype._doDispatchAxisPointer = function () {\n    var handle = this._handle;\n    if (!handle) {\n      return;\n    }\n    var payloadInfo = this._payloadInfo;\n    var axisModel = this._axisModel;\n    this._api.dispatchAction({\n      type: 'updateAxisPointer',\n      x: payloadInfo.cursorPoint[0],\n      y: payloadInfo.cursorPoint[1],\n      tooltipOption: payloadInfo.tooltipOption,\n      axesInfo: [{\n        axisDim: axisModel.axis.dim,\n        axisIndex: axisModel.componentIndex\n      }]\n    });\n  };\n  BaseAxisPointer.prototype._onHandleDragEnd = function () {\n    this._dragging = false;\n    var handle = this._handle;\n    if (!handle) {\n      return;\n    }\n    var value = this._axisPointerModel.get('value');\n    // Consider snap or categroy axis, handle may be not consistent with\n    // axisPointer. So move handle to align the exact value position when\n    // drag ended.\n    this._moveHandleToValue(value);\n    // For the effect: tooltip will be shown when finger holding on handle\n    // button, and will be hidden after finger left handle button.\n    this._api.dispatchAction({\n      type: 'hideTip'\n    });\n  };\n  /**\r\n   * @private\r\n   */\n  BaseAxisPointer.prototype.clear = function (api) {\n    this._lastValue = null;\n    this._lastStatus = null;\n    var zr = api.getZr();\n    var group = this._group;\n    var handle = this._handle;\n    if (zr && group) {\n      this._lastGraphicKey = null;\n      group && zr.remove(group);\n      handle && zr.remove(handle);\n      this._group = null;\n      this._handle = null;\n      this._payloadInfo = null;\n    }\n    throttleUtil.clear(this, '_doDispatchAxisPointer');\n  };\n  /**\r\n   * @protected\r\n   */\n  BaseAxisPointer.prototype.doClear = function () {\n    // Implemented by sub-class if necessary.\n  };\n  BaseAxisPointer.prototype.buildLabel = function (xy, wh, xDimIndex) {\n    xDimIndex = xDimIndex || 0;\n    return {\n      x: xy[xDimIndex],\n      y: xy[1 - xDimIndex],\n      width: wh[xDimIndex],\n      height: wh[1 - xDimIndex]\n    };\n  };\n  return BaseAxisPointer;\n}();\nfunction updateProps(animationModel, moveAnimation, el, props) {\n  // Animation optimize.\n  if (!propsEqual(inner(el).lastProp, props)) {\n    inner(el).lastProp = props;\n    moveAnimation ? graphic.updateProps(el, props, animationModel) : (el.stopAnimation(), el.attr(props));\n  }\n}\nfunction propsEqual(lastProps, newProps) {\n  if (zrUtil.isObject(lastProps) && zrUtil.isObject(newProps)) {\n    var equals_1 = true;\n    zrUtil.each(newProps, function (item, key) {\n      equals_1 = equals_1 && propsEqual(lastProps[key], item);\n    });\n    return !!equals_1;\n  } else {\n    return lastProps === newProps;\n  }\n}\nfunction updateLabelShowHide(labelEl, axisPointerModel) {\n  labelEl[axisPointerModel.get(['label', 'show']) ? 'show' : 'hide']();\n}\nfunction getHandleTransProps(trans) {\n  return {\n    x: trans.x || 0,\n    y: trans.y || 0,\n    rotation: trans.rotation || 0\n  };\n}\nfunction updateMandatoryProps(group, axisPointerModel, silent) {\n  var z = axisPointerModel.get('z');\n  var zlevel = axisPointerModel.get('zlevel');\n  group && group.traverse(function (el) {\n    if (el.type !== 'group') {\n      z != null && (el.z = z);\n      zlevel != null && (el.zlevel = zlevel);\n      el.silent = silent;\n    }\n  });\n}\nexport default BaseAxisPointer;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as textContain from 'zrender/lib/contain/text.js';\nimport * as formatUtil from '../../util/format.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport * as axisHelper from '../../coord/axisHelper.js';\nimport AxisBuilder from '../axis/AxisBuilder.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nexport function buildElStyle(axisPointerModel) {\n  var axisPointerType = axisPointerModel.get('type');\n  var styleModel = axisPointerModel.getModel(axisPointerType + 'Style');\n  var style;\n  if (axisPointerType === 'line') {\n    style = styleModel.getLineStyle();\n    style.fill = null;\n  } else if (axisPointerType === 'shadow') {\n    style = styleModel.getAreaStyle();\n    style.stroke = null;\n  }\n  return style;\n}\n/**\r\n * @param {Function} labelPos {align, verticalAlign, position}\r\n */\nexport function buildLabelElOption(elOption, axisModel, axisPointerModel, api, labelPos) {\n  var value = axisPointerModel.get('value');\n  var text = getValueLabel(value, axisModel.axis, axisModel.ecModel, axisPointerModel.get('seriesDataIndices'), {\n    precision: axisPointerModel.get(['label', 'precision']),\n    formatter: axisPointerModel.get(['label', 'formatter'])\n  });\n  var labelModel = axisPointerModel.getModel('label');\n  var paddings = formatUtil.normalizeCssArray(labelModel.get('padding') || 0);\n  var font = labelModel.getFont();\n  var textRect = textContain.getBoundingRect(text, font);\n  var position = labelPos.position;\n  var width = textRect.width + paddings[1] + paddings[3];\n  var height = textRect.height + paddings[0] + paddings[2];\n  // Adjust by align.\n  var align = labelPos.align;\n  align === 'right' && (position[0] -= width);\n  align === 'center' && (position[0] -= width / 2);\n  var verticalAlign = labelPos.verticalAlign;\n  verticalAlign === 'bottom' && (position[1] -= height);\n  verticalAlign === 'middle' && (position[1] -= height / 2);\n  // Not overflow ec container\n  confineInContainer(position, width, height, api);\n  var bgColor = labelModel.get('backgroundColor');\n  if (!bgColor || bgColor === 'auto') {\n    bgColor = axisModel.get(['axisLine', 'lineStyle', 'color']);\n  }\n  elOption.label = {\n    // shape: {x: 0, y: 0, width: width, height: height, r: labelModel.get('borderRadius')},\n    x: position[0],\n    y: position[1],\n    style: createTextStyle(labelModel, {\n      text: text,\n      font: font,\n      fill: labelModel.getTextColor(),\n      padding: paddings,\n      backgroundColor: bgColor\n    }),\n    // Label should be over axisPointer.\n    z2: 10\n  };\n}\n// Do not overflow ec container\nfunction confineInContainer(position, width, height, api) {\n  var viewWidth = api.getWidth();\n  var viewHeight = api.getHeight();\n  position[0] = Math.min(position[0] + width, viewWidth) - width;\n  position[1] = Math.min(position[1] + height, viewHeight) - height;\n  position[0] = Math.max(position[0], 0);\n  position[1] = Math.max(position[1], 0);\n}\nexport function getValueLabel(value, axis, ecModel, seriesDataIndices, opt) {\n  value = axis.scale.parse(value);\n  var text = axis.scale.getLabel({\n    value: value\n  }, {\n    // If `precision` is set, width can be fixed (like '12.00500'), which\n    // helps to debounce when when moving label.\n    precision: opt.precision\n  });\n  var formatter = opt.formatter;\n  if (formatter) {\n    var params_1 = {\n      value: axisHelper.getAxisRawValue(axis, {\n        value: value\n      }),\n      axisDimension: axis.dim,\n      axisIndex: axis.index,\n      seriesData: []\n    };\n    zrUtil.each(seriesDataIndices, function (idxItem) {\n      var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n      var dataIndex = idxItem.dataIndexInside;\n      var dataParams = series && series.getDataParams(dataIndex);\n      dataParams && params_1.seriesData.push(dataParams);\n    });\n    if (zrUtil.isString(formatter)) {\n      text = formatter.replace('{value}', text);\n    } else if (zrUtil.isFunction(formatter)) {\n      text = formatter(params_1);\n    }\n  }\n  return text;\n}\nexport function getTransformedPosition(axis, value, layoutInfo) {\n  var transform = matrix.create();\n  matrix.rotate(transform, transform, layoutInfo.rotation);\n  matrix.translate(transform, transform, layoutInfo.position);\n  return graphic.applyTransform([axis.dataToCoord(value), (layoutInfo.labelOffset || 0) + (layoutInfo.labelDirection || 1) * (layoutInfo.labelMargin || 0)], transform);\n}\nexport function buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api) {\n  // @ts-ignore\n  var textLayout = AxisBuilder.innerTextLayout(layoutInfo.rotation, 0, layoutInfo.labelDirection);\n  layoutInfo.labelMargin = axisPointerModel.get(['label', 'margin']);\n  buildLabelElOption(elOption, axisModel, axisPointerModel, api, {\n    position: getTransformedPosition(axisModel.axis, value, layoutInfo),\n    align: textLayout.textAlign,\n    verticalAlign: textLayout.textVerticalAlign\n  });\n}\nexport function makeLineShape(p1, p2, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x1: p1[xDimIndex],\n    y1: p1[1 - xDimIndex],\n    x2: p2[xDimIndex],\n    y2: p2[1 - xDimIndex]\n  };\n}\nexport function makeRectShape(xy, wh, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x: xy[xDimIndex],\n    y: xy[1 - xDimIndex],\n    width: wh[xDimIndex],\n    height: wh[1 - xDimIndex]\n  };\n}\nexport function makeSectorShape(cx, cy, r0, r, startAngle, endAngle) {\n  return {\n    cx: cx,\n    cy: cy,\n    r0: r0,\n    r: r,\n    startAngle: startAngle,\n    endAngle: endAngle,\n    clockwise: true\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport BaseAxisPointer from './BaseAxisPointer.js';\nimport * as viewHelper from './viewHelper.js';\nimport * as cartesianAxisHelper from '../../coord/cartesian/cartesianAxisHelper.js';\nvar CartesianAxisPointer = /** @class */function (_super) {\n  __extends(CartesianAxisPointer, _super);\n  function CartesianAxisPointer() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\r\n   * @override\r\n   */\n  CartesianAxisPointer.prototype.makeElOption = function (elOption, value, axisModel, axisPointerModel, api) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisPointerType = axisPointerModel.get('type');\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var pixelValue = axis.toGlobalCoord(axis.dataToCoord(value, true));\n    if (axisPointerType && axisPointerType !== 'none') {\n      var elStyle = viewHelper.buildElStyle(axisPointerModel);\n      var pointerOption = pointerShapeBuilder[axisPointerType](axis, pixelValue, otherExtent);\n      pointerOption.style = elStyle;\n      elOption.graphicKey = pointerOption.type;\n      elOption.pointer = pointerOption;\n    }\n    var layoutInfo = cartesianAxisHelper.layout(grid.model, axisModel);\n    viewHelper.buildCartesianSingleLabelElOption(\n    // @ts-ignore\n    value, elOption, layoutInfo, axisModel, axisPointerModel, api);\n  };\n  /**\r\n   * @override\r\n   */\n  CartesianAxisPointer.prototype.getHandleTransform = function (value, axisModel, axisPointerModel) {\n    var layoutInfo = cartesianAxisHelper.layout(axisModel.axis.grid.model, axisModel, {\n      labelInside: false\n    });\n    // @ts-ignore\n    layoutInfo.labelMargin = axisPointerModel.get(['handle', 'margin']);\n    var pos = viewHelper.getTransformedPosition(axisModel.axis, value, layoutInfo);\n    return {\n      x: pos[0],\n      y: pos[1],\n      rotation: layoutInfo.rotation + (layoutInfo.labelDirection < 0 ? Math.PI : 0)\n    };\n  };\n  /**\r\n   * @override\r\n   */\n  CartesianAxisPointer.prototype.updateHandleTransform = function (transform, delta, axisModel, axisPointerModel) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisExtent = axis.getGlobalExtent(true);\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var dimIndex = axis.dim === 'x' ? 0 : 1;\n    var currPosition = [transform.x, transform.y];\n    currPosition[dimIndex] += delta[dimIndex];\n    currPosition[dimIndex] = Math.min(axisExtent[1], currPosition[dimIndex]);\n    currPosition[dimIndex] = Math.max(axisExtent[0], currPosition[dimIndex]);\n    var cursorOtherValue = (otherExtent[1] + otherExtent[0]) / 2;\n    var cursorPoint = [cursorOtherValue, cursorOtherValue];\n    cursorPoint[dimIndex] = currPosition[dimIndex];\n    // Make tooltip do not overlap axisPointer and in the middle of the grid.\n    var tooltipOptions = [{\n      verticalAlign: 'middle'\n    }, {\n      align: 'center'\n    }];\n    return {\n      x: currPosition[0],\n      y: currPosition[1],\n      rotation: transform.rotation,\n      cursorPoint: cursorPoint,\n      tooltipOption: tooltipOptions[dimIndex]\n    };\n  };\n  return CartesianAxisPointer;\n}(BaseAxisPointer);\nfunction getCartesian(grid, axis) {\n  var opt = {};\n  opt[axis.dim + 'AxisIndex'] = axis.index;\n  return grid.getCartesian(opt);\n}\nvar pointerShapeBuilder = {\n  line: function (axis, pixelValue, otherExtent) {\n    var targetShape = viewHelper.makeLineShape([pixelValue, otherExtent[0]], [pixelValue, otherExtent[1]], getAxisDimIndex(axis));\n    return {\n      type: 'Line',\n      subPixelOptimize: true,\n      shape: targetShape\n    };\n  },\n  shadow: function (axis, pixelValue, otherExtent) {\n    var bandWidth = Math.max(1, axis.getBandWidth());\n    var span = otherExtent[1] - otherExtent[0];\n    return {\n      type: 'Rect',\n      shape: viewHelper.makeRectShape([pixelValue - bandWidth / 2, otherExtent[0]], [bandWidth, span], getAxisDimIndex(axis))\n    };\n  }\n};\nfunction getAxisDimIndex(axis) {\n  return axis.dim === 'x' ? 0 : 1;\n}\nexport default CartesianAxisPointer;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component.js';\nvar AxisPointerModel = /** @class */function (_super) {\n  __extends(AxisPointerModel, _super);\n  function AxisPointerModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = AxisPointerModel.type;\n    return _this;\n  }\n  AxisPointerModel.type = 'axisPointer';\n  AxisPointerModel.defaultOption = {\n    // 'auto' means that show when triggered by tooltip or handle.\n    show: 'auto',\n    // zlevel: 0,\n    z: 50,\n    type: 'line',\n    // axispointer triggered by tootip determine snap automatically,\n    // see `modelHelper`.\n    snap: false,\n    triggerTooltip: true,\n    triggerEmphasis: true,\n    value: null,\n    status: null,\n    link: [],\n    // Do not set 'auto' here, otherwise global animation: false\n    // will not effect at this axispointer.\n    animation: null,\n    animationDurationUpdate: 200,\n    lineStyle: {\n      color: '#B9BEC9',\n      width: 1,\n      type: 'dashed'\n    },\n    shadowStyle: {\n      color: 'rgba(210,219,238,0.2)'\n    },\n    label: {\n      show: true,\n      formatter: null,\n      precision: 'auto',\n      margin: 3,\n      color: '#fff',\n      padding: [5, 7, 5, 7],\n      backgroundColor: 'auto',\n      borderColor: null,\n      borderWidth: 0,\n      borderRadius: 3\n    },\n    handle: {\n      show: false,\n      // eslint-disable-next-line\n      icon: 'M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z',\n      size: 45,\n      // handle margin is from symbol center to axis, which is stable when circular move.\n      margin: 50,\n      // color: '#1b8bbd'\n      // color: '#2f4554'\n      color: '#333',\n      shadowBlur: 3,\n      shadowColor: '#aaa',\n      shadowOffsetX: 0,\n      shadowOffsetY: 2,\n      // For mobile performance\n      throttle: 40\n    }\n  };\n  return AxisPointerModel;\n}(ComponentModel);\nexport default AxisPointerModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport { makeInner } from '../../util/model.js';\nvar inner = makeInner();\nvar each = zrUtil.each;\n/**\r\n * @param {string} key\r\n * @param {module:echarts/ExtensionAPI} api\r\n * @param {Function} handler\r\n *      param: {string} currTrigger\r\n *      param: {Array.<number>} point\r\n */\nexport function register(key, api, handler) {\n  if (env.node) {\n    return;\n  }\n  var zr = api.getZr();\n  inner(zr).records || (inner(zr).records = {});\n  initGlobalListeners(zr, api);\n  var record = inner(zr).records[key] || (inner(zr).records[key] = {});\n  record.handler = handler;\n}\nfunction initGlobalListeners(zr, api) {\n  if (inner(zr).initialized) {\n    return;\n  }\n  inner(zr).initialized = true;\n  useHandler('click', zrUtil.curry(doEnter, 'click'));\n  useHandler('mousemove', zrUtil.curry(doEnter, 'mousemove'));\n  // useHandler('mouseout', onLeave);\n  useHandler('globalout', onLeave);\n  function useHandler(eventType, cb) {\n    zr.on(eventType, function (e) {\n      var dis = makeDispatchAction(api);\n      each(inner(zr).records, function (record) {\n        record && cb(record, e, dis.dispatchAction);\n      });\n      dispatchTooltipFinally(dis.pendings, api);\n    });\n  }\n}\nfunction dispatchTooltipFinally(pendings, api) {\n  var showLen = pendings.showTip.length;\n  var hideLen = pendings.hideTip.length;\n  var actuallyPayload;\n  if (showLen) {\n    actuallyPayload = pendings.showTip[showLen - 1];\n  } else if (hideLen) {\n    actuallyPayload = pendings.hideTip[hideLen - 1];\n  }\n  if (actuallyPayload) {\n    actuallyPayload.dispatchAction = null;\n    api.dispatchAction(actuallyPayload);\n  }\n}\nfunction onLeave(record, e, dispatchAction) {\n  record.handler('leave', null, dispatchAction);\n}\nfunction doEnter(currTrigger, record, e, dispatchAction) {\n  record.handler(currTrigger, e, dispatchAction);\n}\nfunction makeDispatchAction(api) {\n  var pendings = {\n    showTip: [],\n    hideTip: []\n  };\n  // FIXME\n  // better approach?\n  // 'showTip' and 'hideTip' can be triggered by axisPointer and tooltip,\n  // which may be conflict, (axisPointer call showTip but tooltip call hideTip);\n  // So we have to add \"final stage\" to merge those dispatched actions.\n  var dispatchAction = function (payload) {\n    var pendingList = pendings[payload.type];\n    if (pendingList) {\n      pendingList.push(payload);\n    } else {\n      payload.dispatchAction = dispatchAction;\n      api.dispatchAction(payload);\n    }\n  };\n  return {\n    dispatchAction: dispatchAction,\n    pendings: pendings\n  };\n}\nexport function unregister(key, api) {\n  if (env.node) {\n    return;\n  }\n  var zr = api.getZr();\n  var record = (inner(zr).records || {})[key];\n  if (record) {\n    inner(zr).records[key] = null;\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as globalListener from './globalListener.js';\nimport ComponentView from '../../view/Component.js';\nvar AxisPointerView = /** @class */function (_super) {\n  __extends(AxisPointerView, _super);\n  function AxisPointerView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = AxisPointerView.type;\n    return _this;\n  }\n  AxisPointerView.prototype.render = function (globalAxisPointerModel, ecModel, api) {\n    var globalTooltipModel = ecModel.getComponent('tooltip');\n    var triggerOn = globalAxisPointerModel.get('triggerOn') || globalTooltipModel && globalTooltipModel.get('triggerOn') || 'mousemove|click';\n    // Register global listener in AxisPointerView to enable\n    // AxisPointerView to be independent to Tooltip.\n    globalListener.register('axisPointer', api, function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none' && (currTrigger === 'leave' || triggerOn.indexOf(currTrigger) >= 0)) {\n        dispatchAction({\n          type: 'updateAxisPointer',\n          currTrigger: currTrigger,\n          x: e && e.offsetX,\n          y: e && e.offsetY\n        });\n      }\n    });\n  };\n  AxisPointerView.prototype.remove = function (ecModel, api) {\n    globalListener.unregister('axisPointer', api);\n  };\n  AxisPointerView.prototype.dispose = function (ecModel, api) {\n    globalListener.unregister('axisPointer', api);\n  };\n  AxisPointerView.type = 'axisPointer';\n  return AxisPointerView;\n}(ComponentView);\nexport default AxisPointerView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as modelUtil from '../../util/model.js';\n/**\r\n * @param finder contains {seriesIndex, dataIndex, dataIndexInside}\r\n * @param ecModel\r\n * @return  {point: [x, y], el: ...} point Will not be null.\r\n */\nexport default function findPointFromSeries(finder, ecModel) {\n  var point = [];\n  var seriesIndex = finder.seriesIndex;\n  var seriesModel;\n  if (seriesIndex == null || !(seriesModel = ecModel.getSeriesByIndex(seriesIndex))) {\n    return {\n      point: []\n    };\n  }\n  var data = seriesModel.getData();\n  var dataIndex = modelUtil.queryDataIndex(data, finder);\n  if (dataIndex == null || dataIndex < 0 || zrUtil.isArray(dataIndex)) {\n    return {\n      point: []\n    };\n  }\n  var el = data.getItemGraphicEl(dataIndex);\n  var coordSys = seriesModel.coordinateSystem;\n  if (seriesModel.getTooltipPosition) {\n    point = seriesModel.getTooltipPosition(dataIndex) || [];\n  } else if (coordSys && coordSys.dataToPoint) {\n    if (finder.isStacked) {\n      var baseAxis = coordSys.getBaseAxis();\n      var valueAxis = coordSys.getOtherAxis(baseAxis);\n      var valueAxisDim = valueAxis.dim;\n      var baseAxisDim = baseAxis.dim;\n      var baseDataOffset = valueAxisDim === 'x' || valueAxisDim === 'radius' ? 1 : 0;\n      var baseDim = data.mapDimension(baseAxisDim);\n      var stackedData = [];\n      stackedData[baseDataOffset] = data.get(baseDim, dataIndex);\n      stackedData[1 - baseDataOffset] = data.get(data.getCalculationInfo('stackResultDimension'), dataIndex);\n      point = coordSys.dataToPoint(stackedData) || [];\n    } else {\n      point = coordSys.dataToPoint(data.getValues(zrUtil.map(coordSys.dimensions, function (dim) {\n        return data.mapDimension(dim);\n      }), dataIndex)) || [];\n    }\n  } else if (el) {\n    // Use graphic bounding rect\n    var rect = el.getBoundingRect().clone();\n    rect.applyTransform(el.transform);\n    point = [rect.x + rect.width / 2, rect.y + rect.height / 2];\n  }\n  return {\n    point: point,\n    el: el\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { makeInner } from '../../util/model.js';\nimport * as modelHelper from './modelHelper.js';\nimport findPointFromSeries from './findPointFromSeries.js';\nimport { each, curry, bind, extend } from 'zrender/lib/core/util.js';\nvar inner = makeInner();\n/**\r\n * Basic logic: check all axis, if they do not demand show/highlight,\r\n * then hide/downplay them.\r\n *\r\n * @return content of event obj for echarts.connect.\r\n */\nexport default function axisTrigger(payload, ecModel, api) {\n  var currTrigger = payload.currTrigger;\n  var point = [payload.x, payload.y];\n  var finder = payload;\n  var dispatchAction = payload.dispatchAction || bind(api.dispatchAction, api);\n  var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo;\n  // Pending\n  // See #6121. But we are not able to reproduce it yet.\n  if (!coordSysAxesInfo) {\n    return;\n  }\n  if (illegalPoint(point)) {\n    // Used in the default behavior of `connection`: use the sample seriesIndex\n    // and dataIndex. And also used in the tooltipView trigger.\n    point = findPointFromSeries({\n      seriesIndex: finder.seriesIndex,\n      // Do not use dataIndexInside from other ec instance.\n      // FIXME: auto detect it?\n      dataIndex: finder.dataIndex\n    }, ecModel).point;\n  }\n  var isIllegalPoint = illegalPoint(point);\n  // Axis and value can be specified when calling dispatchAction({type: 'updateAxisPointer'}).\n  // Notice: In this case, it is difficult to get the `point` (which is necessary to show\n  // tooltip, so if point is not given, we just use the point found by sample seriesIndex\n  // and dataIndex.\n  var inputAxesInfo = finder.axesInfo;\n  var axesInfo = coordSysAxesInfo.axesInfo;\n  var shouldHide = currTrigger === 'leave' || illegalPoint(point);\n  var outputPayload = {};\n  var showValueMap = {};\n  var dataByCoordSys = {\n    list: [],\n    map: {}\n  };\n  var updaters = {\n    showPointer: curry(showPointer, showValueMap),\n    showTooltip: curry(showTooltip, dataByCoordSys)\n  };\n  // Process for triggered axes.\n  each(coordSysAxesInfo.coordSysMap, function (coordSys, coordSysKey) {\n    // If a point given, it must be contained by the coordinate system.\n    var coordSysContainsPoint = isIllegalPoint || coordSys.containPoint(point);\n    each(coordSysAxesInfo.coordSysAxesInfo[coordSysKey], function (axisInfo, key) {\n      var axis = axisInfo.axis;\n      var inputAxisInfo = findInputAxisInfo(inputAxesInfo, axisInfo);\n      // If no inputAxesInfo, no axis is restricted.\n      if (!shouldHide && coordSysContainsPoint && (!inputAxesInfo || inputAxisInfo)) {\n        var val = inputAxisInfo && inputAxisInfo.value;\n        if (val == null && !isIllegalPoint) {\n          val = axis.pointToData(point);\n        }\n        val != null && processOnAxis(axisInfo, val, updaters, false, outputPayload);\n      }\n    });\n  });\n  // Process for linked axes.\n  var linkTriggers = {};\n  each(axesInfo, function (tarAxisInfo, tarKey) {\n    var linkGroup = tarAxisInfo.linkGroup;\n    // If axis has been triggered in the previous stage, it should not be triggered by link.\n    if (linkGroup && !showValueMap[tarKey]) {\n      each(linkGroup.axesInfo, function (srcAxisInfo, srcKey) {\n        var srcValItem = showValueMap[srcKey];\n        // If srcValItem exist, source axis is triggered, so link to target axis.\n        if (srcAxisInfo !== tarAxisInfo && srcValItem) {\n          var val = srcValItem.value;\n          linkGroup.mapper && (val = tarAxisInfo.axis.scale.parse(linkGroup.mapper(val, makeMapperParam(srcAxisInfo), makeMapperParam(tarAxisInfo))));\n          linkTriggers[tarAxisInfo.key] = val;\n        }\n      });\n    }\n  });\n  each(linkTriggers, function (val, tarKey) {\n    processOnAxis(axesInfo[tarKey], val, updaters, true, outputPayload);\n  });\n  updateModelActually(showValueMap, axesInfo, outputPayload);\n  dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction);\n  dispatchHighDownActually(axesInfo, dispatchAction, api);\n  return outputPayload;\n}\nfunction processOnAxis(axisInfo, newValue, updaters, noSnap, outputFinder) {\n  var axis = axisInfo.axis;\n  if (axis.scale.isBlank() || !axis.containData(newValue)) {\n    return;\n  }\n  if (!axisInfo.involveSeries) {\n    updaters.showPointer(axisInfo, newValue);\n    return;\n  }\n  // Heavy calculation. So put it after axis.containData checking.\n  var payloadInfo = buildPayloadsBySeries(newValue, axisInfo);\n  var payloadBatch = payloadInfo.payloadBatch;\n  var snapToValue = payloadInfo.snapToValue;\n  // Fill content of event obj for echarts.connect.\n  // By default use the first involved series data as a sample to connect.\n  if (payloadBatch[0] && outputFinder.seriesIndex == null) {\n    extend(outputFinder, payloadBatch[0]);\n  }\n  // If no linkSource input, this process is for collecting link\n  // target, where snap should not be accepted.\n  if (!noSnap && axisInfo.snap) {\n    if (axis.containData(snapToValue) && snapToValue != null) {\n      newValue = snapToValue;\n    }\n  }\n  updaters.showPointer(axisInfo, newValue, payloadBatch);\n  // Tooltip should always be snapToValue, otherwise there will be\n  // incorrect \"axis value ~ series value\" mapping displayed in tooltip.\n  updaters.showTooltip(axisInfo, payloadInfo, snapToValue);\n}\nfunction buildPayloadsBySeries(value, axisInfo) {\n  var axis = axisInfo.axis;\n  var dim = axis.dim;\n  var snapToValue = value;\n  var payloadBatch = [];\n  var minDist = Number.MAX_VALUE;\n  var minDiff = -1;\n  each(axisInfo.seriesModels, function (series, idx) {\n    var dataDim = series.getData().mapDimensionsAll(dim);\n    var seriesNestestValue;\n    var dataIndices;\n    if (series.getAxisTooltipData) {\n      var result = series.getAxisTooltipData(dataDim, value, axis);\n      dataIndices = result.dataIndices;\n      seriesNestestValue = result.nestestValue;\n    } else {\n      dataIndices = series.getData().indicesOfNearest(dataDim[0], value,\n      // Add a threshold to avoid find the wrong dataIndex\n      // when data length is not same.\n      // false,\n      axis.type === 'category' ? 0.5 : null);\n      if (!dataIndices.length) {\n        return;\n      }\n      seriesNestestValue = series.getData().get(dataDim[0], dataIndices[0]);\n    }\n    if (seriesNestestValue == null || !isFinite(seriesNestestValue)) {\n      return;\n    }\n    var diff = value - seriesNestestValue;\n    var dist = Math.abs(diff);\n    // Consider category case\n    if (dist <= minDist) {\n      if (dist < minDist || diff >= 0 && minDiff < 0) {\n        minDist = dist;\n        minDiff = diff;\n        snapToValue = seriesNestestValue;\n        payloadBatch.length = 0;\n      }\n      each(dataIndices, function (dataIndex) {\n        payloadBatch.push({\n          seriesIndex: series.seriesIndex,\n          dataIndexInside: dataIndex,\n          dataIndex: series.getData().getRawIndex(dataIndex)\n        });\n      });\n    }\n  });\n  return {\n    payloadBatch: payloadBatch,\n    snapToValue: snapToValue\n  };\n}\nfunction showPointer(showValueMap, axisInfo, value, payloadBatch) {\n  showValueMap[axisInfo.key] = {\n    value: value,\n    payloadBatch: payloadBatch\n  };\n}\nfunction showTooltip(dataByCoordSys, axisInfo, payloadInfo, value) {\n  var payloadBatch = payloadInfo.payloadBatch;\n  var axis = axisInfo.axis;\n  var axisModel = axis.model;\n  var axisPointerModel = axisInfo.axisPointerModel;\n  // If no data, do not create anything in dataByCoordSys,\n  // whose length will be used to judge whether dispatch action.\n  if (!axisInfo.triggerTooltip || !payloadBatch.length) {\n    return;\n  }\n  var coordSysModel = axisInfo.coordSys.model;\n  var coordSysKey = modelHelper.makeKey(coordSysModel);\n  var coordSysItem = dataByCoordSys.map[coordSysKey];\n  if (!coordSysItem) {\n    coordSysItem = dataByCoordSys.map[coordSysKey] = {\n      coordSysId: coordSysModel.id,\n      coordSysIndex: coordSysModel.componentIndex,\n      coordSysType: coordSysModel.type,\n      coordSysMainType: coordSysModel.mainType,\n      dataByAxis: []\n    };\n    dataByCoordSys.list.push(coordSysItem);\n  }\n  coordSysItem.dataByAxis.push({\n    axisDim: axis.dim,\n    axisIndex: axisModel.componentIndex,\n    axisType: axisModel.type,\n    axisId: axisModel.id,\n    value: value,\n    // Caustion: viewHelper.getValueLabel is actually on \"view stage\", which\n    // depends that all models have been updated. So it should not be performed\n    // here. Considering axisPointerModel used here is volatile, which is hard\n    // to be retrieve in TooltipView, we prepare parameters here.\n    valueLabelOpt: {\n      precision: axisPointerModel.get(['label', 'precision']),\n      formatter: axisPointerModel.get(['label', 'formatter'])\n    },\n    seriesDataIndices: payloadBatch.slice()\n  });\n}\nfunction updateModelActually(showValueMap, axesInfo, outputPayload) {\n  var outputAxesInfo = outputPayload.axesInfo = [];\n  // Basic logic: If no 'show' required, 'hide' this axisPointer.\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    var valItem = showValueMap[key];\n    if (valItem) {\n      !axisInfo.useHandle && (option.status = 'show');\n      option.value = valItem.value;\n      // For label formatter param and highlight.\n      option.seriesDataIndices = (valItem.payloadBatch || []).slice();\n    }\n    // When always show (e.g., handle used), remain\n    // original value and status.\n    else {\n      // If hide, value still need to be set, consider\n      // click legend to toggle axis blank.\n      !axisInfo.useHandle && (option.status = 'hide');\n    }\n    // If status is 'hide', should be no info in payload.\n    option.status === 'show' && outputAxesInfo.push({\n      axisDim: axisInfo.axis.dim,\n      axisIndex: axisInfo.axis.model.componentIndex,\n      value: option.value\n    });\n  });\n}\nfunction dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction) {\n  // Basic logic: If no showTip required, hideTip will be dispatched.\n  if (illegalPoint(point) || !dataByCoordSys.list.length) {\n    dispatchAction({\n      type: 'hideTip'\n    });\n    return;\n  }\n  // In most case only one axis (or event one series is used). It is\n  // convenient to fetch payload.seriesIndex and payload.dataIndex\n  // directly. So put the first seriesIndex and dataIndex of the first\n  // axis on the payload.\n  var sampleItem = ((dataByCoordSys.list[0].dataByAxis[0] || {}).seriesDataIndices || [])[0] || {};\n  dispatchAction({\n    type: 'showTip',\n    escapeConnect: true,\n    x: point[0],\n    y: point[1],\n    tooltipOption: payload.tooltipOption,\n    position: payload.position,\n    dataIndexInside: sampleItem.dataIndexInside,\n    dataIndex: sampleItem.dataIndex,\n    seriesIndex: sampleItem.seriesIndex,\n    dataByCoordSys: dataByCoordSys.list\n  });\n}\nfunction dispatchHighDownActually(axesInfo, dispatchAction, api) {\n  // FIXME\n  // highlight status modification should be a stage of main process?\n  // (Consider confilct (e.g., legend and axisPointer) and setOption)\n  var zr = api.getZr();\n  var highDownKey = 'axisPointerLastHighlights';\n  var lastHighlights = inner(zr)[highDownKey] || {};\n  var newHighlights = inner(zr)[highDownKey] = {};\n  // Update highlight/downplay status according to axisPointer model.\n  // Build hash map and remove duplicate incidentally.\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    option.status === 'show' && axisInfo.triggerEmphasis && each(option.seriesDataIndices, function (batchItem) {\n      var key = batchItem.seriesIndex + ' | ' + batchItem.dataIndex;\n      newHighlights[key] = batchItem;\n    });\n  });\n  // Diff.\n  var toHighlight = [];\n  var toDownplay = [];\n  each(lastHighlights, function (batchItem, key) {\n    !newHighlights[key] && toDownplay.push(batchItem);\n  });\n  each(newHighlights, function (batchItem, key) {\n    !lastHighlights[key] && toHighlight.push(batchItem);\n  });\n  toDownplay.length && api.dispatchAction({\n    type: 'downplay',\n    escapeConnect: true,\n    // Not blur others when highlight in axisPointer.\n    notBlur: true,\n    batch: toDownplay\n  });\n  toHighlight.length && api.dispatchAction({\n    type: 'highlight',\n    escapeConnect: true,\n    // Not blur others when highlight in axisPointer.\n    notBlur: true,\n    batch: toHighlight\n  });\n}\nfunction findInputAxisInfo(inputAxesInfo, axisInfo) {\n  for (var i = 0; i < (inputAxesInfo || []).length; i++) {\n    var inputAxisInfo = inputAxesInfo[i];\n    if (axisInfo.axis.dim === inputAxisInfo.axisDim && axisInfo.axis.model.componentIndex === inputAxisInfo.axisIndex) {\n      return inputAxisInfo;\n    }\n  }\n}\nfunction makeMapperParam(axisInfo) {\n  var axisModel = axisInfo.axis.model;\n  var item = {};\n  var dim = item.axisDim = axisInfo.axis.dim;\n  item.axisIndex = item[dim + 'AxisIndex'] = axisModel.componentIndex;\n  item.axisName = item[dim + 'AxisName'] = axisModel.name;\n  item.axisId = item[dim + 'AxisId'] = axisModel.id;\n  return item;\n}\nfunction illegalPoint(point) {\n  return !point || point[0] == null || isNaN(point[0]) || point[1] == null || isNaN(point[1]);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport AxisView from '../axis/AxisView.js';\nimport CartesianAxisPointer from './CartesianAxisPointer.js';\nimport AxisPointerModel from './AxisPointerModel.js';\nimport AxisPointerView from './AxisPointerView.js';\nimport { isArray } from 'zrender/lib/core/util.js';\nimport { collect } from './modelHelper.js';\nimport axisTrigger from './axisTrigger.js';\nexport function install(registers) {\n  // CartesianAxisPointer is not supposed to be required here. But consider\n  // echarts.simple.js and online build tooltip, which only require gridSimple,\n  // CartesianAxisPointer should be able to required somewhere.\n  AxisView.registerAxisPointerClass('CartesianAxisPointer', CartesianAxisPointer);\n  registers.registerComponentModel(AxisPointerModel);\n  registers.registerComponentView(AxisPointerView);\n  registers.registerPreprocessor(function (option) {\n    // Always has a global axisPointerModel for default setting.\n    if (option) {\n      (!option.axisPointer || option.axisPointer.length === 0) && (option.axisPointer = {});\n      var link = option.axisPointer.link;\n      // Normalize to array to avoid object mergin. But if link\n      // is not set, remain null/undefined, otherwise it will\n      // override existent link setting.\n      if (link && !isArray(link)) {\n        option.axisPointer.link = [link];\n      }\n    }\n  });\n  // This process should proformed after coordinate systems created\n  // and series data processed. So put it on statistic processing stage.\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, function (ecModel, api) {\n    // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n    // allAxesInfo should be updated when setOption performed.\n    ecModel.getComponent('axisPointer').coordSysAxesInfo = collect(ecModel, api);\n  });\n  // Broadcast to all views.\n  registers.registerAction({\n    type: 'updateAxisPointer',\n    event: 'updateAxisPointer',\n    update: ':updateAxisPointer'\n  }, axisTrigger);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { install as installSimple } from './installSimple.js';\nimport { install as installAxisPointer } from '../axisPointer/install.js';\nimport { use } from '../../extension.js';\nexport function install(registers) {\n  use(installSimple);\n  use(installAxisPointer);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n// @ts-nocheck\nimport { getLayoutRect, box as layoutBox, positionElement } from '../../util/layout.js';\nimport * as formatUtil from '../../util/format.js';\nimport * as graphic from '../../util/graphic.js';\n/**\r\n * Layout list like component.\r\n * It will box layout each items in group of component and then position the whole group in the viewport\r\n * @param {module:zrender/group/Group} group\r\n * @param {module:echarts/model/Component} componentModel\r\n * @param {module:echarts/ExtensionAPI}\r\n */\nexport function layout(group, componentModel, api) {\n  var boxLayoutParams = componentModel.getBoxLayoutParams();\n  var padding = componentModel.get('padding');\n  var viewportSize = {\n    width: api.getWidth(),\n    height: api.getHeight()\n  };\n  var rect = getLayoutRect(boxLayoutParams, viewportSize, padding);\n  layoutBox(componentModel.get('orient'), group, componentModel.get('itemGap'), rect.width, rect.height);\n  positionElement(group, boxLayoutParams, viewportSize, padding);\n}\nexport function makeBackground(rect, componentModel) {\n  var padding = formatUtil.normalizeCssArray(componentModel.get('padding'));\n  var style = componentModel.getItemStyle(['color', 'opacity']);\n  style.fill = componentModel.get('backgroundColor');\n  rect = new graphic.Rect({\n    shape: {\n      x: rect.x - padding[3],\n      y: rect.y - padding[0],\n      width: rect.width + padding[1] + padding[3],\n      height: rect.height + padding[0] + padding[2],\n      r: componentModel.get('borderRadius')\n    },\n    style: style,\n    silent: true,\n    z2: -1\n  });\n  // FIXME\n  // `subPixelOptimizeRect` may bring some gap between edge of viewpart\n  // and background rect when setting like `left: 0`, `top: 0`.\n  // graphic.subPixelOptimizeRect(rect);\n  return rect;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component.js';\nvar TooltipModel = /** @class */function (_super) {\n  __extends(TooltipModel, _super);\n  function TooltipModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TooltipModel.type;\n    return _this;\n  }\n  TooltipModel.type = 'tooltip';\n  TooltipModel.dependencies = ['axisPointer'];\n  TooltipModel.defaultOption = {\n    // zlevel: 0,\n    z: 60,\n    show: true,\n    // tooltip main content\n    showContent: true,\n    // 'trigger' only works on coordinate system.\n    // 'item' | 'axis' | 'none'\n    trigger: 'item',\n    // 'click' | 'mousemove' | 'none'\n    triggerOn: 'mousemove|click',\n    alwaysShowContent: false,\n    displayMode: 'single',\n    renderMode: 'auto',\n    // whether restraint content inside viewRect.\n    // If renderMode: 'richText', default true.\n    // If renderMode: 'html', defaut false (for backward compat).\n    confine: null,\n    showDelay: 0,\n    hideDelay: 100,\n    // Animation transition time, unit is second\n    transitionDuration: 0.4,\n    enterable: false,\n    backgroundColor: '#fff',\n    // box shadow\n    shadowBlur: 10,\n    shadowColor: 'rgba(0, 0, 0, .2)',\n    shadowOffsetX: 1,\n    shadowOffsetY: 2,\n    // tooltip border radius, unit is px, default is 4\n    borderRadius: 4,\n    // tooltip border width, unit is px, default is 0 (no border)\n    borderWidth: 1,\n    // Tooltip inside padding, default is 5 for all direction\n    // Array is allowed to set up, right, bottom, left, same with css\n    // The default value: See `tooltip/tooltipMarkup.ts#getPaddingFromTooltipModel`.\n    padding: null,\n    // Extra css text\n    extraCssText: '',\n    // axis indicator, trigger by axis\n    axisPointer: {\n      // default is line\n      // legal values: 'line' | 'shadow' | 'cross'\n      type: 'line',\n      // Valid when type is line, appoint tooltip line locate on which line. Optional\n      // legal values: 'x' | 'y' | 'angle' | 'radius' | 'auto'\n      // default is 'auto', chose the axis which type is category.\n      // for multiply y axis, cartesian coord chose x axis, polar chose angle axis\n      axis: 'auto',\n      animation: 'auto',\n      animationDurationUpdate: 200,\n      animationEasingUpdate: 'exponentialOut',\n      crossStyle: {\n        color: '#999',\n        width: 1,\n        type: 'dashed',\n        // TODO formatter\n        textStyle: {}\n      }\n      // lineStyle and shadowStyle should not be specified here,\n      // otherwise it will always override those styles on option.axisPointer.\n    },\n    textStyle: {\n      color: '#666',\n      fontSize: 14\n    }\n  };\n  return TooltipModel;\n}(ComponentModel);\nexport default TooltipModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { toCamelCase } from '../../util/format.js';\nimport env from 'zrender/lib/core/env.js';\n/* global document */\nexport function shouldTooltipConfine(tooltipModel) {\n  var confineOption = tooltipModel.get('confine');\n  return confineOption != null ? !!confineOption\n  // In richText mode, the outside part can not be visible.\n  : tooltipModel.get('renderMode') === 'richText';\n}\nfunction testStyle(styleProps) {\n  if (!env.domSupported) {\n    return;\n  }\n  var style = document.documentElement.style;\n  for (var i = 0, len = styleProps.length; i < len; i++) {\n    if (styleProps[i] in style) {\n      return styleProps[i];\n    }\n  }\n}\nexport var TRANSFORM_VENDOR = testStyle(['transform', 'webkitTransform', 'OTransform', 'MozTransform', 'msTransform']);\nexport var TRANSITION_VENDOR = testStyle(['webkitTransition', 'transition', 'OTransition', 'MozTransition', 'msTransition']);\nexport function toCSSVendorPrefix(styleVendor, styleProp) {\n  if (!styleVendor) {\n    return styleProp;\n  }\n  styleProp = toCamelCase(styleProp, true);\n  var idx = styleVendor.indexOf(styleProp);\n  styleVendor = idx === -1 ? styleProp : \"-\" + styleVendor.slice(0, idx) + \"-\" + styleProp;\n  return styleVendor.toLowerCase();\n}\nexport function getComputedStyle(el, style) {\n  var stl = el.currentStyle || document.defaultView && document.defaultView.getComputedStyle(el);\n  return stl ? style ? stl[style] : stl : null;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { isString, indexOf, each, bind, isFunction, isArray, isDom, retrieve2 } from 'zrender/lib/core/util.js';\nimport { normalizeEvent } from 'zrender/lib/core/event.js';\nimport { transformLocalCoord } from 'zrender/lib/core/dom.js';\nimport env from 'zrender/lib/core/env.js';\nimport { convertToColorString, toCamelCase, normalizeCssArray } from '../../util/format.js';\nimport { shouldTooltipConfine, toCSSVendorPrefix, getComputedStyle, TRANSFORM_VENDOR, TRANSITION_VENDOR } from './helper.js';\nimport { getPaddingFromTooltipModel } from './tooltipMarkup.js';\n/* global document, window */\nvar CSS_TRANSITION_VENDOR = toCSSVendorPrefix(TRANSITION_VENDOR, 'transition');\nvar CSS_TRANSFORM_VENDOR = toCSSVendorPrefix(TRANSFORM_VENDOR, 'transform');\n// eslint-disable-next-line\nvar gCssText = \"position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;\" + (env.transform3dSupported ? 'will-change:transform;' : '');\nfunction mirrorPos(pos) {\n  pos = pos === 'left' ? 'right' : pos === 'right' ? 'left' : pos === 'top' ? 'bottom' : 'top';\n  return pos;\n}\nfunction assembleArrow(tooltipModel, borderColor, arrowPosition) {\n  if (!isString(arrowPosition) || arrowPosition === 'inside') {\n    return '';\n  }\n  var backgroundColor = tooltipModel.get('backgroundColor');\n  var borderWidth = tooltipModel.get('borderWidth');\n  borderColor = convertToColorString(borderColor);\n  var arrowPos = mirrorPos(arrowPosition);\n  var arrowSize = Math.max(Math.round(borderWidth) * 1.5, 6);\n  var positionStyle = '';\n  var transformStyle = CSS_TRANSFORM_VENDOR + ':';\n  var rotateDeg;\n  if (indexOf(['left', 'right'], arrowPos) > -1) {\n    positionStyle += 'top:50%';\n    transformStyle += \"translateY(-50%) rotate(\" + (rotateDeg = arrowPos === 'left' ? -225 : -45) + \"deg)\";\n  } else {\n    positionStyle += 'left:50%';\n    transformStyle += \"translateX(-50%) rotate(\" + (rotateDeg = arrowPos === 'top' ? 225 : 45) + \"deg)\";\n  }\n  var rotateRadian = rotateDeg * Math.PI / 180;\n  var arrowWH = arrowSize + borderWidth;\n  var rotatedWH = arrowWH * Math.abs(Math.cos(rotateRadian)) + arrowWH * Math.abs(Math.sin(rotateRadian));\n  var arrowOffset = Math.round(((rotatedWH - Math.SQRT2 * borderWidth) / 2 + Math.SQRT2 * borderWidth - (rotatedWH - arrowWH) / 2) * 100) / 100;\n  positionStyle += \";\" + arrowPos + \":-\" + arrowOffset + \"px\";\n  var borderStyle = borderColor + \" solid \" + borderWidth + \"px;\";\n  var styleCss = [\"position:absolute;width:\" + arrowSize + \"px;height:\" + arrowSize + \"px;z-index:-1;\", positionStyle + \";\" + transformStyle + \";\", \"border-bottom:\" + borderStyle, \"border-right:\" + borderStyle, \"background-color:\" + backgroundColor + \";\"];\n  return \"<div style=\\\"\" + styleCss.join('') + \"\\\"></div>\";\n}\nfunction assembleTransition(duration, onlyFade) {\n  var transitionCurve = 'cubic-bezier(0.23,1,0.32,1)';\n  var transitionOption = \" \" + duration / 2 + \"s \" + transitionCurve;\n  var transitionText = \"opacity\" + transitionOption + \",visibility\" + transitionOption;\n  if (!onlyFade) {\n    transitionOption = \" \" + duration + \"s \" + transitionCurve;\n    transitionText += env.transformSupported ? \",\" + CSS_TRANSFORM_VENDOR + transitionOption : \",left\" + transitionOption + \",top\" + transitionOption;\n  }\n  return CSS_TRANSITION_VENDOR + ':' + transitionText;\n}\nfunction assembleTransform(x, y, toString) {\n  // If using float on style, the final width of the dom might\n  // keep changing slightly while mouse move. So `toFixed(0)` them.\n  var x0 = x.toFixed(0) + 'px';\n  var y0 = y.toFixed(0) + 'px';\n  // not support transform, use `left` and `top` instead.\n  if (!env.transformSupported) {\n    return toString ? \"top:\" + y0 + \";left:\" + x0 + \";\" : [['top', y0], ['left', x0]];\n  }\n  // support transform\n  var is3d = env.transform3dSupported;\n  var translate = \"translate\" + (is3d ? '3d' : '') + \"(\" + x0 + \",\" + y0 + (is3d ? ',0' : '') + \")\";\n  return toString ? 'top:0;left:0;' + CSS_TRANSFORM_VENDOR + ':' + translate + ';' : [['top', 0], ['left', 0], [TRANSFORM_VENDOR, translate]];\n}\n/**\r\n * @param {Object} textStyle\r\n * @return {string}\r\n * @inner\r\n */\nfunction assembleFont(textStyleModel) {\n  var cssText = [];\n  var fontSize = textStyleModel.get('fontSize');\n  var color = textStyleModel.getTextColor();\n  color && cssText.push('color:' + color);\n  cssText.push('font:' + textStyleModel.getFont());\n  // @ts-ignore, leave it to the tooltip refactor.\n  var lineHeight = retrieve2(textStyleModel.get('lineHeight'), Math.round(fontSize * 3 / 2));\n  fontSize && cssText.push('line-height:' + lineHeight + 'px');\n  var shadowColor = textStyleModel.get('textShadowColor');\n  var shadowBlur = textStyleModel.get('textShadowBlur') || 0;\n  var shadowOffsetX = textStyleModel.get('textShadowOffsetX') || 0;\n  var shadowOffsetY = textStyleModel.get('textShadowOffsetY') || 0;\n  shadowColor && shadowBlur && cssText.push('text-shadow:' + shadowOffsetX + 'px ' + shadowOffsetY + 'px ' + shadowBlur + 'px ' + shadowColor);\n  each(['decoration', 'align'], function (name) {\n    var val = textStyleModel.get(name);\n    val && cssText.push('text-' + name + ':' + val);\n  });\n  return cssText.join(';');\n}\nfunction assembleCssText(tooltipModel, enableTransition, onlyFade) {\n  var cssText = [];\n  var transitionDuration = tooltipModel.get('transitionDuration');\n  var backgroundColor = tooltipModel.get('backgroundColor');\n  var shadowBlur = tooltipModel.get('shadowBlur');\n  var shadowColor = tooltipModel.get('shadowColor');\n  var shadowOffsetX = tooltipModel.get('shadowOffsetX');\n  var shadowOffsetY = tooltipModel.get('shadowOffsetY');\n  var textStyleModel = tooltipModel.getModel('textStyle');\n  var padding = getPaddingFromTooltipModel(tooltipModel, 'html');\n  var boxShadow = shadowOffsetX + \"px \" + shadowOffsetY + \"px \" + shadowBlur + \"px \" + shadowColor;\n  cssText.push('box-shadow:' + boxShadow);\n  // Animation transition. Do not animate when transitionDuration is 0.\n  enableTransition && transitionDuration && cssText.push(assembleTransition(transitionDuration, onlyFade));\n  if (backgroundColor) {\n    cssText.push('background-color:' + backgroundColor);\n  }\n  // Border style\n  each(['width', 'color', 'radius'], function (name) {\n    var borderName = 'border-' + name;\n    var camelCase = toCamelCase(borderName);\n    var val = tooltipModel.get(camelCase);\n    val != null && cssText.push(borderName + ':' + val + (name === 'color' ? '' : 'px'));\n  });\n  // Text style\n  cssText.push(assembleFont(textStyleModel));\n  // Padding\n  if (padding != null) {\n    cssText.push('padding:' + normalizeCssArray(padding).join('px ') + 'px');\n  }\n  return cssText.join(';') + ';';\n}\n// If not able to make, do not modify the input `out`.\nfunction makeStyleCoord(out, zr, container, zrX, zrY) {\n  var zrPainter = zr && zr.painter;\n  if (container) {\n    var zrViewportRoot = zrPainter && zrPainter.getViewportRoot();\n    if (zrViewportRoot) {\n      // Some APPs might use scale on body, so we support CSS transform here.\n      transformLocalCoord(out, zrViewportRoot, container, zrX, zrY);\n    }\n  } else {\n    out[0] = zrX;\n    out[1] = zrY;\n    // xy should be based on canvas root. But tooltipContent is\n    // the sibling of canvas root. So padding of ec container\n    // should be considered here.\n    var viewportRootOffset = zrPainter && zrPainter.getViewportRootOffset();\n    if (viewportRootOffset) {\n      out[0] += viewportRootOffset.offsetLeft;\n      out[1] += viewportRootOffset.offsetTop;\n    }\n  }\n  out[2] = out[0] / zr.getWidth();\n  out[3] = out[1] / zr.getHeight();\n}\nvar TooltipHTMLContent = /** @class */function () {\n  function TooltipHTMLContent(api, opt) {\n    this._show = false;\n    this._styleCoord = [0, 0, 0, 0];\n    this._enterable = true;\n    this._alwaysShowContent = false;\n    this._firstShow = true;\n    this._longHide = true;\n    if (env.wxa) {\n      return null;\n    }\n    var el = document.createElement('div');\n    // TODO: TYPE\n    el.domBelongToZr = true;\n    this.el = el;\n    var zr = this._zr = api.getZr();\n    var appendTo = opt.appendTo;\n    var container = appendTo && (isString(appendTo) ? document.querySelector(appendTo) : isDom(appendTo) ? appendTo : isFunction(appendTo) && appendTo(api.getDom()));\n    makeStyleCoord(this._styleCoord, zr, container, api.getWidth() / 2, api.getHeight() / 2);\n    (container || api.getDom()).appendChild(el);\n    this._api = api;\n    this._container = container;\n    // FIXME\n    // Is it needed to trigger zr event manually if\n    // the browser do not support `pointer-events: none`.\n    var self = this;\n    el.onmouseenter = function () {\n      // clear the timeout in hideLater and keep showing tooltip\n      if (self._enterable) {\n        clearTimeout(self._hideTimeout);\n        self._show = true;\n      }\n      self._inContent = true;\n    };\n    el.onmousemove = function (e) {\n      e = e || window.event;\n      if (!self._enterable) {\n        // `pointer-events: none` is set to tooltip content div\n        // if `enterable` is set as `false`, and `el.onmousemove`\n        // can not be triggered. But in browser that do not\n        // support `pointer-events`, we need to do this:\n        // Try trigger zrender event to avoid mouse\n        // in and out shape too frequently\n        var handler = zr.handler;\n        var zrViewportRoot = zr.painter.getViewportRoot();\n        normalizeEvent(zrViewportRoot, e, true);\n        handler.dispatch('mousemove', e);\n      }\n    };\n    el.onmouseleave = function () {\n      // set `_inContent` to `false` before `hideLater`\n      self._inContent = false;\n      if (self._enterable) {\n        if (self._show) {\n          self.hideLater(self._hideDelay);\n        }\n      }\n    };\n  }\n  /**\r\n   * Update when tooltip is rendered\r\n   */\n  TooltipHTMLContent.prototype.update = function (tooltipModel) {\n    // FIXME\n    // Move this logic to ec main?\n    if (!this._container) {\n      var container = this._api.getDom();\n      var position = getComputedStyle(container, 'position');\n      var domStyle = container.style;\n      if (domStyle.position !== 'absolute' && position !== 'absolute') {\n        domStyle.position = 'relative';\n      }\n    }\n    // move tooltip if chart resized\n    var alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    alwaysShowContent && this._moveIfResized();\n    // update alwaysShowContent\n    this._alwaysShowContent = alwaysShowContent;\n    // update className\n    this.el.className = tooltipModel.get('className') || '';\n    // Hide the tooltip\n    // PENDING\n    // this.hide();\n  };\n  TooltipHTMLContent.prototype.show = function (tooltipModel, nearPointColor) {\n    clearTimeout(this._hideTimeout);\n    clearTimeout(this._longHideTimeout);\n    var el = this.el;\n    var style = el.style;\n    var styleCoord = this._styleCoord;\n    if (!el.innerHTML) {\n      style.display = 'none';\n    } else {\n      style.cssText = gCssText + assembleCssText(tooltipModel, !this._firstShow, this._longHide)\n      // initial transform\n      + assembleTransform(styleCoord[0], styleCoord[1], true) + (\"border-color:\" + convertToColorString(nearPointColor) + \";\") + (tooltipModel.get('extraCssText') || '')\n      // If mouse occasionally move over the tooltip, a mouseout event will be\n      // triggered by canvas, and cause some unexpectable result like dragging\n      // stop, \"unfocusAdjacency\". Here `pointer-events: none` is used to solve\n      // it. Although it is not supported by IE8~IE10, fortunately it is a rare\n      // scenario.\n      + (\";pointer-events:\" + (this._enterable ? 'auto' : 'none'));\n    }\n    this._show = true;\n    this._firstShow = false;\n    this._longHide = false;\n  };\n  TooltipHTMLContent.prototype.setContent = function (content, markers, tooltipModel, borderColor, arrowPosition) {\n    var el = this.el;\n    if (content == null) {\n      el.innerHTML = '';\n      return;\n    }\n    var arrow = '';\n    if (isString(arrowPosition) && tooltipModel.get('trigger') === 'item' && !shouldTooltipConfine(tooltipModel)) {\n      arrow = assembleArrow(tooltipModel, borderColor, arrowPosition);\n    }\n    if (isString(content)) {\n      el.innerHTML = content + arrow;\n    } else if (content) {\n      // Clear previous\n      el.innerHTML = '';\n      if (!isArray(content)) {\n        content = [content];\n      }\n      for (var i = 0; i < content.length; i++) {\n        if (isDom(content[i]) && content[i].parentNode !== el) {\n          el.appendChild(content[i]);\n        }\n      }\n      // no arrow if empty\n      if (arrow && el.childNodes.length) {\n        // no need to create a new parent element, but it's not supported by IE 10 and older.\n        // const arrowEl = document.createRange().createContextualFragment(arrow);\n        var arrowEl = document.createElement('div');\n        arrowEl.innerHTML = arrow;\n        el.appendChild(arrowEl);\n      }\n    }\n  };\n  TooltipHTMLContent.prototype.setEnterable = function (enterable) {\n    this._enterable = enterable;\n  };\n  TooltipHTMLContent.prototype.getSize = function () {\n    var el = this.el;\n    return el ? [el.offsetWidth, el.offsetHeight] : [0, 0];\n  };\n  TooltipHTMLContent.prototype.moveTo = function (zrX, zrY) {\n    if (!this.el) {\n      return;\n    }\n    var styleCoord = this._styleCoord;\n    makeStyleCoord(styleCoord, this._zr, this._container, zrX, zrY);\n    if (styleCoord[0] != null && styleCoord[1] != null) {\n      var style_1 = this.el.style;\n      var transforms = assembleTransform(styleCoord[0], styleCoord[1]);\n      each(transforms, function (transform) {\n        style_1[transform[0]] = transform[1];\n      });\n    }\n  };\n  /**\r\n   * when `alwaysShowContent` is true,\r\n   * move the tooltip after chart resized\r\n   */\n  TooltipHTMLContent.prototype._moveIfResized = function () {\n    // The ratio of left to width\n    var ratioX = this._styleCoord[2];\n    // The ratio of top to height\n    var ratioY = this._styleCoord[3];\n    this.moveTo(ratioX * this._zr.getWidth(), ratioY * this._zr.getHeight());\n  };\n  TooltipHTMLContent.prototype.hide = function () {\n    var _this = this;\n    var style = this.el.style;\n    style.visibility = 'hidden';\n    style.opacity = '0';\n    env.transform3dSupported && (style.willChange = '');\n    this._show = false;\n    this._longHideTimeout = setTimeout(function () {\n      return _this._longHide = true;\n    }, 500);\n  };\n  TooltipHTMLContent.prototype.hideLater = function (time) {\n    if (this._show && !(this._inContent && this._enterable) && !this._alwaysShowContent) {\n      if (time) {\n        this._hideDelay = time;\n        // Set show false to avoid invoke hideLater multiple times\n        this._show = false;\n        this._hideTimeout = setTimeout(bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  };\n  TooltipHTMLContent.prototype.isShow = function () {\n    return this._show;\n  };\n  TooltipHTMLContent.prototype.dispose = function () {\n    clearTimeout(this._hideTimeout);\n    clearTimeout(this._longHideTimeout);\n    var parentNode = this.el.parentNode;\n    parentNode && parentNode.removeChild(this.el);\n    this.el = this._container = null;\n  };\n  return TooltipHTMLContent;\n}();\nexport default TooltipHTMLContent;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ZRText from 'zrender/lib/graphic/Text.js';\nimport { getPaddingFromTooltipModel } from './tooltipMarkup.js';\nimport { throwError } from '../../util/log.js';\nvar TooltipRichContent = /** @class */function () {\n  function TooltipRichContent(api) {\n    this._show = false;\n    this._styleCoord = [0, 0, 0, 0];\n    this._alwaysShowContent = false;\n    this._enterable = true;\n    this._zr = api.getZr();\n    makeStyleCoord(this._styleCoord, this._zr, api.getWidth() / 2, api.getHeight() / 2);\n  }\n  /**\r\n   * Update when tooltip is rendered\r\n   */\n  TooltipRichContent.prototype.update = function (tooltipModel) {\n    var alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    alwaysShowContent && this._moveIfResized();\n    // update alwaysShowContent\n    this._alwaysShowContent = alwaysShowContent;\n  };\n  TooltipRichContent.prototype.show = function () {\n    if (this._hideTimeout) {\n      clearTimeout(this._hideTimeout);\n    }\n    this.el.show();\n    this._show = true;\n  };\n  /**\r\n   * Set tooltip content\r\n   */\n  TooltipRichContent.prototype.setContent = function (content, markupStyleCreator, tooltipModel, borderColor, arrowPosition) {\n    var _this = this;\n    if (zrUtil.isObject(content)) {\n      throwError(process.env.NODE_ENV !== 'production' ? 'Passing DOM nodes as content is not supported in richText tooltip!' : '');\n    }\n    if (this.el) {\n      this._zr.remove(this.el);\n    }\n    var textStyleModel = tooltipModel.getModel('textStyle');\n    this.el = new ZRText({\n      style: {\n        rich: markupStyleCreator.richTextStyles,\n        text: content,\n        lineHeight: 22,\n        borderWidth: 1,\n        borderColor: borderColor,\n        textShadowColor: textStyleModel.get('textShadowColor'),\n        fill: tooltipModel.get(['textStyle', 'color']),\n        padding: getPaddingFromTooltipModel(tooltipModel, 'richText'),\n        verticalAlign: 'top',\n        align: 'left'\n      },\n      z: tooltipModel.get('z')\n    });\n    zrUtil.each(['backgroundColor', 'borderRadius', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'], function (propName) {\n      _this.el.style[propName] = tooltipModel.get(propName);\n    });\n    zrUtil.each(['textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY'], function (propName) {\n      _this.el.style[propName] = textStyleModel.get(propName) || 0;\n    });\n    this._zr.add(this.el);\n    var self = this;\n    this.el.on('mouseover', function () {\n      // clear the timeout in hideLater and keep showing tooltip\n      if (self._enterable) {\n        clearTimeout(self._hideTimeout);\n        self._show = true;\n      }\n      self._inContent = true;\n    });\n    this.el.on('mouseout', function () {\n      if (self._enterable) {\n        if (self._show) {\n          self.hideLater(self._hideDelay);\n        }\n      }\n      self._inContent = false;\n    });\n  };\n  TooltipRichContent.prototype.setEnterable = function (enterable) {\n    this._enterable = enterable;\n  };\n  TooltipRichContent.prototype.getSize = function () {\n    var el = this.el;\n    var bounding = this.el.getBoundingRect();\n    // bounding rect does not include shadow. For renderMode richText,\n    // if overflow, it will be cut. So calculate them accurately.\n    var shadowOuterSize = calcShadowOuterSize(el.style);\n    return [bounding.width + shadowOuterSize.left + shadowOuterSize.right, bounding.height + shadowOuterSize.top + shadowOuterSize.bottom];\n  };\n  TooltipRichContent.prototype.moveTo = function (x, y) {\n    var el = this.el;\n    if (el) {\n      var styleCoord = this._styleCoord;\n      makeStyleCoord(styleCoord, this._zr, x, y);\n      x = styleCoord[0];\n      y = styleCoord[1];\n      var style = el.style;\n      var borderWidth = mathMaxWith0(style.borderWidth || 0);\n      var shadowOuterSize = calcShadowOuterSize(style);\n      // rich text x, y do not include border.\n      el.x = x + borderWidth + shadowOuterSize.left;\n      el.y = y + borderWidth + shadowOuterSize.top;\n      el.markRedraw();\n    }\n  };\n  /**\r\n   * when `alwaysShowContent` is true,\r\n   * move the tooltip after chart resized\r\n   */\n  TooltipRichContent.prototype._moveIfResized = function () {\n    // The ratio of left to width\n    var ratioX = this._styleCoord[2];\n    // The ratio of top to height\n    var ratioY = this._styleCoord[3];\n    this.moveTo(ratioX * this._zr.getWidth(), ratioY * this._zr.getHeight());\n  };\n  TooltipRichContent.prototype.hide = function () {\n    if (this.el) {\n      this.el.hide();\n    }\n    this._show = false;\n  };\n  TooltipRichContent.prototype.hideLater = function (time) {\n    if (this._show && !(this._inContent && this._enterable) && !this._alwaysShowContent) {\n      if (time) {\n        this._hideDelay = time;\n        // Set show false to avoid invoke hideLater multiple times\n        this._show = false;\n        this._hideTimeout = setTimeout(zrUtil.bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  };\n  TooltipRichContent.prototype.isShow = function () {\n    return this._show;\n  };\n  TooltipRichContent.prototype.dispose = function () {\n    this._zr.remove(this.el);\n  };\n  return TooltipRichContent;\n}();\nfunction mathMaxWith0(val) {\n  return Math.max(0, val);\n}\nfunction calcShadowOuterSize(style) {\n  var shadowBlur = mathMaxWith0(style.shadowBlur || 0);\n  var shadowOffsetX = mathMaxWith0(style.shadowOffsetX || 0);\n  var shadowOffsetY = mathMaxWith0(style.shadowOffsetY || 0);\n  return {\n    left: mathMaxWith0(shadowBlur - shadowOffsetX),\n    right: mathMaxWith0(shadowBlur + shadowOffsetX),\n    top: mathMaxWith0(shadowBlur - shadowOffsetY),\n    bottom: mathMaxWith0(shadowBlur + shadowOffsetY)\n  };\n}\nfunction makeStyleCoord(out, zr, zrX, zrY) {\n  out[0] = zrX;\n  out[1] = zrY;\n  out[2] = out[0] / zr.getWidth();\n  out[3] = out[1] / zr.getHeight();\n}\nexport default TooltipRichContent;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport { __extends } from \"tslib\";\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { bind, each, clone, trim, isString, isFunction, isArray, isObject, extend } from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport TooltipHTMLContent from './TooltipHTMLContent.js';\nimport TooltipRichContent from './TooltipRichContent.js';\nimport { convertToColorString, encodeHTML, formatTpl } from '../../util/format.js';\nimport { parsePercent } from '../../util/number.js';\nimport { Rect } from '../../util/graphic.js';\nimport findPointFromSeries from '../axisPointer/findPointFromSeries.js';\nimport { getLayoutRect } from '../../util/layout.js';\nimport Model from '../../model/Model.js';\nimport * as globalListener from '../axisPointer/globalListener.js';\nimport * as axisHelper from '../../coord/axisHelper.js';\nimport * as axisPointerViewHelper from '../axisPointer/viewHelper.js';\nimport { getTooltipRenderMode, preParseFinder, queryReferringComponents } from '../../util/model.js';\nimport ComponentView from '../../view/Component.js';\nimport { format as timeFormat } from '../../util/time.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { shouldTooltipConfine } from './helper.js';\nimport { normalizeTooltipFormatResult } from '../../model/mixin/dataFormat.js';\nimport { createTooltipMarkup, buildTooltipMarkup, TooltipMarkupStyleCreator } from './tooltipMarkup.js';\nimport { findEventDispatcher } from '../../util/event.js';\nimport { clear, createOrUpdate } from '../../util/throttle.js';\nvar proxyRect = new Rect({\n  shape: {\n    x: -1,\n    y: -1,\n    width: 2,\n    height: 2\n  }\n});\nvar TooltipView = /** @class */function (_super) {\n  __extends(TooltipView, _super);\n  function TooltipView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TooltipView.type;\n    return _this;\n  }\n  TooltipView.prototype.init = function (ecModel, api) {\n    if (env.node || !api.getDom()) {\n      return;\n    }\n    var tooltipModel = ecModel.getComponent('tooltip');\n    var renderMode = this._renderMode = getTooltipRenderMode(tooltipModel.get('renderMode'));\n    this._tooltipContent = renderMode === 'richText' ? new TooltipRichContent(api) : new TooltipHTMLContent(api, {\n      appendTo: tooltipModel.get('appendToBody', true) ? 'body' : tooltipModel.get('appendTo', true)\n    });\n  };\n  TooltipView.prototype.render = function (tooltipModel, ecModel, api) {\n    if (env.node || !api.getDom()) {\n      return;\n    }\n    // Reset\n    this.group.removeAll();\n    this._tooltipModel = tooltipModel;\n    this._ecModel = ecModel;\n    this._api = api;\n    var tooltipContent = this._tooltipContent;\n    tooltipContent.update(tooltipModel);\n    tooltipContent.setEnterable(tooltipModel.get('enterable'));\n    this._initGlobalListener();\n    this._keepShow();\n    // PENDING\n    // `mousemove` event will be triggered very frequently when the mouse moves fast,\n    // which causes that the `updatePosition` function was also called frequently.\n    // In Chrome with devtools open and Firefox, tooltip looks laggy and shakes. See #14695 #16101\n    // To avoid frequent triggering,\n    // consider throttling it in 50ms when transition is enabled\n    if (this._renderMode !== 'richText' && tooltipModel.get('transitionDuration')) {\n      createOrUpdate(this, '_updatePosition', 50, 'fixRate');\n    } else {\n      clear(this, '_updatePosition');\n    }\n  };\n  TooltipView.prototype._initGlobalListener = function () {\n    var tooltipModel = this._tooltipModel;\n    var triggerOn = tooltipModel.get('triggerOn');\n    globalListener.register('itemTooltip', this._api, bind(function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none') {\n        if (triggerOn.indexOf(currTrigger) >= 0) {\n          this._tryShow(e, dispatchAction);\n        } else if (currTrigger === 'leave') {\n          this._hide(dispatchAction);\n        }\n      }\n    }, this));\n  };\n  TooltipView.prototype._keepShow = function () {\n    var tooltipModel = this._tooltipModel;\n    var ecModel = this._ecModel;\n    var api = this._api;\n    var triggerOn = tooltipModel.get('triggerOn');\n    // Try to keep the tooltip show when refreshing\n    if (this._lastX != null && this._lastY != null\n    // When user is willing to control tooltip totally using API,\n    // self.manuallyShowTip({x, y}) might cause tooltip hide,\n    // which is not expected.\n    && triggerOn !== 'none' && triggerOn !== 'click') {\n      var self_1 = this;\n      clearTimeout(this._refreshUpdateTimeout);\n      this._refreshUpdateTimeout = setTimeout(function () {\n        // Show tip next tick after other charts are rendered\n        // In case highlight action has wrong result\n        // FIXME\n        !api.isDisposed() && self_1.manuallyShowTip(tooltipModel, ecModel, api, {\n          x: self_1._lastX,\n          y: self_1._lastY,\n          dataByCoordSys: self_1._lastDataByCoordSys\n        });\n      });\n    }\n  };\n  /**\r\n   * Show tip manually by\r\n   * dispatchAction({\r\n   *     type: 'showTip',\r\n   *     x: 10,\r\n   *     y: 10\r\n   * });\r\n   * Or\r\n   * dispatchAction({\r\n   *      type: 'showTip',\r\n   *      seriesIndex: 0,\r\n   *      dataIndex or dataIndexInside or name\r\n   * });\r\n   *\r\n   *  TODO Batch\r\n   */\n  TooltipView.prototype.manuallyShowTip = function (tooltipModel, ecModel, api, payload) {\n    if (payload.from === this.uid || env.node || !api.getDom()) {\n      return;\n    }\n    var dispatchAction = makeDispatchAction(payload, api);\n    // Reset ticket\n    this._ticket = '';\n    // When triggered from axisPointer.\n    var dataByCoordSys = payload.dataByCoordSys;\n    var cmptRef = findComponentReference(payload, ecModel, api);\n    if (cmptRef) {\n      var rect = cmptRef.el.getBoundingRect().clone();\n      rect.applyTransform(cmptRef.el.transform);\n      this._tryShow({\n        offsetX: rect.x + rect.width / 2,\n        offsetY: rect.y + rect.height / 2,\n        target: cmptRef.el,\n        position: payload.position,\n        // When manully trigger, the mouse is not on the el, so we'd better to\n        // position tooltip on the bottom of the el and display arrow is possible.\n        positionDefault: 'bottom'\n      }, dispatchAction);\n    } else if (payload.tooltip && payload.x != null && payload.y != null) {\n      var el = proxyRect;\n      el.x = payload.x;\n      el.y = payload.y;\n      el.update();\n      getECData(el).tooltipConfig = {\n        name: null,\n        option: payload.tooltip\n      };\n      // Manually show tooltip while view is not using zrender elements.\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        target: el\n      }, dispatchAction);\n    } else if (dataByCoordSys) {\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        dataByCoordSys: dataByCoordSys,\n        tooltipOption: payload.tooltipOption\n      }, dispatchAction);\n    } else if (payload.seriesIndex != null) {\n      if (this._manuallyAxisShowTip(tooltipModel, ecModel, api, payload)) {\n        return;\n      }\n      var pointInfo = findPointFromSeries(payload, ecModel);\n      var cx = pointInfo.point[0];\n      var cy = pointInfo.point[1];\n      if (cx != null && cy != null) {\n        this._tryShow({\n          offsetX: cx,\n          offsetY: cy,\n          target: pointInfo.el,\n          position: payload.position,\n          // When manully trigger, the mouse is not on the el, so we'd better to\n          // position tooltip on the bottom of the el and display arrow is possible.\n          positionDefault: 'bottom'\n        }, dispatchAction);\n      }\n    } else if (payload.x != null && payload.y != null) {\n      // FIXME\n      // should wrap dispatchAction like `axisPointer/globalListener` ?\n      api.dispatchAction({\n        type: 'updateAxisPointer',\n        x: payload.x,\n        y: payload.y\n      });\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        target: api.getZr().findHover(payload.x, payload.y).target\n      }, dispatchAction);\n    }\n  };\n  TooltipView.prototype.manuallyHideTip = function (tooltipModel, ecModel, api, payload) {\n    var tooltipContent = this._tooltipContent;\n    if (this._tooltipModel) {\n      tooltipContent.hideLater(this._tooltipModel.get('hideDelay'));\n    }\n    this._lastX = this._lastY = this._lastDataByCoordSys = null;\n    if (payload.from !== this.uid) {\n      this._hide(makeDispatchAction(payload, api));\n    }\n  };\n  // Be compatible with previous design, that is, when tooltip.type is 'axis' and\n  // dispatchAction 'showTip' with seriesIndex and dataIndex will trigger axis pointer\n  // and tooltip.\n  TooltipView.prototype._manuallyAxisShowTip = function (tooltipModel, ecModel, api, payload) {\n    var seriesIndex = payload.seriesIndex;\n    var dataIndex = payload.dataIndex;\n    // @ts-ignore\n    var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo;\n    if (seriesIndex == null || dataIndex == null || coordSysAxesInfo == null) {\n      return;\n    }\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n    if (!seriesModel) {\n      return;\n    }\n    var data = seriesModel.getData();\n    var tooltipCascadedModel = buildTooltipModel([data.getItemModel(dataIndex), seriesModel, (seriesModel.coordinateSystem || {}).model], this._tooltipModel);\n    if (tooltipCascadedModel.get('trigger') !== 'axis') {\n      return;\n    }\n    api.dispatchAction({\n      type: 'updateAxisPointer',\n      seriesIndex: seriesIndex,\n      dataIndex: dataIndex,\n      position: payload.position\n    });\n    return true;\n  };\n  TooltipView.prototype._tryShow = function (e, dispatchAction) {\n    var el = e.target;\n    var tooltipModel = this._tooltipModel;\n    if (!tooltipModel) {\n      return;\n    }\n    // Save mouse x, mouse y. So we can try to keep showing the tip if chart is refreshed\n    this._lastX = e.offsetX;\n    this._lastY = e.offsetY;\n    var dataByCoordSys = e.dataByCoordSys;\n    if (dataByCoordSys && dataByCoordSys.length) {\n      this._showAxisTooltip(dataByCoordSys, e);\n    } else if (el) {\n      var ecData = getECData(el);\n      if (ecData.ssrType === 'legend') {\n        // Don't trigger tooltip for legend tooltip item\n        return;\n      }\n      this._lastDataByCoordSys = null;\n      var seriesDispatcher_1;\n      var cmptDispatcher_1;\n      findEventDispatcher(el, function (target) {\n        // Always show item tooltip if mouse is on the element with dataIndex\n        if (getECData(target).dataIndex != null) {\n          seriesDispatcher_1 = target;\n          return true;\n        }\n        // Tooltip provided directly. Like legend.\n        if (getECData(target).tooltipConfig != null) {\n          cmptDispatcher_1 = target;\n          return true;\n        }\n      }, true);\n      if (seriesDispatcher_1) {\n        this._showSeriesItemTooltip(e, seriesDispatcher_1, dispatchAction);\n      } else if (cmptDispatcher_1) {\n        this._showComponentItemTooltip(e, cmptDispatcher_1, dispatchAction);\n      } else {\n        this._hide(dispatchAction);\n      }\n    } else {\n      this._lastDataByCoordSys = null;\n      this._hide(dispatchAction);\n    }\n  };\n  TooltipView.prototype._showOrMove = function (tooltipModel, cb) {\n    // showDelay is used in this case: tooltip.enterable is set\n    // as true. User intent to move mouse into tooltip and click\n    // something. `showDelay` makes it easier to enter the content\n    // but tooltip do not move immediately.\n    var delay = tooltipModel.get('showDelay');\n    cb = bind(cb, this);\n    clearTimeout(this._showTimout);\n    delay > 0 ? this._showTimout = setTimeout(cb, delay) : cb();\n  };\n  TooltipView.prototype._showAxisTooltip = function (dataByCoordSys, e) {\n    var ecModel = this._ecModel;\n    var globalTooltipModel = this._tooltipModel;\n    var point = [e.offsetX, e.offsetY];\n    var singleTooltipModel = buildTooltipModel([e.tooltipOption], globalTooltipModel);\n    var renderMode = this._renderMode;\n    var cbParamsList = [];\n    var articleMarkup = createTooltipMarkup('section', {\n      blocks: [],\n      noHeader: true\n    });\n    // Only for legacy: `Serise['formatTooltip']` returns a string.\n    var markupTextArrLegacy = [];\n    var markupStyleCreator = new TooltipMarkupStyleCreator();\n    each(dataByCoordSys, function (itemCoordSys) {\n      each(itemCoordSys.dataByAxis, function (axisItem) {\n        var axisModel = ecModel.getComponent(axisItem.axisDim + 'Axis', axisItem.axisIndex);\n        var axisValue = axisItem.value;\n        if (!axisModel || axisValue == null) {\n          return;\n        }\n        var axisValueLabel = axisPointerViewHelper.getValueLabel(axisValue, axisModel.axis, ecModel, axisItem.seriesDataIndices, axisItem.valueLabelOpt);\n        var axisSectionMarkup = createTooltipMarkup('section', {\n          header: axisValueLabel,\n          noHeader: !trim(axisValueLabel),\n          sortBlocks: true,\n          blocks: []\n        });\n        articleMarkup.blocks.push(axisSectionMarkup);\n        each(axisItem.seriesDataIndices, function (idxItem) {\n          var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n          var dataIndex = idxItem.dataIndexInside;\n          var cbParams = series.getDataParams(dataIndex);\n          // Can't find data.\n          if (cbParams.dataIndex < 0) {\n            return;\n          }\n          cbParams.axisDim = axisItem.axisDim;\n          cbParams.axisIndex = axisItem.axisIndex;\n          cbParams.axisType = axisItem.axisType;\n          cbParams.axisId = axisItem.axisId;\n          cbParams.axisValue = axisHelper.getAxisRawValue(axisModel.axis, {\n            value: axisValue\n          });\n          cbParams.axisValueLabel = axisValueLabel;\n          // Pre-create marker style for makers. Users can assemble richText\n          // text in `formatter` callback and use those markers style.\n          cbParams.marker = markupStyleCreator.makeTooltipMarker('item', convertToColorString(cbParams.color), renderMode);\n          var seriesTooltipResult = normalizeTooltipFormatResult(series.formatTooltip(dataIndex, true, null));\n          var frag = seriesTooltipResult.frag;\n          if (frag) {\n            var valueFormatter = buildTooltipModel([series], globalTooltipModel).get('valueFormatter');\n            axisSectionMarkup.blocks.push(valueFormatter ? extend({\n              valueFormatter: valueFormatter\n            }, frag) : frag);\n          }\n          if (seriesTooltipResult.text) {\n            markupTextArrLegacy.push(seriesTooltipResult.text);\n          }\n          cbParamsList.push(cbParams);\n        });\n      });\n    });\n    // In most cases, the second axis is displays upper on the first one.\n    // So we reverse it to look better.\n    articleMarkup.blocks.reverse();\n    markupTextArrLegacy.reverse();\n    var positionExpr = e.position;\n    var orderMode = singleTooltipModel.get('order');\n    var builtMarkupText = buildTooltipMarkup(articleMarkup, markupStyleCreator, renderMode, orderMode, ecModel.get('useUTC'), singleTooltipModel.get('textStyle'));\n    builtMarkupText && markupTextArrLegacy.unshift(builtMarkupText);\n    var blockBreak = renderMode === 'richText' ? '\\n\\n' : '<br/>';\n    var allMarkupText = markupTextArrLegacy.join(blockBreak);\n    this._showOrMove(singleTooltipModel, function () {\n      if (this._updateContentNotChangedOnAxis(dataByCoordSys, cbParamsList)) {\n        this._updatePosition(singleTooltipModel, positionExpr, point[0], point[1], this._tooltipContent, cbParamsList);\n      } else {\n        this._showTooltipContent(singleTooltipModel, allMarkupText, cbParamsList, Math.random() + '', point[0], point[1], positionExpr, null, markupStyleCreator);\n      }\n    });\n    // Do not trigger events here, because this branch only be entered\n    // from dispatchAction.\n  };\n  TooltipView.prototype._showSeriesItemTooltip = function (e, dispatcher, dispatchAction) {\n    var ecModel = this._ecModel;\n    var ecData = getECData(dispatcher);\n    // Use dataModel in element if possible\n    // Used when mouseover on a element like markPoint or edge\n    // In which case, the data is not main data in series.\n    var seriesIndex = ecData.seriesIndex;\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n    // For example, graph link.\n    var dataModel = ecData.dataModel || seriesModel;\n    var dataIndex = ecData.dataIndex;\n    var dataType = ecData.dataType;\n    var data = dataModel.getData(dataType);\n    var renderMode = this._renderMode;\n    var positionDefault = e.positionDefault;\n    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), dataModel, seriesModel && (seriesModel.coordinateSystem || {}).model], this._tooltipModel, positionDefault ? {\n      position: positionDefault\n    } : null);\n    var tooltipTrigger = tooltipModel.get('trigger');\n    if (tooltipTrigger != null && tooltipTrigger !== 'item') {\n      return;\n    }\n    var params = dataModel.getDataParams(dataIndex, dataType);\n    var markupStyleCreator = new TooltipMarkupStyleCreator();\n    // Pre-create marker style for makers. Users can assemble richText\n    // text in `formatter` callback and use those markers style.\n    params.marker = markupStyleCreator.makeTooltipMarker('item', convertToColorString(params.color), renderMode);\n    var seriesTooltipResult = normalizeTooltipFormatResult(dataModel.formatTooltip(dataIndex, false, dataType));\n    var orderMode = tooltipModel.get('order');\n    var valueFormatter = tooltipModel.get('valueFormatter');\n    var frag = seriesTooltipResult.frag;\n    var markupText = frag ? buildTooltipMarkup(valueFormatter ? extend({\n      valueFormatter: valueFormatter\n    }, frag) : frag, markupStyleCreator, renderMode, orderMode, ecModel.get('useUTC'), tooltipModel.get('textStyle')) : seriesTooltipResult.text;\n    var asyncTicket = 'item_' + dataModel.name + '_' + dataIndex;\n    this._showOrMove(tooltipModel, function () {\n      this._showTooltipContent(tooltipModel, markupText, params, asyncTicket, e.offsetX, e.offsetY, e.position, e.target, markupStyleCreator);\n    });\n    // FIXME\n    // duplicated showtip if manuallyShowTip is called from dispatchAction.\n    dispatchAction({\n      type: 'showTip',\n      dataIndexInside: dataIndex,\n      dataIndex: data.getRawIndex(dataIndex),\n      seriesIndex: seriesIndex,\n      from: this.uid\n    });\n  };\n  TooltipView.prototype._showComponentItemTooltip = function (e, el, dispatchAction) {\n    var isHTMLRenderMode = this._renderMode === 'html';\n    var ecData = getECData(el);\n    var tooltipConfig = ecData.tooltipConfig;\n    var tooltipOpt = tooltipConfig.option || {};\n    var encodeHTMLContent = tooltipOpt.encodeHTMLContent;\n    if (isString(tooltipOpt)) {\n      var content = tooltipOpt;\n      tooltipOpt = {\n        content: content,\n        // Fixed formatter\n        formatter: content\n      };\n      // when `tooltipConfig.option` is a string rather than an object,\n      // we can't know if the content needs to be encoded\n      // for the sake of security, encode it by default.\n      encodeHTMLContent = true;\n    }\n    if (encodeHTMLContent && isHTMLRenderMode && tooltipOpt.content) {\n      // clone might be unnecessary?\n      tooltipOpt = clone(tooltipOpt);\n      tooltipOpt.content = encodeHTML(tooltipOpt.content);\n    }\n    var tooltipModelCascade = [tooltipOpt];\n    var cmpt = this._ecModel.getComponent(ecData.componentMainType, ecData.componentIndex);\n    if (cmpt) {\n      tooltipModelCascade.push(cmpt);\n    }\n    // In most cases, component tooltip formatter has different params with series tooltip formatter,\n    // so that they cannot share the same formatter. Since the global tooltip formatter is used for series\n    // by convention, we do not use it as the default formatter for component.\n    tooltipModelCascade.push({\n      formatter: tooltipOpt.content\n    });\n    var positionDefault = e.positionDefault;\n    var subTooltipModel = buildTooltipModel(tooltipModelCascade, this._tooltipModel, positionDefault ? {\n      position: positionDefault\n    } : null);\n    var defaultHtml = subTooltipModel.get('content');\n    var asyncTicket = Math.random() + '';\n    // PENDING: this case do not support richText style yet.\n    var markupStyleCreator = new TooltipMarkupStyleCreator();\n    // Do not check whether `trigger` is 'none' here, because `trigger`\n    // only works on coordinate system. In fact, we have not found case\n    // that requires setting `trigger` nothing on component yet.\n    this._showOrMove(subTooltipModel, function () {\n      // Use formatterParams from element defined in component\n      // Avoid users modify it.\n      var formatterParams = clone(subTooltipModel.get('formatterParams') || {});\n      this._showTooltipContent(subTooltipModel, defaultHtml, formatterParams, asyncTicket, e.offsetX, e.offsetY, e.position, el, markupStyleCreator);\n    });\n    // If not dispatch showTip, tip may be hide triggered by axis.\n    dispatchAction({\n      type: 'showTip',\n      from: this.uid\n    });\n  };\n  TooltipView.prototype._showTooltipContent = function (\n  // Use Model<TooltipOption> insteadof TooltipModel because this model may be from series or other options.\n  // Instead of top level tooltip.\n  tooltipModel, defaultHtml, params, asyncTicket, x, y, positionExpr, el, markupStyleCreator) {\n    // Reset ticket\n    this._ticket = '';\n    if (!tooltipModel.get('showContent') || !tooltipModel.get('show')) {\n      return;\n    }\n    var tooltipContent = this._tooltipContent;\n    tooltipContent.setEnterable(tooltipModel.get('enterable'));\n    var formatter = tooltipModel.get('formatter');\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var html = defaultHtml;\n    var nearPoint = this._getNearestPoint([x, y], params, tooltipModel.get('trigger'), tooltipModel.get('borderColor'));\n    var nearPointColor = nearPoint.color;\n    if (formatter) {\n      if (isString(formatter)) {\n        var useUTC = tooltipModel.ecModel.get('useUTC');\n        var params0 = isArray(params) ? params[0] : params;\n        var isTimeAxis = params0 && params0.axisType && params0.axisType.indexOf('time') >= 0;\n        html = formatter;\n        if (isTimeAxis) {\n          html = timeFormat(params0.axisValue, html, useUTC);\n        }\n        html = formatTpl(html, params, true);\n      } else if (isFunction(formatter)) {\n        var callback = bind(function (cbTicket, html) {\n          if (cbTicket === this._ticket) {\n            tooltipContent.setContent(html, markupStyleCreator, tooltipModel, nearPointColor, positionExpr);\n            this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n          }\n        }, this);\n        this._ticket = asyncTicket;\n        html = formatter(params, asyncTicket, callback);\n      } else {\n        html = formatter;\n      }\n    }\n    tooltipContent.setContent(html, markupStyleCreator, tooltipModel, nearPointColor, positionExpr);\n    tooltipContent.show(tooltipModel, nearPointColor);\n    this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n  };\n  TooltipView.prototype._getNearestPoint = function (point, tooltipDataParams, trigger, borderColor) {\n    if (trigger === 'axis' || isArray(tooltipDataParams)) {\n      return {\n        color: borderColor || (this._renderMode === 'html' ? '#fff' : 'none')\n      };\n    }\n    if (!isArray(tooltipDataParams)) {\n      return {\n        color: borderColor || tooltipDataParams.color || tooltipDataParams.borderColor\n      };\n    }\n  };\n  TooltipView.prototype._updatePosition = function (tooltipModel, positionExpr, x,\n  // Mouse x\n  y,\n  // Mouse y\n  content, params, el) {\n    var viewWidth = this._api.getWidth();\n    var viewHeight = this._api.getHeight();\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var contentSize = content.getSize();\n    var align = tooltipModel.get('align');\n    var vAlign = tooltipModel.get('verticalAlign');\n    var rect = el && el.getBoundingRect().clone();\n    el && rect.applyTransform(el.transform);\n    if (isFunction(positionExpr)) {\n      // Callback of position can be an array or a string specify the position\n      positionExpr = positionExpr([x, y], params, content.el, rect, {\n        viewSize: [viewWidth, viewHeight],\n        contentSize: contentSize.slice()\n      });\n    }\n    if (isArray(positionExpr)) {\n      x = parsePercent(positionExpr[0], viewWidth);\n      y = parsePercent(positionExpr[1], viewHeight);\n    } else if (isObject(positionExpr)) {\n      var boxLayoutPosition = positionExpr;\n      boxLayoutPosition.width = contentSize[0];\n      boxLayoutPosition.height = contentSize[1];\n      var layoutRect = getLayoutRect(boxLayoutPosition, {\n        width: viewWidth,\n        height: viewHeight\n      });\n      x = layoutRect.x;\n      y = layoutRect.y;\n      align = null;\n      // When positionExpr is left/top/right/bottom,\n      // align and verticalAlign will not work.\n      vAlign = null;\n    }\n    // Specify tooltip position by string 'top' 'bottom' 'left' 'right' around graphic element\n    else if (isString(positionExpr) && el) {\n      var pos = calcTooltipPosition(positionExpr, rect, contentSize, tooltipModel.get('borderWidth'));\n      x = pos[0];\n      y = pos[1];\n    } else {\n      var pos = refixTooltipPosition(x, y, content, viewWidth, viewHeight, align ? null : 20, vAlign ? null : 20);\n      x = pos[0];\n      y = pos[1];\n    }\n    align && (x -= isCenterAlign(align) ? contentSize[0] / 2 : align === 'right' ? contentSize[0] : 0);\n    vAlign && (y -= isCenterAlign(vAlign) ? contentSize[1] / 2 : vAlign === 'bottom' ? contentSize[1] : 0);\n    if (shouldTooltipConfine(tooltipModel)) {\n      var pos = confineTooltipPosition(x, y, content, viewWidth, viewHeight);\n      x = pos[0];\n      y = pos[1];\n    }\n    content.moveTo(x, y);\n  };\n  // FIXME\n  // Should we remove this but leave this to user?\n  TooltipView.prototype._updateContentNotChangedOnAxis = function (dataByCoordSys, cbParamsList) {\n    var lastCoordSys = this._lastDataByCoordSys;\n    var lastCbParamsList = this._cbParamsList;\n    var contentNotChanged = !!lastCoordSys && lastCoordSys.length === dataByCoordSys.length;\n    contentNotChanged && each(lastCoordSys, function (lastItemCoordSys, indexCoordSys) {\n      var lastDataByAxis = lastItemCoordSys.dataByAxis || [];\n      var thisItemCoordSys = dataByCoordSys[indexCoordSys] || {};\n      var thisDataByAxis = thisItemCoordSys.dataByAxis || [];\n      contentNotChanged = contentNotChanged && lastDataByAxis.length === thisDataByAxis.length;\n      contentNotChanged && each(lastDataByAxis, function (lastItem, indexAxis) {\n        var thisItem = thisDataByAxis[indexAxis] || {};\n        var lastIndices = lastItem.seriesDataIndices || [];\n        var newIndices = thisItem.seriesDataIndices || [];\n        contentNotChanged = contentNotChanged && lastItem.value === thisItem.value && lastItem.axisType === thisItem.axisType && lastItem.axisId === thisItem.axisId && lastIndices.length === newIndices.length;\n        contentNotChanged && each(lastIndices, function (lastIdxItem, j) {\n          var newIdxItem = newIndices[j];\n          contentNotChanged = contentNotChanged && lastIdxItem.seriesIndex === newIdxItem.seriesIndex && lastIdxItem.dataIndex === newIdxItem.dataIndex;\n        });\n        // check is cbParams data value changed\n        lastCbParamsList && each(lastItem.seriesDataIndices, function (idxItem) {\n          var seriesIdx = idxItem.seriesIndex;\n          var cbParams = cbParamsList[seriesIdx];\n          var lastCbParams = lastCbParamsList[seriesIdx];\n          if (cbParams && lastCbParams && lastCbParams.data !== cbParams.data) {\n            contentNotChanged = false;\n          }\n        });\n      });\n    });\n    this._lastDataByCoordSys = dataByCoordSys;\n    this._cbParamsList = cbParamsList;\n    return !!contentNotChanged;\n  };\n  TooltipView.prototype._hide = function (dispatchAction) {\n    // Do not directly hideLater here, because this behavior may be prevented\n    // in dispatchAction when showTip is dispatched.\n    // FIXME\n    // duplicated hideTip if manuallyHideTip is called from dispatchAction.\n    this._lastDataByCoordSys = null;\n    dispatchAction({\n      type: 'hideTip',\n      from: this.uid\n    });\n  };\n  TooltipView.prototype.dispose = function (ecModel, api) {\n    if (env.node || !api.getDom()) {\n      return;\n    }\n    clear(this, '_updatePosition');\n    this._tooltipContent.dispose();\n    globalListener.unregister('itemTooltip', api);\n  };\n  TooltipView.type = 'tooltip';\n  return TooltipView;\n}(ComponentView);\n/**\r\n * From top to bottom. (the last one should be globalTooltipModel);\r\n */\nfunction buildTooltipModel(modelCascade, globalTooltipModel, defaultTooltipOption) {\n  // Last is always tooltip model.\n  var ecModel = globalTooltipModel.ecModel;\n  var resultModel;\n  if (defaultTooltipOption) {\n    resultModel = new Model(defaultTooltipOption, ecModel, ecModel);\n    resultModel = new Model(globalTooltipModel.option, resultModel, ecModel);\n  } else {\n    resultModel = globalTooltipModel;\n  }\n  for (var i = modelCascade.length - 1; i >= 0; i--) {\n    var tooltipOpt = modelCascade[i];\n    if (tooltipOpt) {\n      if (tooltipOpt instanceof Model) {\n        tooltipOpt = tooltipOpt.get('tooltip', true);\n      }\n      // In each data item tooltip can be simply write:\n      // {\n      //  value: 10,\n      //  tooltip: 'Something you need to know'\n      // }\n      if (isString(tooltipOpt)) {\n        tooltipOpt = {\n          formatter: tooltipOpt\n        };\n      }\n      if (tooltipOpt) {\n        resultModel = new Model(tooltipOpt, resultModel, ecModel);\n      }\n    }\n  }\n  return resultModel;\n}\nfunction makeDispatchAction(payload, api) {\n  return payload.dispatchAction || bind(api.dispatchAction, api);\n}\nfunction refixTooltipPosition(x, y, content, viewWidth, viewHeight, gapH, gapV) {\n  var size = content.getSize();\n  var width = size[0];\n  var height = size[1];\n  if (gapH != null) {\n    // Add extra 2 pixels for this case:\n    // At present the \"values\" in default tooltip are using CSS `float: right`.\n    // When the right edge of the tooltip box is on the right side of the\n    // viewport, the `float` layout might push the \"values\" to the second line.\n    if (x + width + gapH + 2 > viewWidth) {\n      x -= width + gapH;\n    } else {\n      x += gapH;\n    }\n  }\n  if (gapV != null) {\n    if (y + height + gapV > viewHeight) {\n      y -= height + gapV;\n    } else {\n      y += gapV;\n    }\n  }\n  return [x, y];\n}\nfunction confineTooltipPosition(x, y, content, viewWidth, viewHeight) {\n  var size = content.getSize();\n  var width = size[0];\n  var height = size[1];\n  x = Math.min(x + width, viewWidth) - width;\n  y = Math.min(y + height, viewHeight) - height;\n  x = Math.max(x, 0);\n  y = Math.max(y, 0);\n  return [x, y];\n}\nfunction calcTooltipPosition(position, rect, contentSize, borderWidth) {\n  var domWidth = contentSize[0];\n  var domHeight = contentSize[1];\n  var offset = Math.ceil(Math.SQRT2 * borderWidth) + 8;\n  var x = 0;\n  var y = 0;\n  var rectWidth = rect.width;\n  var rectHeight = rect.height;\n  switch (position) {\n    case 'inside':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n    case 'top':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y - domHeight - offset;\n      break;\n    case 'bottom':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight + offset;\n      break;\n    case 'left':\n      x = rect.x - domWidth - offset;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n    case 'right':\n      x = rect.x + rectWidth + offset;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n  }\n  return [x, y];\n}\nfunction isCenterAlign(align) {\n  return align === 'center' || align === 'middle';\n}\n/**\r\n * Find target component by payload like:\r\n * ```js\r\n * { legendId: 'some_id', name: 'xxx' }\r\n * { toolboxIndex: 1, name: 'xxx' }\r\n * { geoName: 'some_name', name: 'xxx' }\r\n * ```\r\n * PENDING: at present only\r\n *\r\n * If not found, return null/undefined.\r\n */\nfunction findComponentReference(payload, ecModel, api) {\n  var queryOptionMap = preParseFinder(payload).queryOptionMap;\n  var componentMainType = queryOptionMap.keys()[0];\n  if (!componentMainType || componentMainType === 'series') {\n    return;\n  }\n  var queryResult = queryReferringComponents(ecModel, componentMainType, queryOptionMap.get(componentMainType), {\n    useDefault: false,\n    enableAll: false,\n    enableNone: false\n  });\n  var model = queryResult.models[0];\n  if (!model) {\n    return;\n  }\n  var view = api.getViewOfComponentModel(model);\n  var el;\n  view.group.traverse(function (subEl) {\n    var tooltipConfig = getECData(subEl).tooltipConfig;\n    if (tooltipConfig && tooltipConfig.name === payload.name) {\n      el = subEl;\n      return true; // stop\n    }\n  });\n  if (el) {\n    return {\n      componentMainType: componentMainType,\n      componentIndex: model.componentIndex,\n      el: el\n    };\n  }\n}\nexport default TooltipView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { install as installAxisPointer } from '../axisPointer/install.js';\nimport { use } from '../../extension.js';\nimport TooltipModel from './TooltipModel.js';\nimport TooltipView from './TooltipView.js';\nimport { noop } from 'zrender/lib/core/util.js';\nexport function install(registers) {\n  use(installAxisPointer);\n  registers.registerComponentModel(TooltipModel);\n  registers.registerComponentView(TooltipView);\n  /**\r\n   * @action\r\n   * @property {string} type\r\n   * @property {number} seriesIndex\r\n   * @property {number} dataIndex\r\n   * @property {number} [x]\r\n   * @property {number} [y]\r\n   */\n  registers.registerAction({\n    type: 'showTip',\n    event: 'showTip',\n    update: 'tooltip:manuallyShowTip'\n  }, noop);\n  registers.registerAction({\n    type: 'hideTip',\n    event: 'hideTip',\n    update: 'tooltip:manuallyHideTip'\n  }, noop);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport { getLayoutRect } from '../../util/layout.js';\nimport ComponentModel from '../../model/Component.js';\nimport ComponentView from '../../view/Component.js';\nimport { windowOpen } from '../../util/format.js';\nvar TitleModel = /** @class */function (_super) {\n  __extends(TitleModel, _super);\n  function TitleModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TitleModel.type;\n    _this.layoutMode = {\n      type: 'box',\n      ignoreSize: true\n    };\n    return _this;\n  }\n  TitleModel.type = 'title';\n  TitleModel.defaultOption = {\n    // zlevel: 0,\n    z: 6,\n    show: true,\n    text: '',\n    target: 'blank',\n    subtext: '',\n    subtarget: 'blank',\n    left: 0,\n    top: 0,\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    borderWidth: 0,\n    padding: 5,\n    itemGap: 10,\n    textStyle: {\n      fontSize: 18,\n      fontWeight: 'bold',\n      color: '#464646'\n    },\n    subtextStyle: {\n      fontSize: 12,\n      color: '#6E7079'\n    }\n  };\n  return TitleModel;\n}(ComponentModel);\n// View\nvar TitleView = /** @class */function (_super) {\n  __extends(TitleView, _super);\n  function TitleView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TitleView.type;\n    return _this;\n  }\n  TitleView.prototype.render = function (titleModel, ecModel, api) {\n    this.group.removeAll();\n    if (!titleModel.get('show')) {\n      return;\n    }\n    var group = this.group;\n    var textStyleModel = titleModel.getModel('textStyle');\n    var subtextStyleModel = titleModel.getModel('subtextStyle');\n    var textAlign = titleModel.get('textAlign');\n    var textVerticalAlign = zrUtil.retrieve2(titleModel.get('textBaseline'), titleModel.get('textVerticalAlign'));\n    var textEl = new graphic.Text({\n      style: createTextStyle(textStyleModel, {\n        text: titleModel.get('text'),\n        fill: textStyleModel.getTextColor()\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var textRect = textEl.getBoundingRect();\n    var subText = titleModel.get('subtext');\n    var subTextEl = new graphic.Text({\n      style: createTextStyle(subtextStyleModel, {\n        text: subText,\n        fill: subtextStyleModel.getTextColor(),\n        y: textRect.height + titleModel.get('itemGap'),\n        verticalAlign: 'top'\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var link = titleModel.get('link');\n    var sublink = titleModel.get('sublink');\n    var triggerEvent = titleModel.get('triggerEvent', true);\n    textEl.silent = !link && !triggerEvent;\n    subTextEl.silent = !sublink && !triggerEvent;\n    if (link) {\n      textEl.on('click', function () {\n        windowOpen(link, '_' + titleModel.get('target'));\n      });\n    }\n    if (sublink) {\n      subTextEl.on('click', function () {\n        windowOpen(sublink, '_' + titleModel.get('subtarget'));\n      });\n    }\n    getECData(textEl).eventData = getECData(subTextEl).eventData = triggerEvent ? {\n      componentType: 'title',\n      componentIndex: titleModel.componentIndex\n    } : null;\n    group.add(textEl);\n    subText && group.add(subTextEl);\n    // If no subText, but add subTextEl, there will be an empty line.\n    var groupRect = group.getBoundingRect();\n    var layoutOption = titleModel.getBoxLayoutParams();\n    layoutOption.width = groupRect.width;\n    layoutOption.height = groupRect.height;\n    var layoutRect = getLayoutRect(layoutOption, {\n      width: api.getWidth(),\n      height: api.getHeight()\n    }, titleModel.get('padding'));\n    // Adjust text align based on position\n    if (!textAlign) {\n      // Align left if title is on the left. center and right is same\n      textAlign = titleModel.get('left') || titleModel.get('right');\n      // @ts-ignore\n      if (textAlign === 'middle') {\n        textAlign = 'center';\n      }\n      // Adjust layout by text align\n      if (textAlign === 'right') {\n        layoutRect.x += layoutRect.width;\n      } else if (textAlign === 'center') {\n        layoutRect.x += layoutRect.width / 2;\n      }\n    }\n    if (!textVerticalAlign) {\n      textVerticalAlign = titleModel.get('top') || titleModel.get('bottom');\n      // @ts-ignore\n      if (textVerticalAlign === 'center') {\n        textVerticalAlign = 'middle';\n      }\n      if (textVerticalAlign === 'bottom') {\n        layoutRect.y += layoutRect.height;\n      } else if (textVerticalAlign === 'middle') {\n        layoutRect.y += layoutRect.height / 2;\n      }\n      textVerticalAlign = textVerticalAlign || 'top';\n    }\n    group.x = layoutRect.x;\n    group.y = layoutRect.y;\n    group.markRedraw();\n    var alignStyle = {\n      align: textAlign,\n      verticalAlign: textVerticalAlign\n    };\n    textEl.setStyle(alignStyle);\n    subTextEl.setStyle(alignStyle);\n    // Render background\n    // Get groupRect again because textAlign has been changed\n    groupRect = group.getBoundingRect();\n    var padding = layoutRect.margin;\n    var style = titleModel.getItemStyle(['color', 'opacity']);\n    style.fill = titleModel.get('backgroundColor');\n    var rect = new graphic.Rect({\n      shape: {\n        x: groupRect.x - padding[3],\n        y: groupRect.y - padding[0],\n        width: groupRect.width + padding[1] + padding[3],\n        height: groupRect.height + padding[0] + padding[2],\n        r: titleModel.get('borderRadius')\n      },\n      style: style,\n      subPixelOptimize: true,\n      silent: true\n    });\n    group.add(rect);\n  };\n  TitleView.type = 'title';\n  return TitleView;\n}(ComponentView);\nexport function install(registers) {\n  registers.registerComponentModel(TitleModel);\n  registers.registerComponentView(TitleView);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport Model from '../../model/Model.js';\nimport { isNameSpecified } from '../../util/model.js';\nimport ComponentModel from '../../model/Component.js';\nvar getDefaultSelectorOptions = function (ecModel, type) {\n  if (type === 'all') {\n    return {\n      type: 'all',\n      title: ecModel.getLocaleModel().get(['legend', 'selector', 'all'])\n    };\n  } else if (type === 'inverse') {\n    return {\n      type: 'inverse',\n      title: ecModel.getLocaleModel().get(['legend', 'selector', 'inverse'])\n    };\n  }\n};\nvar LegendModel = /** @class */function (_super) {\n  __extends(LegendModel, _super);\n  function LegendModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = LegendModel.type;\n    _this.layoutMode = {\n      type: 'box',\n      // legend.width/height are maxWidth/maxHeight actually,\n      // whereas real width/height is calculated by its content.\n      // (Setting {left: 10, right: 10} does not make sense).\n      // So consider the case:\n      // `setOption({legend: {left: 10});`\n      // then `setOption({legend: {right: 10});`\n      // The previous `left` should be cleared by setting `ignoreSize`.\n      ignoreSize: true\n    };\n    return _this;\n  }\n  LegendModel.prototype.init = function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n    option.selected = option.selected || {};\n    this._updateSelector(option);\n  };\n  LegendModel.prototype.mergeOption = function (option, ecModel) {\n    _super.prototype.mergeOption.call(this, option, ecModel);\n    this._updateSelector(option);\n  };\n  LegendModel.prototype._updateSelector = function (option) {\n    var selector = option.selector;\n    var ecModel = this.ecModel;\n    if (selector === true) {\n      selector = option.selector = ['all', 'inverse'];\n    }\n    if (zrUtil.isArray(selector)) {\n      zrUtil.each(selector, function (item, index) {\n        zrUtil.isString(item) && (item = {\n          type: item\n        });\n        selector[index] = zrUtil.merge(item, getDefaultSelectorOptions(ecModel, item.type));\n      });\n    }\n  };\n  LegendModel.prototype.optionUpdated = function () {\n    this._updateData(this.ecModel);\n    var legendData = this._data;\n    // If selectedMode is single, try to select one\n    if (legendData[0] && this.get('selectedMode') === 'single') {\n      var hasSelected = false;\n      // If has any selected in option.selected\n      for (var i = 0; i < legendData.length; i++) {\n        var name_1 = legendData[i].get('name');\n        if (this.isSelected(name_1)) {\n          // Force to unselect others\n          this.select(name_1);\n          hasSelected = true;\n          break;\n        }\n      }\n      // Try select the first if selectedMode is single\n      !hasSelected && this.select(legendData[0].get('name'));\n    }\n  };\n  LegendModel.prototype._updateData = function (ecModel) {\n    var potentialData = [];\n    var availableNames = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      var seriesName = seriesModel.name;\n      availableNames.push(seriesName);\n      var isPotential;\n      if (seriesModel.legendVisualProvider) {\n        var provider = seriesModel.legendVisualProvider;\n        var names = provider.getAllNames();\n        if (!ecModel.isSeriesFiltered(seriesModel)) {\n          availableNames = availableNames.concat(names);\n        }\n        if (names.length) {\n          potentialData = potentialData.concat(names);\n        } else {\n          isPotential = true;\n        }\n      } else {\n        isPotential = true;\n      }\n      if (isPotential && isNameSpecified(seriesModel)) {\n        potentialData.push(seriesModel.name);\n      }\n    });\n    /**\r\n     * @type {Array.<string>}\r\n     * @private\r\n     */\n    this._availableNames = availableNames;\n    // If legend.data is not specified in option, use availableNames as data,\n    // which is convenient for user preparing option.\n    var rawData = this.get('data') || potentialData;\n    var legendNameMap = zrUtil.createHashMap();\n    var legendData = zrUtil.map(rawData, function (dataItem) {\n      // Can be string or number\n      if (zrUtil.isString(dataItem) || zrUtil.isNumber(dataItem)) {\n        dataItem = {\n          name: dataItem\n        };\n      }\n      if (legendNameMap.get(dataItem.name)) {\n        // remove legend name duplicate\n        return null;\n      }\n      legendNameMap.set(dataItem.name, true);\n      return new Model(dataItem, this, this.ecModel);\n    }, this);\n    /**\r\n     * @type {Array.<module:echarts/model/Model>}\r\n     * @private\r\n     */\n    this._data = zrUtil.filter(legendData, function (item) {\n      return !!item;\n    });\n  };\n  LegendModel.prototype.getData = function () {\n    return this._data;\n  };\n  LegendModel.prototype.select = function (name) {\n    var selected = this.option.selected;\n    var selectedMode = this.get('selectedMode');\n    if (selectedMode === 'single') {\n      var data = this._data;\n      zrUtil.each(data, function (dataItem) {\n        selected[dataItem.get('name')] = false;\n      });\n    }\n    selected[name] = true;\n  };\n  LegendModel.prototype.unSelect = function (name) {\n    if (this.get('selectedMode') !== 'single') {\n      this.option.selected[name] = false;\n    }\n  };\n  LegendModel.prototype.toggleSelected = function (name) {\n    var selected = this.option.selected;\n    // Default is true\n    if (!selected.hasOwnProperty(name)) {\n      selected[name] = true;\n    }\n    this[selected[name] ? 'unSelect' : 'select'](name);\n  };\n  LegendModel.prototype.allSelect = function () {\n    var data = this._data;\n    var selected = this.option.selected;\n    zrUtil.each(data, function (dataItem) {\n      selected[dataItem.get('name', true)] = true;\n    });\n  };\n  LegendModel.prototype.inverseSelect = function () {\n    var data = this._data;\n    var selected = this.option.selected;\n    zrUtil.each(data, function (dataItem) {\n      var name = dataItem.get('name', true);\n      // Initially, default value is true\n      if (!selected.hasOwnProperty(name)) {\n        selected[name] = true;\n      }\n      selected[name] = !selected[name];\n    });\n  };\n  LegendModel.prototype.isSelected = function (name) {\n    var selected = this.option.selected;\n    return !(selected.hasOwnProperty(name) && !selected[name]) && zrUtil.indexOf(this._availableNames, name) >= 0;\n  };\n  LegendModel.prototype.getOrient = function () {\n    return this.get('orient') === 'vertical' ? {\n      index: 1,\n      name: 'vertical'\n    } : {\n      index: 0,\n      name: 'horizontal'\n    };\n  };\n  LegendModel.type = 'legend.plain';\n  LegendModel.dependencies = ['series'];\n  LegendModel.defaultOption = {\n    // zlevel: 0,\n    z: 4,\n    show: true,\n    orient: 'horizontal',\n    left: 'center',\n    // right: 'center',\n    top: 0,\n    // bottom: null,\n    align: 'auto',\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    borderRadius: 0,\n    borderWidth: 0,\n    padding: 5,\n    itemGap: 10,\n    itemWidth: 25,\n    itemHeight: 14,\n    symbolRotate: 'inherit',\n    symbolKeepAspect: true,\n    inactiveColor: '#ccc',\n    inactiveBorderColor: '#ccc',\n    inactiveBorderWidth: 'auto',\n    itemStyle: {\n      color: 'inherit',\n      opacity: 'inherit',\n      borderColor: 'inherit',\n      borderWidth: 'auto',\n      borderCap: 'inherit',\n      borderJoin: 'inherit',\n      borderDashOffset: 'inherit',\n      borderMiterLimit: 'inherit'\n    },\n    lineStyle: {\n      width: 'auto',\n      color: 'inherit',\n      inactiveColor: '#ccc',\n      inactiveWidth: 2,\n      opacity: 'inherit',\n      type: 'inherit',\n      cap: 'inherit',\n      join: 'inherit',\n      dashOffset: 'inherit',\n      miterLimit: 'inherit'\n    },\n    textStyle: {\n      color: '#333'\n    },\n    selectedMode: true,\n    selector: false,\n    selectorLabel: {\n      show: true,\n      borderRadius: 10,\n      padding: [3, 5, 3, 5],\n      fontSize: 12,\n      fontFamily: 'sans-serif',\n      color: '#666',\n      borderWidth: 1,\n      borderColor: '#666'\n    },\n    emphasis: {\n      selectorLabel: {\n        show: true,\n        color: '#eee',\n        backgroundColor: '#666'\n      }\n    },\n    selectorPosition: 'auto',\n    selectorItemGap: 7,\n    selectorButtonGap: 10,\n    tooltip: {\n      show: false\n    }\n  };\n  return LegendModel;\n}(ComponentModel);\nexport default LegendModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { parse, stringify } from 'zrender/lib/tool/color.js';\nimport * as graphic from '../../util/graphic.js';\nimport { enableHoverEmphasis } from '../../util/states.js';\nimport { setLabelStyle, createTextStyle } from '../../label/labelStyle.js';\nimport { makeBackground } from '../helper/listComponent.js';\nimport * as layoutUtil from '../../util/layout.js';\nimport ComponentView from '../../view/Component.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport { createOrUpdatePatternFromDecal } from '../../util/decal.js';\nimport { getECData } from '../../util/innerStore.js';\nvar curry = zrUtil.curry;\nvar each = zrUtil.each;\nvar Group = graphic.Group;\nvar LegendView = /** @class */function (_super) {\n  __extends(LegendView, _super);\n  function LegendView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = LegendView.type;\n    _this.newlineDisabled = false;\n    return _this;\n  }\n  LegendView.prototype.init = function () {\n    this.group.add(this._contentGroup = new Group());\n    this.group.add(this._selectorGroup = new Group());\n    this._isFirstRender = true;\n  };\n  /**\r\n   * @protected\r\n   */\n  LegendView.prototype.getContentGroup = function () {\n    return this._contentGroup;\n  };\n  /**\r\n   * @protected\r\n   */\n  LegendView.prototype.getSelectorGroup = function () {\n    return this._selectorGroup;\n  };\n  /**\r\n   * @override\r\n   */\n  LegendView.prototype.render = function (legendModel, ecModel, api) {\n    var isFirstRender = this._isFirstRender;\n    this._isFirstRender = false;\n    this.resetInner();\n    if (!legendModel.get('show', true)) {\n      return;\n    }\n    var itemAlign = legendModel.get('align');\n    var orient = legendModel.get('orient');\n    if (!itemAlign || itemAlign === 'auto') {\n      itemAlign = legendModel.get('left') === 'right' && orient === 'vertical' ? 'right' : 'left';\n    }\n    // selector has been normalized to an array in model\n    var selector = legendModel.get('selector', true);\n    var selectorPosition = legendModel.get('selectorPosition', true);\n    if (selector && (!selectorPosition || selectorPosition === 'auto')) {\n      selectorPosition = orient === 'horizontal' ? 'end' : 'start';\n    }\n    this.renderInner(itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition);\n    // Perform layout.\n    var positionInfo = legendModel.getBoxLayoutParams();\n    var viewportSize = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    };\n    var padding = legendModel.get('padding');\n    var maxSize = layoutUtil.getLayoutRect(positionInfo, viewportSize, padding);\n    var mainRect = this.layoutInner(legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition);\n    // Place mainGroup, based on the calculated `mainRect`.\n    var layoutRect = layoutUtil.getLayoutRect(zrUtil.defaults({\n      width: mainRect.width,\n      height: mainRect.height\n    }, positionInfo), viewportSize, padding);\n    this.group.x = layoutRect.x - mainRect.x;\n    this.group.y = layoutRect.y - mainRect.y;\n    this.group.markRedraw();\n    // Render background after group is layout.\n    this.group.add(this._backgroundEl = makeBackground(mainRect, legendModel));\n  };\n  LegendView.prototype.resetInner = function () {\n    this.getContentGroup().removeAll();\n    this._backgroundEl && this.group.remove(this._backgroundEl);\n    this.getSelectorGroup().removeAll();\n  };\n  LegendView.prototype.renderInner = function (itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var legendDrawnMap = zrUtil.createHashMap();\n    var selectMode = legendModel.get('selectedMode');\n    var excludeSeriesId = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      !seriesModel.get('legendHoverLink') && excludeSeriesId.push(seriesModel.id);\n    });\n    each(legendModel.getData(), function (legendItemModel, dataIndex) {\n      var name = legendItemModel.get('name');\n      // Use empty string or \\n as a newline string\n      if (!this.newlineDisabled && (name === '' || name === '\\n')) {\n        var g = new Group();\n        // @ts-ignore\n        g.newline = true;\n        contentGroup.add(g);\n        return;\n      }\n      // Representitive series.\n      var seriesModel = ecModel.getSeriesByName(name)[0];\n      if (legendDrawnMap.get(name)) {\n        // Have been drawn\n        return;\n      }\n      // Legend to control series.\n      if (seriesModel) {\n        var data = seriesModel.getData();\n        var lineVisualStyle = data.getVisual('legendLineStyle') || {};\n        var legendIcon = data.getVisual('legendIcon');\n        /**\r\n         * `data.getVisual('style')` may be the color from the register\r\n         * in series. For example, for line series,\r\n         */\n        var style = data.getVisual('style');\n        var itemGroup = this._createItem(seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, lineVisualStyle, style, legendIcon, selectMode, api);\n        itemGroup.on('click', curry(dispatchSelectAction, name, null, api, excludeSeriesId)).on('mouseover', curry(dispatchHighlightAction, seriesModel.name, null, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, seriesModel.name, null, api, excludeSeriesId));\n        if (ecModel.ssr) {\n          itemGroup.eachChild(function (child) {\n            var ecData = getECData(child);\n            ecData.seriesIndex = seriesModel.seriesIndex;\n            ecData.dataIndex = dataIndex;\n            ecData.ssrType = 'legend';\n          });\n        }\n        legendDrawnMap.set(name, true);\n      } else {\n        // Legend to control data. In pie and funnel.\n        ecModel.eachRawSeries(function (seriesModel) {\n          // In case multiple series has same data name\n          if (legendDrawnMap.get(name)) {\n            return;\n          }\n          if (seriesModel.legendVisualProvider) {\n            var provider = seriesModel.legendVisualProvider;\n            if (!provider.containName(name)) {\n              return;\n            }\n            var idx = provider.indexOfName(name);\n            var style = provider.getItemVisual(idx, 'style');\n            var legendIcon = provider.getItemVisual(idx, 'legendIcon');\n            var colorArr = parse(style.fill);\n            // Color may be set to transparent in visualMap when data is out of range.\n            // Do not show nothing.\n            if (colorArr && colorArr[3] === 0) {\n              colorArr[3] = 0.2;\n              // TODO color is set to 0, 0, 0, 0. Should show correct RGBA\n              style = zrUtil.extend(zrUtil.extend({}, style), {\n                fill: stringify(colorArr, 'rgba')\n              });\n            }\n            var itemGroup = this._createItem(seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, {}, style, legendIcon, selectMode, api);\n            // FIXME: consider different series has items with the same name.\n            itemGroup.on('click', curry(dispatchSelectAction, null, name, api, excludeSeriesId))\n            // Should not specify the series name, consider legend controls\n            // more than one pie series.\n            .on('mouseover', curry(dispatchHighlightAction, null, name, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, null, name, api, excludeSeriesId));\n            if (ecModel.ssr) {\n              itemGroup.eachChild(function (child) {\n                var ecData = getECData(child);\n                ecData.seriesIndex = seriesModel.seriesIndex;\n                ecData.dataIndex = dataIndex;\n                ecData.ssrType = 'legend';\n              });\n            }\n            legendDrawnMap.set(name, true);\n          }\n        }, this);\n      }\n      if (process.env.NODE_ENV !== 'production') {\n        if (!legendDrawnMap.get(name)) {\n          console.warn(name + ' series not exists. Legend data should be same with series name or data name.');\n        }\n      }\n    }, this);\n    if (selector) {\n      this._createSelector(selector, legendModel, api, orient, selectorPosition);\n    }\n  };\n  LegendView.prototype._createSelector = function (selector, legendModel, api, orient, selectorPosition) {\n    var selectorGroup = this.getSelectorGroup();\n    each(selector, function createSelectorButton(selectorItem) {\n      var type = selectorItem.type;\n      var labelText = new graphic.Text({\n        style: {\n          x: 0,\n          y: 0,\n          align: 'center',\n          verticalAlign: 'middle'\n        },\n        onclick: function () {\n          api.dispatchAction({\n            type: type === 'all' ? 'legendAllSelect' : 'legendInverseSelect',\n            legendId: legendModel.id\n          });\n        }\n      });\n      selectorGroup.add(labelText);\n      var labelModel = legendModel.getModel('selectorLabel');\n      var emphasisLabelModel = legendModel.getModel(['emphasis', 'selectorLabel']);\n      setLabelStyle(labelText, {\n        normal: labelModel,\n        emphasis: emphasisLabelModel\n      }, {\n        defaultText: selectorItem.title\n      });\n      enableHoverEmphasis(labelText);\n    });\n  };\n  LegendView.prototype._createItem = function (seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, lineVisualStyle, itemVisualStyle, legendIcon, selectMode, api) {\n    var drawType = seriesModel.visualDrawType;\n    var itemWidth = legendModel.get('itemWidth');\n    var itemHeight = legendModel.get('itemHeight');\n    var isSelected = legendModel.isSelected(name);\n    var iconRotate = legendItemModel.get('symbolRotate');\n    var symbolKeepAspect = legendItemModel.get('symbolKeepAspect');\n    var legendIconType = legendItemModel.get('icon');\n    legendIcon = legendIconType || legendIcon || 'roundRect';\n    var style = getLegendStyle(legendIcon, legendItemModel, lineVisualStyle, itemVisualStyle, drawType, isSelected, api);\n    var itemGroup = new Group();\n    var textStyleModel = legendItemModel.getModel('textStyle');\n    if (zrUtil.isFunction(seriesModel.getLegendIcon) && (!legendIconType || legendIconType === 'inherit')) {\n      // Series has specific way to define legend icon\n      itemGroup.add(seriesModel.getLegendIcon({\n        itemWidth: itemWidth,\n        itemHeight: itemHeight,\n        icon: legendIcon,\n        iconRotate: iconRotate,\n        itemStyle: style.itemStyle,\n        lineStyle: style.lineStyle,\n        symbolKeepAspect: symbolKeepAspect\n      }));\n    } else {\n      // Use default legend icon policy for most series\n      var rotate = legendIconType === 'inherit' && seriesModel.getData().getVisual('symbol') ? iconRotate === 'inherit' ? seriesModel.getData().getVisual('symbolRotate') : iconRotate : 0; // No rotation for no icon\n      itemGroup.add(getDefaultLegendIcon({\n        itemWidth: itemWidth,\n        itemHeight: itemHeight,\n        icon: legendIcon,\n        iconRotate: rotate,\n        itemStyle: style.itemStyle,\n        lineStyle: style.lineStyle,\n        symbolKeepAspect: symbolKeepAspect\n      }));\n    }\n    var textX = itemAlign === 'left' ? itemWidth + 5 : -5;\n    var textAlign = itemAlign;\n    var formatter = legendModel.get('formatter');\n    var content = name;\n    if (zrUtil.isString(formatter) && formatter) {\n      content = formatter.replace('{name}', name != null ? name : '');\n    } else if (zrUtil.isFunction(formatter)) {\n      content = formatter(name);\n    }\n    var textColor = isSelected ? textStyleModel.getTextColor() : legendItemModel.get('inactiveColor');\n    itemGroup.add(new graphic.Text({\n      style: createTextStyle(textStyleModel, {\n        text: content,\n        x: textX,\n        y: itemHeight / 2,\n        fill: textColor,\n        align: textAlign,\n        verticalAlign: 'middle'\n      }, {\n        inheritColor: textColor\n      })\n    }));\n    // Add a invisible rect to increase the area of mouse hover\n    var hitRect = new graphic.Rect({\n      shape: itemGroup.getBoundingRect(),\n      style: {\n        // Cannot use 'invisible' because SVG SSR will miss the node\n        fill: 'transparent'\n      }\n    });\n    var tooltipModel = legendItemModel.getModel('tooltip');\n    if (tooltipModel.get('show')) {\n      graphic.setTooltipConfig({\n        el: hitRect,\n        componentModel: legendModel,\n        itemName: name,\n        itemTooltipOption: tooltipModel.option\n      });\n    }\n    itemGroup.add(hitRect);\n    itemGroup.eachChild(function (child) {\n      child.silent = true;\n    });\n    hitRect.silent = !selectMode;\n    this.getContentGroup().add(itemGroup);\n    enableHoverEmphasis(itemGroup);\n    // @ts-ignore\n    itemGroup.__legendDataIndex = dataIndex;\n    return itemGroup;\n  };\n  LegendView.prototype.layoutInner = function (legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var selectorGroup = this.getSelectorGroup();\n    // Place items in contentGroup.\n    layoutUtil.box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), maxSize.width, maxSize.height);\n    var contentRect = contentGroup.getBoundingRect();\n    var contentPos = [-contentRect.x, -contentRect.y];\n    selectorGroup.markRedraw();\n    contentGroup.markRedraw();\n    if (selector) {\n      // Place buttons in selectorGroup\n      layoutUtil.box(\n      // Buttons in selectorGroup always layout horizontally\n      'horizontal', selectorGroup, legendModel.get('selectorItemGap', true));\n      var selectorRect = selectorGroup.getBoundingRect();\n      var selectorPos = [-selectorRect.x, -selectorRect.y];\n      var selectorButtonGap = legendModel.get('selectorButtonGap', true);\n      var orientIdx = legendModel.getOrient().index;\n      var wh = orientIdx === 0 ? 'width' : 'height';\n      var hw = orientIdx === 0 ? 'height' : 'width';\n      var yx = orientIdx === 0 ? 'y' : 'x';\n      if (selectorPosition === 'end') {\n        selectorPos[orientIdx] += contentRect[wh] + selectorButtonGap;\n      } else {\n        contentPos[orientIdx] += selectorRect[wh] + selectorButtonGap;\n      }\n      // Always align selector to content as 'middle'\n      selectorPos[1 - orientIdx] += contentRect[hw] / 2 - selectorRect[hw] / 2;\n      selectorGroup.x = selectorPos[0];\n      selectorGroup.y = selectorPos[1];\n      contentGroup.x = contentPos[0];\n      contentGroup.y = contentPos[1];\n      var mainRect = {\n        x: 0,\n        y: 0\n      };\n      mainRect[wh] = contentRect[wh] + selectorButtonGap + selectorRect[wh];\n      mainRect[hw] = Math.max(contentRect[hw], selectorRect[hw]);\n      mainRect[yx] = Math.min(0, selectorRect[yx] + selectorPos[1 - orientIdx]);\n      return mainRect;\n    } else {\n      contentGroup.x = contentPos[0];\n      contentGroup.y = contentPos[1];\n      return this.group.getBoundingRect();\n    }\n  };\n  /**\r\n   * @protected\r\n   */\n  LegendView.prototype.remove = function () {\n    this.getContentGroup().removeAll();\n    this._isFirstRender = true;\n  };\n  LegendView.type = 'legend.plain';\n  return LegendView;\n}(ComponentView);\nfunction getLegendStyle(iconType, legendItemModel, lineVisualStyle, itemVisualStyle, drawType, isSelected, api) {\n  /**\r\n   * Use series style if is inherit;\r\n   * elsewise, use legend style\r\n   */\n  function handleCommonProps(style, visualStyle) {\n    // If lineStyle.width is 'auto', it is set to be 2 if series has border\n    if (style.lineWidth === 'auto') {\n      style.lineWidth = visualStyle.lineWidth > 0 ? 2 : 0;\n    }\n    each(style, function (propVal, propName) {\n      style[propName] === 'inherit' && (style[propName] = visualStyle[propName]);\n    });\n  }\n  // itemStyle\n  var itemStyleModel = legendItemModel.getModel('itemStyle');\n  var itemStyle = itemStyleModel.getItemStyle();\n  var iconBrushType = iconType.lastIndexOf('empty', 0) === 0 ? 'fill' : 'stroke';\n  var decalStyle = itemStyleModel.getShallow('decal');\n  itemStyle.decal = !decalStyle || decalStyle === 'inherit' ? itemVisualStyle.decal : createOrUpdatePatternFromDecal(decalStyle, api);\n  if (itemStyle.fill === 'inherit') {\n    /**\r\n     * Series with visualDrawType as 'stroke' should have\r\n     * series stroke as legend fill\r\n     */\n    itemStyle.fill = itemVisualStyle[drawType];\n  }\n  if (itemStyle.stroke === 'inherit') {\n    /**\r\n     * icon type with \"emptyXXX\" should use fill color\r\n     * in visual style\r\n     */\n    itemStyle.stroke = itemVisualStyle[iconBrushType];\n  }\n  if (itemStyle.opacity === 'inherit') {\n    /**\r\n     * Use lineStyle.opacity if drawType is stroke\r\n     */\n    itemStyle.opacity = (drawType === 'fill' ? itemVisualStyle : lineVisualStyle).opacity;\n  }\n  handleCommonProps(itemStyle, itemVisualStyle);\n  // lineStyle\n  var legendLineModel = legendItemModel.getModel('lineStyle');\n  var lineStyle = legendLineModel.getLineStyle();\n  handleCommonProps(lineStyle, lineVisualStyle);\n  // Fix auto color to real color\n  itemStyle.fill === 'auto' && (itemStyle.fill = itemVisualStyle.fill);\n  itemStyle.stroke === 'auto' && (itemStyle.stroke = itemVisualStyle.fill);\n  lineStyle.stroke === 'auto' && (lineStyle.stroke = itemVisualStyle.fill);\n  if (!isSelected) {\n    var borderWidth = legendItemModel.get('inactiveBorderWidth');\n    /**\r\n     * Since stroke is set to be inactiveBorderColor, it may occur that\r\n     * there is no border in series but border in legend, so we need to\r\n     * use border only when series has border if is set to be auto\r\n     */\n    var visualHasBorder = itemStyle[iconBrushType];\n    itemStyle.lineWidth = borderWidth === 'auto' ? itemVisualStyle.lineWidth > 0 && visualHasBorder ? 2 : 0 : itemStyle.lineWidth;\n    itemStyle.fill = legendItemModel.get('inactiveColor');\n    itemStyle.stroke = legendItemModel.get('inactiveBorderColor');\n    lineStyle.stroke = legendLineModel.get('inactiveColor');\n    lineStyle.lineWidth = legendLineModel.get('inactiveWidth');\n  }\n  return {\n    itemStyle: itemStyle,\n    lineStyle: lineStyle\n  };\n}\nfunction getDefaultLegendIcon(opt) {\n  var symboType = opt.icon || 'roundRect';\n  var icon = createSymbol(symboType, 0, 0, opt.itemWidth, opt.itemHeight, opt.itemStyle.fill, opt.symbolKeepAspect);\n  icon.setStyle(opt.itemStyle);\n  icon.rotation = (opt.iconRotate || 0) * Math.PI / 180;\n  icon.setOrigin([opt.itemWidth / 2, opt.itemHeight / 2]);\n  if (symboType.indexOf('empty') > -1) {\n    icon.style.stroke = icon.style.fill;\n    icon.style.fill = '#fff';\n    icon.style.lineWidth = 2;\n  }\n  return icon;\n}\nfunction dispatchSelectAction(seriesName, dataName, api, excludeSeriesId) {\n  // downplay before unselect\n  dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId);\n  api.dispatchAction({\n    type: 'legendToggleSelect',\n    name: seriesName != null ? seriesName : dataName\n  });\n  // highlight after select\n  // TODO highlight immediately may cause animation loss.\n  dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId);\n}\nfunction isUseHoverLayer(api) {\n  var list = api.getZr().storage.getDisplayList();\n  var emphasisState;\n  var i = 0;\n  var len = list.length;\n  while (i < len && !(emphasisState = list[i].states.emphasis)) {\n    i++;\n  }\n  return emphasisState && emphasisState.hoverLayer;\n}\nfunction dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  if (!isUseHoverLayer(api)) {\n    api.dispatchAction({\n      type: 'highlight',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\nfunction dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  if (!isUseHoverLayer(api)) {\n    api.dispatchAction({\n      type: 'downplay',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\nexport default LegendView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nexport default function legendFilter(ecModel) {\n  var legendModels = ecModel.findComponents({\n    mainType: 'legend'\n  });\n  if (legendModels && legendModels.length) {\n    ecModel.filterSeries(function (series) {\n      // If in any legend component the status is not selected.\n      // Because in legend series is assumed selected when it is not in the legend data.\n      for (var i = 0; i < legendModels.length; i++) {\n        if (!legendModels[i].isSelected(series.name)) {\n          return false;\n        }\n      }\n      return true;\n    });\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { curry, each, hasOwn } from 'zrender/lib/core/util.js';\nfunction legendSelectActionHandler(methodName, payload, ecModel) {\n  var isAllSelect = methodName === 'allSelect' || methodName === 'inverseSelect';\n  var selectedMap = {};\n  var actionLegendIndices = [];\n  ecModel.eachComponent({\n    mainType: 'legend',\n    query: payload\n  }, function (legendModel) {\n    if (isAllSelect) {\n      legendModel[methodName]();\n    } else {\n      legendModel[methodName](payload.name);\n    }\n    makeSelectedMap(legendModel, selectedMap);\n    actionLegendIndices.push(legendModel.componentIndex);\n  });\n  var allSelectedMap = {};\n  // make selectedMap from all legend components\n  ecModel.eachComponent('legend', function (legendModel) {\n    each(selectedMap, function (isSelected, name) {\n      // Force other legend has same selected status\n      // Or the first is toggled to true and other are toggled to false\n      // In the case one legend has some item unSelected in option. And if other legend\n      // doesn't has the item, they will assume it is selected.\n      legendModel[isSelected ? 'select' : 'unSelect'](name);\n    });\n    makeSelectedMap(legendModel, allSelectedMap);\n  });\n  // Return the event explicitly\n  return isAllSelect ? {\n    selected: allSelectedMap,\n    // return legendIndex array to tell the developers which legends are allSelect / inverseSelect\n    legendIndex: actionLegendIndices\n  } : {\n    name: payload.name,\n    selected: allSelectedMap\n  };\n}\nfunction makeSelectedMap(legendModel, out) {\n  var selectedMap = out || {};\n  each(legendModel.getData(), function (model) {\n    var name = model.get('name');\n    // Wrap element\n    if (name === '\\n' || name === '') {\n      return;\n    }\n    var isItemSelected = legendModel.isSelected(name);\n    if (hasOwn(selectedMap, name)) {\n      // Unselected if any legend is unselected\n      selectedMap[name] = selectedMap[name] && isItemSelected;\n    } else {\n      selectedMap[name] = isItemSelected;\n    }\n  });\n  return selectedMap;\n}\nexport function installLegendAction(registers) {\n  /**\r\n   * @event legendToggleSelect\r\n   * @type {Object}\r\n   * @property {string} type 'legendToggleSelect'\r\n   * @property {string} [from]\r\n   * @property {string} name Series name or data item name\r\n   */\n  registers.registerAction('legendToggleSelect', 'legendselectchanged', curry(legendSelectActionHandler, 'toggleSelected'));\n  registers.registerAction('legendAllSelect', 'legendselectall', curry(legendSelectActionHandler, 'allSelect'));\n  registers.registerAction('legendInverseSelect', 'legendinverseselect', curry(legendSelectActionHandler, 'inverseSelect'));\n  /**\r\n   * @event legendSelect\r\n   * @type {Object}\r\n   * @property {string} type 'legendSelect'\r\n   * @property {string} name Series name or data item name\r\n   */\n  registers.registerAction('legendSelect', 'legendselected', curry(legendSelectActionHandler, 'select'));\n  /**\r\n   * @event legendUnSelect\r\n   * @type {Object}\r\n   * @property {string} type 'legendUnSelect'\r\n   * @property {string} name Series name or data item name\r\n   */\n  registers.registerAction('legendUnSelect', 'legendunselected', curry(legendSelectActionHandler, 'unSelect'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport LegendModel from './LegendModel.js';\nimport LegendView from './LegendView.js';\nimport legendFilter from './legendFilter.js';\nimport { installLegendAction } from './legendAction.js';\nexport function install(registers) {\n  registers.registerComponentModel(LegendModel);\n  registers.registerComponentView(LegendView);\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.SERIES_FILTER, legendFilter);\n  registers.registerSubTypeDefaulter('legend', function () {\n    return 'plain';\n  });\n  installLegendAction(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport LegendModel from './LegendModel.js';\nimport { mergeLayoutParam, getLayoutParams } from '../../util/layout.js';\nimport { inheritDefaultOption } from '../../util/component.js';\nvar ScrollableLegendModel = /** @class */function (_super) {\n  __extends(ScrollableLegendModel, _super);\n  function ScrollableLegendModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ScrollableLegendModel.type;\n    return _this;\n  }\n  /**\r\n   * @param {number} scrollDataIndex\r\n   */\n  ScrollableLegendModel.prototype.setScrollDataIndex = function (scrollDataIndex) {\n    this.option.scrollDataIndex = scrollDataIndex;\n  };\n  ScrollableLegendModel.prototype.init = function (option, parentModel, ecModel) {\n    var inputPositionParams = getLayoutParams(option);\n    _super.prototype.init.call(this, option, parentModel, ecModel);\n    mergeAndNormalizeLayoutParams(this, option, inputPositionParams);\n  };\n  /**\r\n   * @override\r\n   */\n  ScrollableLegendModel.prototype.mergeOption = function (option, ecModel) {\n    _super.prototype.mergeOption.call(this, option, ecModel);\n    mergeAndNormalizeLayoutParams(this, this.option, option);\n  };\n  ScrollableLegendModel.type = 'legend.scroll';\n  ScrollableLegendModel.defaultOption = inheritDefaultOption(LegendModel.defaultOption, {\n    scrollDataIndex: 0,\n    pageButtonItemGap: 5,\n    pageButtonGap: null,\n    pageButtonPosition: 'end',\n    pageFormatter: '{current}/{total}',\n    pageIcons: {\n      horizontal: ['M0,0L12,-10L12,10z', 'M0,0L-12,-10L-12,10z'],\n      vertical: ['M0,0L20,0L10,-20z', 'M0,0L20,0L10,20z']\n    },\n    pageIconColor: '#2f4554',\n    pageIconInactiveColor: '#aaa',\n    pageIconSize: 15,\n    pageTextStyle: {\n      color: '#333'\n    },\n    animationDurationUpdate: 800\n  });\n  return ScrollableLegendModel;\n}(LegendModel);\n;\n// Do not `ignoreSize` to enable setting {left: 10, right: 10}.\nfunction mergeAndNormalizeLayoutParams(legendModel, target, raw) {\n  var orient = legendModel.getOrient();\n  var ignoreSize = [1, 1];\n  ignoreSize[orient.index] = 0;\n  mergeLayoutParam(target, raw, {\n    type: 'box',\n    ignoreSize: !!ignoreSize\n  });\n}\nexport default ScrollableLegendModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\n/**\r\n * Separate legend and scrollable legend to reduce package size.\r\n */\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as layoutUtil from '../../util/layout.js';\nimport LegendView from './LegendView.js';\nvar Group = graphic.Group;\nvar WH = ['width', 'height'];\nvar XY = ['x', 'y'];\nvar ScrollableLegendView = /** @class */function (_super) {\n  __extends(ScrollableLegendView, _super);\n  function ScrollableLegendView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ScrollableLegendView.type;\n    _this.newlineDisabled = true;\n    _this._currentIndex = 0;\n    return _this;\n  }\n  ScrollableLegendView.prototype.init = function () {\n    _super.prototype.init.call(this);\n    this.group.add(this._containerGroup = new Group());\n    this._containerGroup.add(this.getContentGroup());\n    this.group.add(this._controllerGroup = new Group());\n  };\n  /**\r\n   * @override\r\n   */\n  ScrollableLegendView.prototype.resetInner = function () {\n    _super.prototype.resetInner.call(this);\n    this._controllerGroup.removeAll();\n    this._containerGroup.removeClipPath();\n    this._containerGroup.__rectSize = null;\n  };\n  /**\r\n   * @override\r\n   */\n  ScrollableLegendView.prototype.renderInner = function (itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {\n    var self = this;\n    // Render content items.\n    _super.prototype.renderInner.call(this, itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition);\n    var controllerGroup = this._controllerGroup;\n    // FIXME: support be 'auto' adapt to size number text length,\n    // e.g., '3/12345' should not overlap with the control arrow button.\n    var pageIconSize = legendModel.get('pageIconSize', true);\n    var pageIconSizeArr = zrUtil.isArray(pageIconSize) ? pageIconSize : [pageIconSize, pageIconSize];\n    createPageButton('pagePrev', 0);\n    var pageTextStyleModel = legendModel.getModel('pageTextStyle');\n    controllerGroup.add(new graphic.Text({\n      name: 'pageText',\n      style: {\n        // Placeholder to calculate a proper layout.\n        text: 'xx/xx',\n        fill: pageTextStyleModel.getTextColor(),\n        font: pageTextStyleModel.getFont(),\n        verticalAlign: 'middle',\n        align: 'center'\n      },\n      silent: true\n    }));\n    createPageButton('pageNext', 1);\n    function createPageButton(name, iconIdx) {\n      var pageDataIndexName = name + 'DataIndex';\n      var icon = graphic.createIcon(legendModel.get('pageIcons', true)[legendModel.getOrient().name][iconIdx], {\n        // Buttons will be created in each render, so we do not need\n        // to worry about avoiding using legendModel kept in scope.\n        onclick: zrUtil.bind(self._pageGo, self, pageDataIndexName, legendModel, api)\n      }, {\n        x: -pageIconSizeArr[0] / 2,\n        y: -pageIconSizeArr[1] / 2,\n        width: pageIconSizeArr[0],\n        height: pageIconSizeArr[1]\n      });\n      icon.name = name;\n      controllerGroup.add(icon);\n    }\n  };\n  /**\r\n   * @override\r\n   */\n  ScrollableLegendView.prototype.layoutInner = function (legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {\n    var selectorGroup = this.getSelectorGroup();\n    var orientIdx = legendModel.getOrient().index;\n    var wh = WH[orientIdx];\n    var xy = XY[orientIdx];\n    var hw = WH[1 - orientIdx];\n    var yx = XY[1 - orientIdx];\n    selector && layoutUtil.box(\n    // Buttons in selectorGroup always layout horizontally\n    'horizontal', selectorGroup, legendModel.get('selectorItemGap', true));\n    var selectorButtonGap = legendModel.get('selectorButtonGap', true);\n    var selectorRect = selectorGroup.getBoundingRect();\n    var selectorPos = [-selectorRect.x, -selectorRect.y];\n    var processMaxSize = zrUtil.clone(maxSize);\n    selector && (processMaxSize[wh] = maxSize[wh] - selectorRect[wh] - selectorButtonGap);\n    var mainRect = this._layoutContentAndController(legendModel, isFirstRender, processMaxSize, orientIdx, wh, hw, yx, xy);\n    if (selector) {\n      if (selectorPosition === 'end') {\n        selectorPos[orientIdx] += mainRect[wh] + selectorButtonGap;\n      } else {\n        var offset = selectorRect[wh] + selectorButtonGap;\n        selectorPos[orientIdx] -= offset;\n        mainRect[xy] -= offset;\n      }\n      mainRect[wh] += selectorRect[wh] + selectorButtonGap;\n      selectorPos[1 - orientIdx] += mainRect[yx] + mainRect[hw] / 2 - selectorRect[hw] / 2;\n      mainRect[hw] = Math.max(mainRect[hw], selectorRect[hw]);\n      mainRect[yx] = Math.min(mainRect[yx], selectorRect[yx] + selectorPos[1 - orientIdx]);\n      selectorGroup.x = selectorPos[0];\n      selectorGroup.y = selectorPos[1];\n      selectorGroup.markRedraw();\n    }\n    return mainRect;\n  };\n  ScrollableLegendView.prototype._layoutContentAndController = function (legendModel, isFirstRender, maxSize, orientIdx, wh, hw, yx, xy) {\n    var contentGroup = this.getContentGroup();\n    var containerGroup = this._containerGroup;\n    var controllerGroup = this._controllerGroup;\n    // Place items in contentGroup.\n    layoutUtil.box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), !orientIdx ? null : maxSize.width, orientIdx ? null : maxSize.height);\n    layoutUtil.box(\n    // Buttons in controller are layout always horizontally.\n    'horizontal', controllerGroup, legendModel.get('pageButtonItemGap', true));\n    var contentRect = contentGroup.getBoundingRect();\n    var controllerRect = controllerGroup.getBoundingRect();\n    var showController = this._showController = contentRect[wh] > maxSize[wh];\n    // In case that the inner elements of contentGroup layout do not based on [0, 0]\n    var contentPos = [-contentRect.x, -contentRect.y];\n    // Remain contentPos when scroll animation perfroming.\n    // If first rendering, `contentGroup.position` is [0, 0], which\n    // does not make sense and may cause unexepcted animation if adopted.\n    if (!isFirstRender) {\n      contentPos[orientIdx] = contentGroup[xy];\n    }\n    // Layout container group based on 0.\n    var containerPos = [0, 0];\n    var controllerPos = [-controllerRect.x, -controllerRect.y];\n    var pageButtonGap = zrUtil.retrieve2(legendModel.get('pageButtonGap', true), legendModel.get('itemGap', true));\n    // Place containerGroup and controllerGroup and contentGroup.\n    if (showController) {\n      var pageButtonPosition = legendModel.get('pageButtonPosition', true);\n      // controller is on the right / bottom.\n      if (pageButtonPosition === 'end') {\n        controllerPos[orientIdx] += maxSize[wh] - controllerRect[wh];\n      }\n      // controller is on the left / top.\n      else {\n        containerPos[orientIdx] += controllerRect[wh] + pageButtonGap;\n      }\n    }\n    // Always align controller to content as 'middle'.\n    controllerPos[1 - orientIdx] += contentRect[hw] / 2 - controllerRect[hw] / 2;\n    contentGroup.setPosition(contentPos);\n    containerGroup.setPosition(containerPos);\n    controllerGroup.setPosition(controllerPos);\n    // Calculate `mainRect` and set `clipPath`.\n    // mainRect should not be calculated by `this.group.getBoundingRect()`\n    // for sake of the overflow.\n    var mainRect = {\n      x: 0,\n      y: 0\n    };\n    // Consider content may be overflow (should be clipped).\n    mainRect[wh] = showController ? maxSize[wh] : contentRect[wh];\n    mainRect[hw] = Math.max(contentRect[hw], controllerRect[hw]);\n    // `containerRect[yx] + containerPos[1 - orientIdx]` is 0.\n    mainRect[yx] = Math.min(0, controllerRect[yx] + controllerPos[1 - orientIdx]);\n    containerGroup.__rectSize = maxSize[wh];\n    if (showController) {\n      var clipShape = {\n        x: 0,\n        y: 0\n      };\n      clipShape[wh] = Math.max(maxSize[wh] - controllerRect[wh] - pageButtonGap, 0);\n      clipShape[hw] = mainRect[hw];\n      containerGroup.setClipPath(new graphic.Rect({\n        shape: clipShape\n      }));\n      // Consider content may be larger than container, container rect\n      // can not be obtained from `containerGroup.getBoundingRect()`.\n      containerGroup.__rectSize = clipShape[wh];\n    } else {\n      // Do not remove or ignore controller. Keep them set as placeholders.\n      controllerGroup.eachChild(function (child) {\n        child.attr({\n          invisible: true,\n          silent: true\n        });\n      });\n    }\n    // Content translate animation.\n    var pageInfo = this._getPageInfo(legendModel);\n    pageInfo.pageIndex != null && graphic.updateProps(contentGroup, {\n      x: pageInfo.contentPosition[0],\n      y: pageInfo.contentPosition[1]\n    },\n    // When switch from \"show controller\" to \"not show controller\", view should be\n    // updated immediately without animation, otherwise causes weird effect.\n    showController ? legendModel : null);\n    this._updatePageInfoView(legendModel, pageInfo);\n    return mainRect;\n  };\n  ScrollableLegendView.prototype._pageGo = function (to, legendModel, api) {\n    var scrollDataIndex = this._getPageInfo(legendModel)[to];\n    scrollDataIndex != null && api.dispatchAction({\n      type: 'legendScroll',\n      scrollDataIndex: scrollDataIndex,\n      legendId: legendModel.id\n    });\n  };\n  ScrollableLegendView.prototype._updatePageInfoView = function (legendModel, pageInfo) {\n    var controllerGroup = this._controllerGroup;\n    zrUtil.each(['pagePrev', 'pageNext'], function (name) {\n      var key = name + 'DataIndex';\n      var canJump = pageInfo[key] != null;\n      var icon = controllerGroup.childOfName(name);\n      if (icon) {\n        icon.setStyle('fill', canJump ? legendModel.get('pageIconColor', true) : legendModel.get('pageIconInactiveColor', true));\n        icon.cursor = canJump ? 'pointer' : 'default';\n      }\n    });\n    var pageText = controllerGroup.childOfName('pageText');\n    var pageFormatter = legendModel.get('pageFormatter');\n    var pageIndex = pageInfo.pageIndex;\n    var current = pageIndex != null ? pageIndex + 1 : 0;\n    var total = pageInfo.pageCount;\n    pageText && pageFormatter && pageText.setStyle('text', zrUtil.isString(pageFormatter) ? pageFormatter.replace('{current}', current == null ? '' : current + '').replace('{total}', total == null ? '' : total + '') : pageFormatter({\n      current: current,\n      total: total\n    }));\n  };\n  /**\r\n   *  contentPosition: Array.<number>, null when data item not found.\r\n   *  pageIndex: number, null when data item not found.\r\n   *  pageCount: number, always be a number, can be 0.\r\n   *  pagePrevDataIndex: number, null when no previous page.\r\n   *  pageNextDataIndex: number, null when no next page.\r\n   * }\r\n   */\n  ScrollableLegendView.prototype._getPageInfo = function (legendModel) {\n    var scrollDataIndex = legendModel.get('scrollDataIndex', true);\n    var contentGroup = this.getContentGroup();\n    var containerRectSize = this._containerGroup.__rectSize;\n    var orientIdx = legendModel.getOrient().index;\n    var wh = WH[orientIdx];\n    var xy = XY[orientIdx];\n    var targetItemIndex = this._findTargetItemIndex(scrollDataIndex);\n    var children = contentGroup.children();\n    var targetItem = children[targetItemIndex];\n    var itemCount = children.length;\n    var pCount = !itemCount ? 0 : 1;\n    var result = {\n      contentPosition: [contentGroup.x, contentGroup.y],\n      pageCount: pCount,\n      pageIndex: pCount - 1,\n      pagePrevDataIndex: null,\n      pageNextDataIndex: null\n    };\n    if (!targetItem) {\n      return result;\n    }\n    var targetItemInfo = getItemInfo(targetItem);\n    result.contentPosition[orientIdx] = -targetItemInfo.s;\n    // Strategy:\n    // (1) Always align based on the left/top most item.\n    // (2) It is user-friendly that the last item shown in the\n    // current window is shown at the begining of next window.\n    // Otherwise if half of the last item is cut by the window,\n    // it will have no chance to display entirely.\n    // (3) Consider that item size probably be different, we\n    // have calculate pageIndex by size rather than item index,\n    // and we can not get page index directly by division.\n    // (4) The window is to narrow to contain more than\n    // one item, we should make sure that the page can be fliped.\n    for (var i = targetItemIndex + 1, winStartItemInfo = targetItemInfo, winEndItemInfo = targetItemInfo, currItemInfo = null; i <= itemCount; ++i) {\n      currItemInfo = getItemInfo(children[i]);\n      if (\n      // Half of the last item is out of the window.\n      !currItemInfo && winEndItemInfo.e > winStartItemInfo.s + containerRectSize\n      // If the current item does not intersect with the window, the new page\n      // can be started at the current item or the last item.\n      || currItemInfo && !intersect(currItemInfo, winStartItemInfo.s)) {\n        if (winEndItemInfo.i > winStartItemInfo.i) {\n          winStartItemInfo = winEndItemInfo;\n        } else {\n          // e.g., when page size is smaller than item size.\n          winStartItemInfo = currItemInfo;\n        }\n        if (winStartItemInfo) {\n          if (result.pageNextDataIndex == null) {\n            result.pageNextDataIndex = winStartItemInfo.i;\n          }\n          ++result.pageCount;\n        }\n      }\n      winEndItemInfo = currItemInfo;\n    }\n    for (var i = targetItemIndex - 1, winStartItemInfo = targetItemInfo, winEndItemInfo = targetItemInfo, currItemInfo = null; i >= -1; --i) {\n      currItemInfo = getItemInfo(children[i]);\n      if (\n      // If the the end item does not intersect with the window started\n      // from the current item, a page can be settled.\n      (!currItemInfo || !intersect(winEndItemInfo, currItemInfo.s)\n      // e.g., when page size is smaller than item size.\n      ) && winStartItemInfo.i < winEndItemInfo.i) {\n        winEndItemInfo = winStartItemInfo;\n        if (result.pagePrevDataIndex == null) {\n          result.pagePrevDataIndex = winStartItemInfo.i;\n        }\n        ++result.pageCount;\n        ++result.pageIndex;\n      }\n      winStartItemInfo = currItemInfo;\n    }\n    return result;\n    function getItemInfo(el) {\n      if (el) {\n        var itemRect = el.getBoundingRect();\n        var start = itemRect[xy] + el[xy];\n        return {\n          s: start,\n          e: start + itemRect[wh],\n          i: el.__legendDataIndex\n        };\n      }\n    }\n    function intersect(itemInfo, winStart) {\n      return itemInfo.e >= winStart && itemInfo.s <= winStart + containerRectSize;\n    }\n  };\n  ScrollableLegendView.prototype._findTargetItemIndex = function (targetDataIndex) {\n    if (!this._showController) {\n      return 0;\n    }\n    var index;\n    var contentGroup = this.getContentGroup();\n    var defaultIndex;\n    contentGroup.eachChild(function (child, idx) {\n      var legendDataIdx = child.__legendDataIndex;\n      // FIXME\n      // If the given targetDataIndex (from model) is illegal,\n      // we use defaultIndex. But the index on the legend model and\n      // action payload is still illegal. That case will not be\n      // changed until some scenario requires.\n      if (defaultIndex == null && legendDataIdx != null) {\n        defaultIndex = idx;\n      }\n      if (legendDataIdx === targetDataIndex) {\n        index = idx;\n      }\n    });\n    return index != null ? index : defaultIndex;\n  };\n  ScrollableLegendView.type = 'legend.scroll';\n  return ScrollableLegendView;\n}(LegendView);\nexport default ScrollableLegendView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nexport default function installScrollableLegendAction(registers) {\n  /**\r\n   * @event legendScroll\r\n   * @type {Object}\r\n   * @property {string} type 'legendScroll'\r\n   * @property {string} scrollDataIndex\r\n   */\n  registers.registerAction('legendScroll', 'legendscroll', function (payload, ecModel) {\n    var scrollDataIndex = payload.scrollDataIndex;\n    scrollDataIndex != null && ecModel.eachComponent({\n      mainType: 'legend',\n      subType: 'scroll',\n      query: payload\n    }, function (legendModel) {\n      legendModel.setScrollDataIndex(scrollDataIndex);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { use } from '../../extension.js';\nimport { install as installLegendPlain } from './installLegendPlain.js';\nimport ScrollableLegendModel from './ScrollableLegendModel.js';\nimport ScrollableLegendView from './ScrollableLegendView.js';\nimport installScrollableLegendAction from './scrollableLegendAction.js';\nexport function install(registers) {\n  use(installLegendPlain);\n  registers.registerComponentModel(ScrollableLegendModel);\n  registers.registerComponentView(ScrollableLegendView);\n  installScrollableLegendAction(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { use } from '../../extension.js';\nimport { install as installLegendPlain } from './installLegendPlain.js';\nimport { install as installLegendScroll } from './installLegendScroll.js';\nexport function install(registers) {\n  use(installLegendPlain);\n  use(installLegendScroll);\n}"],"names":["getDefaultLabel","data","dataIndex","labelDims","len","rawVal","retrieveRawValue","vals","i","getDefaultInterpolatedLabel","interpolatedValue","isArray","dimIndex","createGridClipPath","cartesian","hasAnimation","seriesModel","done","during","rect","x","y","width","height","lineWidth","clipPath","graphic.Rect","createPolarClipPath","polar","sectorArea","r0","round","r","graphic.Sector","createClipPath","coordSys","isCoordinateSystemType","type","samplers","frame","sum","count","max","min","indexSampler","dataSample","seriesType","ecModel","api","sampling","baseAxis","valueAxis","extent","dpr","size","rate","sampler","isString","isFunction","BaseBarSeriesModel","_super","__extends","_this","option","createSeriesData","value","dims","startingAtTick","clampData_1","pt_1","each","axis","idx","tickCoords","alignTicksWithLabel","targetTickId","isEnd","leftCoord","coord","stepTickValue","tickCoord","tickValue","offset","offsetIndex","SeriesModel","BarSeriesModel","progressiveThreshold","largeThreshold","selectors","inheritDefaultOption","SausageShape","SausagePath","opts","ctx","shape","cx","cy","dr","rCenter","startAngle","endAngle","clockwise","PI2","lessThanCircle","unitStartX","unitStartY","unitEndX","unitEndY","Path","createSectorCalculateTextPosition","positionMapping","isRoundCap","out","boundingRect","textPosition","calculateTextPosition","mappedSectorPosition","distance","sector","middleR","middleAngle","extraDist","mathCos","mathSin","textAlign","textVerticalAlign","adjustAngleDistanceX","adjustAngleDistanceY","setSectorTextRotation","rotateType","isNumber","anchorAngle","rotate","angle","getSectorCornerRadius","model","zeroIfNull","cornerRadius","map","cr","parsePercent","mathMax","mathMin","getClipArea","coordSysClipArea","expandWidth","BarView","payload","coordinateSystemType","params","cb","traverseElements","isLargeDraw","group","oldData","isHorizontalOrRadial","animationModel","realtimeSortCfg","shouldRealtimeSort","needsClip","roundCap","drawBackground","backgroundModel","barBorderRadius","bgEls","oldBgEls","isInitSort","isChangeOrder","createBackground","bgLayout","getLayout","bgEl","createBackgroundEl","itemModel","layout","isValidLayout","isClipped","clip","el","elementCreator","updateStyle","updateRealtimeAnimation","initProps","newIndex","oldIndex","createBackgroundShape","updateProps","saveOldStyle","textEl","labelInnerStore","labelInner","removeElementWithFadeOut","bgGroup","Group","createLarge","orderMapping_1","orderMapping","info","ordinalNumber","dataIdx","mappedValue","a","b","item","scale","ordinalDataDim","lastValue","tickNum","rawIdx","orderInfo","tickMax","sortInfo","sortResult","getECData","ChartView","coordSysBoundingRect","signWidth","signHeight","coordSysX2","coordSysY2","x2","y2","xClipped","yClipped","signR","tmp","clipped","isHorizontal","axisModel","isUpdate","Rect","extend","rectShape","animateProperty","isRadial","ShapeClass","Sausage","Sector","positionMap","createPolarPositionMapping","sectorShape","animateTarget","realtimeSortOption","seriesAnimationModel","seriesTarget","axisTarget","axisAnimationModel","checkPropertiesNotValid","obj","props","rectPropties","polarPropties","fixedLineWidth","getLineWidth","signX","signY","isZeroOnPolar","arcOrAngle","position","isPolar","style","borderRadius","cursorStyle","labelPositionOutside","labelStatesModels","getLabelStatesModels","setLabelStyle","label","setLabelValueAnimation","emphasisModel","toggleHoverEmphasis","setStatesStylesFromModel","state","rawLayout","borderColor","LagePathShape","LargePath","points","baseDimIdx","valueDimIdx","startPoint","barWidth","progressiveEls","incremental","largeDataIndices","bgPoints","largePathUpdateDataIndex","throttle","event","largePath","largePathFindDataIndex","ii","coordLayout","ElementClz","install","registers","BarSeries","zrUtil.curry","createProgressiveLayout","componentType","componentModel","RADIAN","getViewRect","layout.getLayoutRect","getBasicPieLayout","viewRect","center","radius","zrUtil.isArray","point","pieLayout","valueDim","_a","padAngle","minAngle","minAndPadAngle","validDataCount","unitRadian","roseType","stillShowZeroSum","dir","angles","halfPadAngle","normalizeArcAngles","layoutData","getSeriesLayoutData","angleRange","restAngle","valueSumLargerThanMinAngle","currentAngle","actualStartAngle","actualEndAngle","linearMap","angle_1","layout_1","layout_2","makeInner","dataFilter","legendModels","name","adjustSingleSide","list","viewWidth","viewHeight","viewLeft","viewTop","farthestX","recalculateXOnSemiToAlignOnEllipseCurve","semi","rB","rB2","dy","rA","rA2","dx","newX","deltaX","newTargetWidth","constrainTextWidth","recalculateX","items","topSemi","bottomSemi","shiftLayoutOnY","avoidOverlap","labelLayoutList","leftList","rightList","leftmostX","rightmostX","isPositionCenter","linePoints","targetTextWidth","isAlignToEdge","padding","paddingH","extraPaddingH","realTextWidth","dist","availableWidth","forceRecalculate","textRect","bgColor","overflow","oldOuterWidth","oldHeight","innerRect","availableInnerWidth","newWidth","newRect","margin","pieLabelLayout","hasLabelRotate","minShowLabelRadian","setNotShow","isLabelShown","key","labelLine","labelModel","labelPosition","labelDistance","labelAlignTo","edgeDistance","bleedMargin","labelLineModel","labelLineLen","labelLineLen2","midAngle","nx","ny","textX","textY","isLabelInside","x1","y1","x3","y3","PI","labelRotate","radialAngle","rad","isDown","selectState","Point","notShowLabel","limitTurnAngle","limitSurfaceAngle","PiePiece","text","graphic.Text","firstCreate","animationType","graphic.initProps","graphic.updateProps","labelText","visualColor","visualOpacity","polyline","graphic.Polyline","setLabelLineStyle","getLabelLineStatesModels","retrieve3","PieView","s","piePiece","newIdx","oldIdx","graphic.removeElementWithFadeOut","labelLayout","itemLayout","createSeriesDataSimply","opt","nameList","source","dimensions","prepareSeriesDataSchema","SeriesData","LegendVisualProvider","getDataWithEncodedVisual","getRawData","rawData","dataWithEncodedVisual","innerData","modelUtil.makeInner","PieSeriesModel","zrUtil.bind","makeSeriesEncodeForNameBased","dataInner","seats","valueList_1","getPercentSeats","modelUtil.defaultEmphasis","labelLineNormalOpt","labelLineEmphasisOpt","negativeDataFilter","curValue","createLegacyDataSelectAction","curry","GridModel","ComponentModel","CartesianAxisModel","SINGLE_REFERRING","zrUtil.mixin","AxisModelCommonMixin","defaultOption","categoryAxis","zrUtil.merge","timeAxis","logAxis","zrUtil.defaults","axisDefault","AXIS_TYPES","axisModelCreator","axisName","BaseAxisModelClass","extraDefaultOption","v","axisType","merge","AxisModel","layoutMode","fetchLayoutMode","inputPositionParams","getLayoutParams","themeModel","getAxisType","mergeLayoutParam","thisOption","OrdinalMeta","Cartesian","dim","zrUtil.map","scaleType","zrUtil.filter","cartesian2DDimensions","canCalculateAffineTransform","Cartesian2D","xAxisScale","yAxisScale","xScaleExtent","yScaleExtent","start","end","xScaleSpan","yScaleSpan","scaleX","scaleY","translateX","translateY","m","invert","axisX","axisY","data1","data2","zoneDiag1","zoneDiag2","area","zone","BoundingRect","clamp","xVal","yVal","applyTransform","xAxis","yAxis","xScale","yScale","xAxisExtent","yAxisExtent","tolerance","xExtent","yExtent","Axis2D","coordExtent","asc","ret","Axis","gridModel","grid","otherAxisOnZeroOf","rawAxisPosition","axisPosition","axisDim","rectBound","axisOffset","posBound","onZeroCoord","dirMap","zrUtil.retrieve","isCartesian2DSeries","findAxisModels","axisModelMap","zrUtil.each","mathLog","alignScaleTicks","alignToScale","intervalScaleProto","IntervalScale","alignToTicks","alignToNicedTicks","alignToSplitNumber","alignToInterval","scaleExtent","getScaleExtent","rawExtent","isMinFixed","isMaxFixed","logBase","interval","increaseInterval","nicedSplitNumber","range","t0","t1","Grid","axesMap","updateAxisTicks","axes","alignTo","axesIndices","keys","axisNeedsAlign","isIntervalOrLogScale","niceScaleExtent","onZeroRecords","fixAxisOnZero","ignoreContainLabel","boxLayoutParams","isContainLabel","gridRect","getLayoutRect","axesList","adjustAxes","labelUnionRect","estimateLabelUnionRect","updateAxisTransform","axisIndex","axesMapOnDim","xAxisIndex","yAxisIndex","isObject","coordList","finder","target","xAxisModel","yAxisModel","coordsList","indexOf","axisPositionUsed","axesCount","createAxisCreator","dimName","isAxisUsedInTheGrid","createScaleByModel","isCategory","categorySortInfo","axesModelMap","unionExtent","getDataDimensionsOnAxis","baseAxes","otherAxes","otherAxis","grids","otherAxisDim","onZero","onZeroAxisIndex","canOnZeroToAxis","getOnZeroRecordKey","ifAxisCrossZero","coordBase","axisExtent","axisExtentSum","AxisBuilder","graphic.Group","defaults","transformGroup","builders","axisRotation","textRotation","direction","rotationDiff","remRadian","isRadianAroundZero","eventData","tooltipOpt","shown","matrix","pt1","pt2","inverse","v2ApplyTransform","lineStyle","line","graphic.Line","graphic.subPixelOptimizeLine","arrows","arrowSize","arrowOffset","normalizeSymbolOffset","symbolWidth_1","symbolHeight_1","index","symbol","createSymbol","pt","ticksEls","buildAxisMajorTicks","labelEls","buildAxisLabel","fixMinMaxLabelShow","buildAxisMinorTicks","labelList","prepareLayoutList","hideOverlap","retrieve","nameLocation","nameDirection","textStyleModel","gap","gapSignal","pos","isNameLocationCenter","nameRotation","axisNameAvailableWidth","endTextLayout","textFont","truncateOpt","ellipsis","maxWidth","createTextStyle","graphic.setTooltipConfig","rotation","textRotate","onLeft","tickEls","shouldShowAllLabels","showMinLabel","showMaxLabel","firstLabel","nextLabel","lastLabel","prevLabel","firstTick","nextTick","lastTick","prevTick","ignoreEl","isTwoLabelOverlapped","current","next","firstRect","nextRect","mRotationBack","matrixUtil.identity","matrixUtil.rotate","matrixUtil.mul","createTicks","ticksCoords","tickTransform","tickEndCoord","tickLineStyle","anidPrefix","tickEl","tickModel","lineStyleModel","tickDirection","minorTickModel","minorTicksCoords","minorTickLineStyle","minorTicksEls","k","show","labelMargin","labels","labelRotation","rawCategoryData","silent","triggerEvent","labelItem","formattedLabel","rawLabel","itemLabelModel","rawCategoryItem","Model","textColor","align","alignMin","retrieve2","alignMax","verticalAlign","verticalAlignMin","verticalAlignMax","collect","result","collectAxesInfo","collectSeriesInfo","globalTooltipModel","globalAxisPointerModel","linksOption","linkGroups","coordSysKey","makeKey","axesInfoInCoordSys","coordSysModel","baseTooltipModel","saveTooltipAxisInfo","triggerAxis","cross","tooltipAxes","fromTooltip","triggerTooltip","axisPointerModel","axisPointerShow","isHandleTrigger","makeAxisPointerModel","snap","triggerEmphasis","axisKey","involveSeries","axisInfo","groupIndex","getLinkGroupIndex","linkGroup","tooltipAxisPointerModel","fields","volatileOption","field","clone","labelOption","tooltipAxisPointerLabelShow","crossStyle","seriesTooltipTrigger","seriesTooltipShow","linkOption","checkPropInLink","linkPropValue","axisPropValue","fixValue","getAxisInfo","status","useHandle","coordSysAxesInfo","getAxisPointerModel","axisPointerClazz","AxisView","axisPointerModelHelper.fixValue","axisPointer","forceRender","Clazz","axisPointerModelHelper.getAxisPointerModel","clazz","ComponentView","inner","rectCoordAxisBuildSplitArea","axisView","axisGroup","splitAreaModel","areaStyleModel","areaColors","areaColorsLen","lastSplitAreaColors","newSplitAreaColors","zrUtil.createHashMap","colorIndex","cIndex","prev","areaStyle","rectCoordAxisHandleRemove","axisBuilderAttrs","selfBuilderAttrs","CartesianAxisView","oldAxisGroup","cartesianAxisHelper.layout","axisBuilder","zrUtil.extend","elementType","cartesians","axisElementBuilders","isInitialSortFromBarRacing","graphic.groupTransition","splitLineModel","lineColors","showMinLine","showMaxLine","lineCount","p1","p2","minorSplitLineModel","CartesianXAxisView","CartesianYAxisView","GridView","extraOption","ATTR","isTaken","zr","resourceKey","getStore","echarts.registerAction","noop","RoamController","mousedownHandler","bind","mousemoveHandler","mouseupHandler","mousewheelHandler","pinchHandler","controlType","pointerChecker","eventTool.isMiddleOrRightButtonOnMouseUpDown","isAvailableBehavior","interactionMutex.isTaken","oldX","oldY","eventTool.stop","trigger","shouldZoom","shouldMove","wheelDelta","absWheelDeltaDelta","originX","originY","factor","checkPointerAndTrigger","absDelta","scrollDelta","Eventful","controller","eventName","behaviorToCheck","e","contollerEvent","settings","setting","linkSeriesData","mainData","datas","linkAll","methodName","transferInjection","cloneShallowInjection","changeInjection","assert","res","isMainData","linkSingle","dataType","getLinkedData","getLinkedDataAll","TreeNode","hostTree","options","context","zrUtil.isFunction","zrUtil.isString","order","children","suppressVisitSub","depth","child","id","node","includeSelf","ancestors","indices","currNode","childNode","dimension","path","parent","Tree","hostModel","rawIndex","nodes","dataRoot","beforeLink","tree","listData","dimMax","buildHierarchy","dataNode","parentNode","convertOptionIdName","addChild","retrieveTargetInfo","validPayloadTypes","zrUtil.indexOf","root","targetNode","targetNodeId","getPathToRoot","aboveViewRoot","viewRoot","viewPath","wrapTreePathInfo","treePathInfo","nodeDataIndex","actionTypes","installTreemapAction","handleRootToNode","types","targetInfo","helper.retrieveTargetInfo","originViewRoot","helper.aboveViewRoot","enableAriaDecalForTree","decalPaletteScope","decal","getDecalFromPalette","TreemapSeriesModel","completeTreeValue","levels","designatedVisualItemStyle","designatedVisualModel","setDefault","levelModels","levelDefine","nodeData","levelModel","multipleSeries","createTooltipMarkup","layoutInfo","idIndexMap","childValue","thisValue","globalColorList","normalizeToArray","globalDecalList","hasColorDefine","hasDecalDefine","modelColor","modelDecal","level0","TEXT_PADDING","ITEM_GAP","ARRAY_LENGTH","Breadcrumb","containerGroup","onSelect","thisGroup","normalStyleModel","emphasisTextStyleModel","layoutParam","layout.positionElement","itemWidth","lastX","emptyItemWidth","availableSize","layout.getAvailableSize","totalWidth","renderList","emphasisItemStyle","itemNode","graphic.Polygon","makeItemPoints","Z2_EMPHASIS_LIFT","packEventData","itemHeight","head","tail","AnimationWrap","duration","delay","easing","callback","checkTerminate","createWrap","DRAG_THRESHOLD","PATH_LABEL_NOAMAL","PATH_UPPERLABEL_NORMAL","Z2_BASE","Z2_BG","Z2_CONTENT","getStateItemStyle","makeStyleMapper","getItemStyleNormal","itemStyle","TreemapView","createStorage","models","payloadType","isInit","thisStorage","reRoot","renderResult","thisTree","oldTree","lastsForAnimation","oldStorage","willInvisibleEls","doRenderNode","thisNode","oldNode","parentGroup","renderNode","dualTravel","willDeleteEls","clearStorage","_oldRootLayout","rootLayout","renderFinally","thisViewChildren","oldViewChildren","sameTree","processNode","DataDiffer","getKey","storage","store","storageName","delEls","els","durationOption","easingOption","animationWrap","animationUtil.createWrap","innerStore","targetX","targetY","last","controllerHost","mouseX","mouseY","zoomDelta","zoomLimit","_controllerHost","newZoom","zoomMin","zoomMax","zoomScale","matrix.create","matrix.translate","matrix.scale","nodeClick","link","linkTarget","windowOpen","thisLayout","nodeModel","thisWidth","thisHeight","borderWidth","thisInvisible","thisRawIndex","oldRawIndex","upperHeight","isParent","itemStyleNormalModel","itemStyleEmphasisModel","itemStyleBlurModel","itemStyleSelectModel","giveGraphic","bg","renderBackground","focus","blurScope","isDisabled","focusOrIndices","isHighDownDispatcher","setAsHighDownDispatcher","enableHoverFocus","content","renderContent","useUpperLabel","ecData","processInvisible","visualBorderColor","normalStyle","emphasisStyle","blurStyle","selectStyle","upperLabelWidth","prepareText","setDefaultStateProxy","contentWidth","contentHeight","nodeStyle","element","rectEl","upperLabelRect","normalLabelModel","defaultText","isShow","textStyle","textPadding","normalizeCssArray","addDrillDownIcon","textEmphasisState","iconChar","Ctor","z","lasts","prepareAnimationWhenHasOld","Displayable","calculateZ2","prepareAnimationWhenNoOld","lastCfg","isGroup","parentOldX","parentOldY","parentOldBg","z2InLevel","zrUtil.isObject","CATEGORY_DEFAULT_VISUAL_INDEX","VisualMapping","mappingMethod","visualType","zrUtil.clone","normalizers","visualHandler","normalizeVisualRange","preprocessForPiecewise","preprocessForSpecifiedCategory","zrUtil.assert","normalized","zrUtil.keys","visual","isPrimary","newVisual","newVal","hasVisual","h","visualTypes","types_1","type1","type2","visualType1","visualType2","pieceList","findClosestWhenOutside","possibleI","abs","pieceValue","updatePossible","piece","close_1","littleThan","val","newAbs","makeApplyVisual","isNormalized","doMapCategory","returnRGBArray","zrColor.fastLerp","zrColor.stringify","getSpecifiedVisual","doMapFixed","makePartialColorVisualHandler","color","zrColor.modifyHSL","zrColor.modifyAlpha","createNormalizedToNumericVisual","getter","setter","symbolCfg","doMapToArray","categories","categoryMap","cate","visualArr_1","setVisualToOption","visualArr","doNotNeedPair","applyValue","colorChannel","sourceExtent","pieceIndex","zrColor.parse","zrUtil.noop","close","ITEM_STYLE_NORMAL","treemapVisual","travelTree","designatedVisual","viewRootAncestors","nodeLayout","nodeItemStyleModel","visuals","buildVisuals","existsStyle","borderColorSaturation","thisNodeColor","calculateColor","calculateBorderColor","viewChildren","mapping_1","buildVisualMapping","childVisual","mapVisual","visualName","getValueVisualDefine","colorAlpha","colorSaturation","modifyHSL","modifyAlpha","rangeVisual","getRangeVisual","visualMin","visualMax","dataExtent","colorMappingBy","mapping","childVisuals","mappingType","retrieveValue","PATH_BORDER_WIDTH","PATH_GAP_WIDTH","PATH_UPPER_LABEL_SHOW","PATH_UPPER_LABEL_HEIGHT","treemapLayout","ecWidth","ecHeight","seriesOption","containerWidth","containerHeight","rootRect","viewAbovePath","helper.getPathToRoot","rootSize","estimateRootSize","sort_1","viewRootLayout_1","squarify","treeRoot","calculateRootPosition","prunning","hideChildren","halfGapWidth","upperLabelHeight","getUpperLabelHeight","layoutOffset","layoutOffsetUpper","totalArea","initChildren","rowFixedLength","best","row","score","worst","childrenVisibleMin","orderBy","overLeafDepth","sort","statistic","filterByThreshold","orderedChildren","visibleMin","deletePoint","diff","ratio","areaMax","areaMin","squareArea","f","flush","idx0WhenH","idx1WhenH","xy","wh","rowOtherLength","rowLen","step","wh1","remain","modWH","wh0","defaultSize","viewArea","siblings","currNodeValue","parentModel","MAX_SAFE_INTEGER","defaultPosition","targetCenter","clipRect","nodeInViewAbovePath","isAboveViewRoot","childClipRect","BaseAxisPointer","handle","elOption","graphicKey","moveAnimation","doUpdateProps","updateMandatoryProps","animation","isCategoryAxis","useSnap","animationThreshold","seriesDataCount","axisPointerModelHelper.getAxisInfo","pointerOption","pointerEl","graphic","labelEl","updateLabelShowHide","handleModel","graphic.createIcon","handleSize","throttleUtil.createOrUpdate","getHandleTransProps","trans","payloadInfo","throttleUtil.clear","xDimIndex","propsEqual","lastProps","newProps","equals_1","zlevel","buildElStyle","axisPointerType","styleModel","buildLabelElOption","labelPos","getValueLabel","paddings","formatUtil.normalizeCssArray","font","textContain.getBoundingRect","confineInContainer","seriesDataIndices","formatter","params_1","axisHelper.getAxisRawValue","idxItem","series","dataParams","getTransformedPosition","transform","matrix.rotate","graphic.applyTransform","buildCartesianSingleLabelElOption","textLayout","makeLineShape","makeRectShape","CartesianAxisPointer","otherExtent","getCartesian","pixelValue","elStyle","viewHelper.buildElStyle","pointerShapeBuilder","viewHelper.buildCartesianSingleLabelElOption","viewHelper.getTransformedPosition","delta","currPosition","cursorOtherValue","cursorPoint","tooltipOptions","targetShape","viewHelper.makeLineShape","getAxisDimIndex","bandWidth","span","viewHelper.makeRectShape","AxisPointerModel","register","handler","env","initGlobalListeners","record","useHandler","doEnter","onLeave","eventType","dis","makeDispatchAction","dispatchTooltipFinally","pendings","showLen","hideLen","actuallyPayload","dispatchAction","currTrigger","pendingList","unregister","AxisPointerView","triggerOn","globalListener.register","globalListener.unregister","findPointFromSeries","seriesIndex","modelUtil.queryDataIndex","valueAxisDim","baseAxisDim","baseDataOffset","baseDim","stackedData","axisTrigger","illegalPoint","isIllegalPoint","inputAxesInfo","axesInfo","shouldHide","outputPayload","showValueMap","dataByCoordSys","updaters","showPointer","showTooltip","coordSysContainsPoint","inputAxisInfo","findInputAxisInfo","processOnAxis","linkTriggers","tarAxisInfo","tarKey","srcAxisInfo","srcKey","srcValItem","makeMapperParam","updateModelActually","dispatchTooltipActually","dispatchHighDownActually","newValue","noSnap","outputFinder","buildPayloadsBySeries","payloadBatch","snapToValue","minDist","minDiff","dataDim","seriesNestestValue","dataIndices","modelHelper.makeKey","coordSysItem","outputAxesInfo","valItem","sampleItem","highDownKey","lastHighlights","newHighlights","batchItem","toHighlight","toDownplay","use","installSimple","installAxisPointer","makeBackground","TooltipModel","shouldTooltipConfine","tooltipModel","confineOption","testStyle","styleProps","TRANSFORM_VENDOR","TRANSITION_VENDOR","toCSSVendorPrefix","styleVendor","styleProp","toCamelCase","getComputedStyle","stl","CSS_TRANSITION_VENDOR","CSS_TRANSFORM_VENDOR","gCssText","mirrorPos","assembleArrow","arrowPosition","backgroundColor","convertToColorString","arrowPos","positionStyle","transformStyle","rotateDeg","rotateRadian","arrowWH","rotatedWH","borderStyle","styleCss","assembleTransition","onlyFade","transitionCurve","transitionOption","transitionText","assembleTransform","toString","x0","y0","is3d","translate","assembleFont","cssText","fontSize","lineHeight","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","assembleCssText","enableTransition","transitionDuration","getPaddingFromTooltipModel","boxShadow","borderName","camelCase","makeStyleCoord","container","zrX","zrY","zrPainter","zrViewportRoot","transformLocalCoord","viewportRootOffset","TooltipHTMLContent","appendTo","isDom","self","normalizeEvent","domStyle","alwaysShowContent","nearPointColor","styleCoord","markers","arrow","arrowEl","enterable","style_1","transforms","ratioX","ratioY","time","TooltipRichContent","markupStyleCreator","throwError","ZRText","propName","bounding","shadowOuterSize","calcShadowOuterSize","mathMaxWith0","proxyRect","TooltipView","renderMode","getTooltipRenderMode","tooltipContent","createOrUpdate","clear","self_1","cmptRef","findComponentReference","pointInfo","tooltipCascadedModel","buildTooltipModel","seriesDispatcher_1","cmptDispatcher_1","findEventDispatcher","singleTooltipModel","cbParamsList","articleMarkup","markupTextArrLegacy","TooltipMarkupStyleCreator","itemCoordSys","axisItem","axisValue","axisValueLabel","axisPointerViewHelper.getValueLabel","axisSectionMarkup","trim","cbParams","seriesTooltipResult","normalizeTooltipFormatResult","frag","valueFormatter","positionExpr","orderMode","builtMarkupText","buildTooltipMarkup","blockBreak","allMarkupText","dispatcher","dataModel","positionDefault","tooltipTrigger","markupText","asyncTicket","isHTMLRenderMode","tooltipConfig","encodeHTMLContent","encodeHTML","tooltipModelCascade","cmpt","subTooltipModel","defaultHtml","formatterParams","html","nearPoint","useUTC","params0","isTimeAxis","timeFormat","formatTpl","cbTicket","tooltipDataParams","contentSize","vAlign","boxLayoutPosition","layoutRect","calcTooltipPosition","refixTooltipPosition","isCenterAlign","confineTooltipPosition","lastCoordSys","lastCbParamsList","contentNotChanged","lastItemCoordSys","indexCoordSys","lastDataByAxis","thisItemCoordSys","thisDataByAxis","lastItem","indexAxis","thisItem","lastIndices","newIndices","lastIdxItem","j","newIdxItem","seriesIdx","lastCbParams","modelCascade","defaultTooltipOption","resultModel","gapH","gapV","domWidth","domHeight","rectWidth","rectHeight","queryOptionMap","preParseFinder","componentMainType","queryResult","queryReferringComponents","view","subEl","TitleModel","TitleView","titleModel","subtextStyleModel","zrUtil.retrieve2","subText","subTextEl","sublink","groupRect","layoutOption","alignStyle","getDefaultSelectorOptions","LegendModel","selector","legendData","hasSelected","name_1","potentialData","availableNames","seriesName","isPotential","provider","names","isNameSpecified","legendNameMap","dataItem","zrUtil.isNumber","selected","selectedMode","LegendView","legendModel","isFirstRender","itemAlign","orient","selectorPosition","positionInfo","viewportSize","maxSize","layoutUtil.getLayoutRect","mainRect","contentGroup","legendDrawnMap","selectMode","excludeSeriesId","legendItemModel","g","lineVisualStyle","legendIcon","itemGroup","dispatchSelectAction","dispatchHighlightAction","dispatchDownplayAction","colorArr","parse","stringify","selectorGroup","selectorItem","emphasisLabelModel","enableHoverEmphasis","itemVisualStyle","drawType","isSelected","iconRotate","symbolKeepAspect","legendIconType","getLegendStyle","getDefaultLegendIcon","hitRect","layoutUtil.box","contentRect","contentPos","selectorRect","selectorPos","selectorButtonGap","orientIdx","hw","yx","iconType","handleCommonProps","visualStyle","propVal","itemStyleModel","iconBrushType","decalStyle","createOrUpdatePatternFromDecal","legendLineModel","visualHasBorder","symboType","icon","dataName","isUseHoverLayer","emphasisState","legendFilter","legendSelectActionHandler","isAllSelect","selectedMap","actionLegendIndices","makeSelectedMap","allSelectedMap","isItemSelected","hasOwn","installLegendAction","ScrollableLegendModel","scrollDataIndex","mergeAndNormalizeLayoutParams","raw","ignoreSize","WH","XY","ScrollableLegendView","controllerGroup","pageIconSize","pageIconSizeArr","createPageButton","pageTextStyleModel","iconIdx","pageDataIndexName","processMaxSize","controllerRect","showController","containerPos","controllerPos","pageButtonGap","pageButtonPosition","clipShape","pageInfo","to","canJump","pageText","pageFormatter","pageIndex","total","containerRectSize","targetItemIndex","targetItem","itemCount","pCount","targetItemInfo","getItemInfo","winStartItemInfo","winEndItemInfo","currItemInfo","intersect","itemRect","itemInfo","winStart","targetDataIndex","defaultIndex","legendDataIdx","installScrollableLegendAction","installLegendPlain","installLegendScroll"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79]}