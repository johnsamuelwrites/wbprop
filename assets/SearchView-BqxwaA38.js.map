{"version":3,"file":"SearchView-BqxwaA38.js","sources":["../../src/views/SearchView.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { ref } from 'vue'\nimport { useWikibaseStore } from '@/stores/wikibase'\nimport { SparqlClient, QueryBuilder } from '@/services/sparql'\nimport type { SparqlResults } from '@/types'\n\nconst wikibaseStore = useWikibaseStore()\nconst searchQuery = ref('')\nconst loading = ref(false)\nconst results = ref<Array<{ id: string; label: string; description: string }>>([])\nconst hasSearched = ref(false)\n\nasync function performSearch() {\n  if (!searchQuery.value.trim()) return\n\n  loading.value = true\n  hasSearched.value = true\n\n  try {\n    const client = new SparqlClient(wikibaseStore.activeConfig)\n    const builder = new QueryBuilder(wikibaseStore.activeConfig)\n    const query = builder.buildPropertySearchQuery(searchQuery.value)\n    const response: SparqlResults = await client.query(query)\n\n    results.value = response.results.bindings.map((binding) => ({\n      id: extractId(binding.property?.value ?? ''),\n      label: binding.propertyLabel?.value ?? '',\n      description: binding.propertyDescription?.value ?? '',\n    }))\n  } catch (error) {\n    console.error('Search failed:', error)\n    results.value = []\n  } finally {\n    loading.value = false\n  }\n}\n\nfunction extractId(uri: string): string {\n  const match = uri.match(/[PQ]\\d+$/)\n  return match ? match[0] : uri\n}\n</script>\n\n<template>\n  <div class=\"search-view\">\n    <v-row class=\"mb-4\">\n      <v-col cols=\"12\">\n        <h1 class=\"text-h4 font-weight-bold\">Search Properties</h1>\n        <p class=\"text-subtitle-1 text-medium-emphasis mt-1\">\n          Find properties in {{ wikibaseStore.activeConfig.name }}\n        </p>\n      </v-col>\n    </v-row>\n\n    <v-row>\n      <v-col cols=\"12\" md=\"8\" lg=\"6\">\n        <v-text-field\n          v-model=\"searchQuery\"\n          prepend-inner-icon=\"mdi-magnify\"\n          label=\"Search for properties\"\n          placeholder=\"e.g., instance of, date of birth\"\n          variant=\"outlined\"\n          clearable\n          :loading=\"loading\"\n          @keyup.enter=\"performSearch\"\n        >\n          <template #append>\n            <v-btn\n              color=\"primary\"\n              :loading=\"loading\"\n              @click=\"performSearch\"\n            >\n              Search\n            </v-btn>\n          </template>\n        </v-text-field>\n      </v-col>\n    </v-row>\n\n    <v-row v-if=\"hasSearched\">\n      <v-col cols=\"12\">\n        <v-card v-if=\"results.length > 0\">\n          <v-list>\n            <v-list-item\n              v-for=\"result in results\"\n              :key=\"result.id\"\n              :title=\"result.label\"\n              :subtitle=\"result.description\"\n            >\n              <template #prepend>\n                <v-chip size=\"small\" color=\"primary\" variant=\"tonal\" class=\"mr-3\">\n                  {{ result.id }}\n                </v-chip>\n              </template>\n            </v-list-item>\n          </v-list>\n        </v-card>\n\n        <v-alert v-else type=\"info\" variant=\"tonal\">\n          No properties found matching \"{{ searchQuery }}\".\n        </v-alert>\n      </v-col>\n    </v-row>\n  </div>\n</template>\n\n<style scoped>\n.search-view {\n  padding: 16px;\n}\n</style>\n"],"names":["wikibaseStore","useWikibaseStore","searchQuery","ref","loading","results","hasSearched","performSearch","client","SparqlClient","query","QueryBuilder","response","binding","extractId","_a","_b","_c","error","uri","match","_openBlock","_createElementBlock","_hoisted_1","_createVNode","_component_v_row","_component_v_col","_cache","_createElementVNode","_hoisted_2","_unref","_component_v_text_field","$event","_component_v_btn","_createBlock","_component_v_card","_component_v_list","_Fragment","_renderList","result","_component_v_list_item","_component_v_chip","_createTextVNode","_toDisplayString","_component_v_alert"],"mappings":"oYAMA,MAAMA,EAAgBC,EAAA,EAChBC,EAAcC,EAAI,EAAE,EACpBC,EAAUD,EAAI,EAAK,EACnBE,EAAUF,EAA+D,EAAE,EAC3EG,EAAcH,EAAI,EAAK,EAE7B,eAAeI,GAAgB,CAC7B,GAAKL,EAAY,MAAM,OAEvB,CAAAE,EAAQ,MAAQ,GAChBE,EAAY,MAAQ,GAEpB,GAAI,CACF,MAAME,EAAS,IAAIC,EAAaT,EAAc,YAAY,EAEpDU,EADU,IAAIC,EAAaX,EAAc,YAAY,EACrC,yBAAyBE,EAAY,KAAK,EAC1DU,EAA0B,MAAMJ,EAAO,MAAME,CAAK,EAExDL,EAAQ,MAAQO,EAAS,QAAQ,SAAS,IAAKC,GAAA,WAAa,OAC1D,GAAIC,IAAUC,EAAAF,EAAQ,WAAR,YAAAE,EAAkB,QAAS,EAAE,EAC3C,QAAOC,EAAAH,EAAQ,gBAAR,YAAAG,EAAuB,QAAS,GACvC,cAAaC,EAAAJ,EAAQ,sBAAR,YAAAI,EAA6B,QAAS,EAAA,EACnD,CACJ,OAASC,EAAO,CACd,QAAQ,MAAM,iBAAkBA,CAAK,EACrCb,EAAQ,MAAQ,CAAA,CAClB,QAAA,CACED,EAAQ,MAAQ,EAClB,EACF,CAEA,SAASU,EAAUK,EAAqB,CACtC,MAAMC,EAAQD,EAAI,MAAM,UAAU,EAClC,OAAOC,EAAQA,EAAM,CAAC,EAAID,CAC5B,eAIEE,EAAA,EAAAC,EA2DM,MA3DNC,EA2DM,CA1DJC,EAOQC,EAAA,CAPD,MAAM,QAAM,WACjB,IAKQ,CALRD,EAKQE,EAAA,CALD,KAAK,MAAI,WACd,IAA2D,CAA3DC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,EAA2D,KAAA,CAAvD,MAAM,0BAAA,EAA2B,oBAAiB,EAAA,GACtDA,EAEI,IAFJC,EAAqD,yBAC7BC,EAAA9B,CAAA,EAAc,aAAa,IAAI,EAAA,CAAA,CAAA,iBAK3DwB,EAuBQC,EAAA,KAAA,WAtBN,IAqBQ,CArBRD,EAqBQE,EAAA,CArBD,KAAK,KAAK,GAAG,IAAI,GAAG,GAAA,aACzB,IAmBe,CAnBfF,EAmBeO,EAAA,YAlBJ7B,EAAA,2CAAAA,EAAW,MAAA8B,GACpB,qBAAmB,cACnB,MAAM,wBACN,YAAY,mCACZ,QAAQ,WACR,UAAA,GACC,QAAS5B,EAAA,MACT,UAAaG,EAAa,CAAA,OAAA,CAAA,CAAA,GAEhB,SACT,IAMQ,CANRiB,EAMQS,EAAA,CALN,MAAM,UACL,QAAS7B,EAAA,MACT,QAAOG,CAAA,aACT,IAED,CAAA,GAAAoB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAFC,WAED,EAAA,CAAA,4EAMKrB,EAAA,WAAb4B,EAuBQT,EAAA,CAAA,IAAA,GAAA,WAtBN,IAqBQ,CArBRD,EAqBQE,EAAA,CArBD,KAAK,MAAI,WACd,IAeS,CAfKrB,EAAA,MAAQ,OAAM,OAA5B6B,EAeSC,EAAA,CAAA,IAAA,GAAA,WAdP,IAaS,CAbTX,EAaSY,EAAA,KAAA,WAXL,IAAyB,QAD3Bd,EAWce,EAAA,KAAAC,EAVKjC,EAAA,MAAVkC,QADTL,EAWcM,EAAA,CATX,IAAKD,EAAO,GACZ,MAAOA,EAAO,MACd,SAAUA,EAAO,WAAA,GAEP,UACT,IAES,CAFTf,EAESiB,EAAA,CAFD,KAAK,QAAQ,MAAM,UAAU,QAAQ,QAAQ,MAAM,MAAA,aACzD,IAAe,CAAZC,EAAAC,EAAAJ,EAAO,EAAE,EAAA,CAAA,CAAA,8EAOtBL,EAEUU,EAAA,OAFM,KAAK,OAAO,QAAQ,OAAA,aAAQ,IACZ,GADY,kCACZD,EAAGzC,EAAA,KAAW,EAAG,MACjD,CAAA,CAAA"}