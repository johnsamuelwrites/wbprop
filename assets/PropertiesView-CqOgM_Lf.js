import{d as B,u as I,l as L,b as s,a as l,y as S,V as D,r as o,o as N,A as Q,B as b,t as m,C as T,j as q,E as z,h as A,i as E,J as F,D as h,g as x,z as O,_ as U}from"./index-BDIEAq_k.js";import{S as j,Q as J}from"./query-builder-COZByhWr.js";const R={class:"properties-view"},W={class:"text-subtitle-1 text-medium-emphasis mt-1"},$=B({__name:"PropertiesView",setup(G){const d=I(),r=o(""),i=o(!1),c=o([]),g=o(1),u=o(25),V=[{title:"ID",key:"id",sortable:!0},{title:"Label",key:"label",sortable:!0},{title:"Datatype",key:"datatype",sortable:!0}];async function f(){i.value=!0;try{const e=new j(d.activeConfig),t=new J(d.activeConfig),a=(g.value-1)*u.value,n=t.buildAllPropertiesQuery(u.value,a),P=await e.query(n);c.value=P.results.bindings.map(p=>{var v,y,_;return{id:w(((v=p.property)==null?void 0:v.value)??""),label:((y=p.propertyLabel)==null?void 0:y.value)??"",datatype:C(((_=p.datatype)==null?void 0:_.value)??"")}})}catch(e){console.error("Failed to load properties:",e)}finally{i.value=!1}}function w(e){const t=e.match(/[PQ]\d+$/);return t?t[0]:e}function C(e){const t=e.lastIndexOf("#"),a=e.lastIndexOf("/"),n=t>a?t:a;return n>=0?e.substring(n+1):e}const k=O(()=>{if(!r.value)return c.value;const e=r.value.toLowerCase();return c.value.filter(t=>t.id.toLowerCase().includes(e)||t.label.toLowerCase().includes(e))});return f(),(e,t)=>(N(),L("div",R,[s(S,{class:"mb-4"},{default:l(()=>[s(Q,{cols:"12"},{default:l(()=>[t[1]||(t[1]=b("h1",{class:"text-h4 font-weight-bold"},"Properties",-1)),b("p",W," Browse all properties in "+m(T(d).activeConfig.name),1)]),_:1})]),_:1}),s(D,null,{default:l(()=>[s(q,{class:"d-flex align-center"},{default:l(()=>[s(z,{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=a=>r.value=a),"prepend-inner-icon":"mdi-magnify",label:"Search properties","single-line":"","hide-details":"",density:"compact",variant:"outlined",class:"mr-4",style:{"max-width":"400px"}},null,8,["modelValue"]),s(A),s(E,{icon:"mdi-refresh",variant:"text",loading:i.value,onClick:f},null,8,["loading"])]),_:1}),s(F,{headers:V,items:k.value,loading:i.value,"items-per-page":u.value,class:"elevation-0"},{"item.id":l(({item:a})=>[s(h,{size:"small",color:"primary",variant:"tonal"},{default:l(()=>[x(m(a.id),1)]),_:2},1024)]),"item.datatype":l(({item:a})=>[s(h,{size:"small",variant:"outlined"},{default:l(()=>[x(m(a.datatype||"Unknown"),1)]),_:2},1024)]),_:1},8,["items","loading","items-per-page"])]),_:1})]))}}),M=U($,[["__scopeId","data-v-29b005f6"]]);export{M as default};
//# sourceMappingURL=PropertiesView-CqOgM_Lf.js.map
