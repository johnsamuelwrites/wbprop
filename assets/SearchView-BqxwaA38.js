import{d as x,u as B,l as S,b as t,a as e,y as f,c as u,f as L,r as c,o as s,A as m,B as C,t as v,C as N,E as Q,L as F,i as I,g as y,V as q,F as D,G as P,H as A,n as E,I as K,D as T,_ as z}from"./index-BDIEAq_k.js";import{S as G,Q as H}from"./query-builder-COZByhWr.js";const R={class:"search-view"},U={class:"text-subtitle-1 text-medium-emphasis mt-1"},W=x({__name:"SearchView",setup($){const d=B(),o=c(""),i=c(!1),n=c([]),_=c(!1);async function h(){if(o.value.trim()){i.value=!0,_.value=!0;try{const l=new G(d.activeConfig),r=new H(d.activeConfig).buildPropertySearchQuery(o.value),k=await l.query(r);n.value=k.results.bindings.map(p=>{var V,b,g;return{id:w(((V=p.property)==null?void 0:V.value)??""),label:((b=p.propertyLabel)==null?void 0:b.value)??"",description:((g=p.propertyDescription)==null?void 0:g.value)??""}})}catch(l){console.error("Search failed:",l),n.value=[]}finally{i.value=!1}}}function w(l){const a=l.match(/[PQ]\d+$/);return a?a[0]:l}return(l,a)=>(s(),S("div",R,[t(f,{class:"mb-4"},{default:e(()=>[t(m,{cols:"12"},{default:e(()=>[a[1]||(a[1]=C("h1",{class:"text-h4 font-weight-bold"},"Search Properties",-1)),C("p",U," Find properties in "+v(N(d).activeConfig.name),1)]),_:1})]),_:1}),t(f,null,{default:e(()=>[t(m,{cols:"12",md:"8",lg:"6"},{default:e(()=>[t(Q,{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=r=>o.value=r),"prepend-inner-icon":"mdi-magnify",label:"Search for properties",placeholder:"e.g., instance of, date of birth",variant:"outlined",clearable:"",loading:i.value,onKeyup:F(h,["enter"])},{append:e(()=>[t(I,{color:"primary",loading:i.value,onClick:h},{default:e(()=>[...a[2]||(a[2]=[y(" Search ",-1)])]),_:1},8,["loading"])]),_:1},8,["modelValue","loading"])]),_:1})]),_:1}),_.value?(s(),u(f,{key:0},{default:e(()=>[t(m,{cols:"12"},{default:e(()=>[n.value.length>0?(s(),u(q,{key:0},{default:e(()=>[t(D,null,{default:e(()=>[(s(!0),S(P,null,A(n.value,r=>(s(),u(K,{key:r.id,title:r.label,subtitle:r.description},{prepend:e(()=>[t(T,{size:"small",color:"primary",variant:"tonal",class:"mr-3"},{default:e(()=>[y(v(r.id),1)]),_:2},1024)]),_:2},1032,["title","subtitle"]))),128))]),_:1})]),_:1})):(s(),u(E,{key:1,type:"info",variant:"tonal"},{default:e(()=>[y(' No properties found matching "'+v(o.value)+'". ',1)]),_:1}))]),_:1})]),_:1})):L("",!0)]))}}),M=z(W,[["__scopeId","data-v-0b84c39b"]]);export{M as default};
//# sourceMappingURL=SearchView-BqxwaA38.js.map
