{"version":3,"file":"BarChart-BuSQgzUv.js","sources":["../../src/composables/useSparqlQuery.ts","../../src/composables/useChartExport.ts","../../src/components/charts/ExportMenu.vue","../../src/components/charts/ChartCard.vue","../../src/components/charts/BarChart.vue"],"sourcesContent":["import { ref, watch, type Ref } from 'vue'\nimport { useWikibaseStore } from '@/stores/wikibase'\nimport { SparqlClient, QueryBuilder } from '@/services/sparql'\nimport type { SparqlResults, ChartDataItem } from '@/types'\n\nexport interface QueryState<T> {\n  data: Ref<T | null>\n  isLoading: Ref<boolean>\n  error: Ref<string | null>\n  refetch: () => Promise<void>\n}\n\n/**\n * Composable for executing SPARQL queries with reactive state\n */\nexport function useSparqlQuery<T>(\n  queryFn: (builder: QueryBuilder) => string,\n  transformFn: (results: SparqlResults) => T,\n  options: { immediate?: boolean; enabled?: (configId: string) => boolean } = { immediate: true }\n): QueryState<T> {\n  const wikibaseStore = useWikibaseStore()\n\n  const data = ref<T | null>(null) as Ref<T | null>\n  const isLoading = ref(false)\n  const error = ref<string | null>(null)\n  const isEnabled = () => options.enabled?.(wikibaseStore.activeConfig.id) ?? true\n\n  async function fetchData(fresh = false) {\n    if (!isEnabled()) {\n      data.value = null\n      error.value = null\n      isLoading.value = false\n      return\n    }\n\n    isLoading.value = true\n    error.value = null\n\n    try {\n      const client = new SparqlClient(wikibaseStore.activeConfig)\n      const builder = new QueryBuilder(wikibaseStore.activeConfig)\n      const query = queryFn(builder)\n\n      // Use queryFresh when explicitly refreshing to bypass cache\n      const results = fresh\n        ? await client.queryFresh(query)\n        : await client.query(query)\n\n      data.value = transformFn(results)\n    } catch (e) {\n      error.value = e instanceof Error ? e.message : 'Unknown error occurred'\n      data.value = null\n    } finally {\n      isLoading.value = false\n    }\n  }\n\n  // Refetch when active config changes\n  watch(\n    () => wikibaseStore.activeConfig.id,\n    () => {\n      if (options.immediate && isEnabled()) {\n        fetchData()\n      } else {\n        data.value = null\n        error.value = null\n        isLoading.value = false\n      }\n    }\n  )\n\n  // Initial fetch\n  if (options.immediate && isEnabled()) {\n    fetchData()\n  }\n\n  return {\n    data,\n    isLoading,\n    error,\n    refetch: () => fetchData(true),\n  }\n}\n\n/**\n * Extract the local name from a URI\n */\nexport function extractLocalName(uri: string): string {\n  const hashIndex = uri.lastIndexOf('#')\n  const slashIndex = uri.lastIndexOf('/')\n  const separator = hashIndex > slashIndex ? hashIndex : slashIndex\n  return separator >= 0 ? uri.substring(separator + 1) : uri\n}\n\n/**\n * Transform datatype query results to chart data\n */\nexport function transformDatatypeResults(results: SparqlResults): ChartDataItem[] {\n  return results.results.bindings.map((binding) => ({\n    label: extractLocalName(binding.datatype?.value ?? 'Unknown'),\n    value: parseInt(binding.count?.value ?? '0', 10),\n    uri: binding.datatype?.value,\n  }))\n}\n\n/**\n * Transform language query results to chart data\n */\nexport function transformLanguageResults(results: SparqlResults): ChartDataItem[] {\n  return results.results.bindings.map((binding) => ({\n    label: binding.language?.value ?? 'Unknown',\n    value: parseInt(binding.count?.value ?? '0', 10),\n  }))\n}\n\n/**\n * Transform property statement query results to chart data\n */\nexport function transformPropertyResults(results: SparqlResults): ChartDataItem[] {\n  return results.results.bindings.map((binding) => ({\n    label: binding.propertyLabel?.value ?? extractLocalName(binding.property?.value ?? ''),\n    value: parseInt(binding.statementCount?.value ?? '0', 10),\n    uri: binding.property?.value,\n  }))\n}\n\n/**\n * Transform WikiProject query results to chart data\n */\nexport function transformWikiProjectResults(results: SparqlResults): ChartDataItem[] {\n  return results.results.bindings.map((binding) => ({\n    label: binding.wikprojectLabel?.value ?? extractLocalName(binding.wikiproject?.value ?? ''),\n    value: parseInt(binding.count?.value ?? '0', 10),\n    uri: binding.wikiproject?.value,\n  }))\n}\n\n/**\n * Transform property class query results to chart data\n */\nexport function transformPropertyClassResults(results: SparqlResults): ChartDataItem[] {\n  return results.results.bindings.map((binding) => ({\n    label: binding.propertyLabel?.value ?? extractLocalName(binding.property?.value ?? ''),\n    value: parseInt(binding.count?.value ?? '0', 10),\n    uri: binding.property?.value,\n  }))\n}\n\n/**\n * Transform Commons distinct rdf:type list\n */\nexport function transformCommonsDistinctTypes(results: SparqlResults): string[] {\n  return results.results.bindings\n    .map((binding) => binding.val?.value ?? '')\n    .filter((value) => value.length > 0)\n}\n\n/**\n * Hook for datatype statistics\n */\nexport function useDatatypeStats() {\n  return useSparqlQuery(\n    (builder) => builder.buildDatatypeQuery(),\n    transformDatatypeResults,\n    { immediate: true, enabled: (configId) => configId !== 'commons' }\n  )\n}\n\n/**\n * Hook for language statistics\n */\nexport function useLanguageStats(limit = 10) {\n  return useSparqlQuery(\n    (builder) => builder.buildLanguageQuery(limit),\n    transformLanguageResults,\n    { immediate: true, enabled: (configId) => configId !== 'commons' }\n  )\n}\n\n/**\n * Hook for property statement statistics\n */\nexport function usePropertyStats(limit = 15) {\n  return useSparqlQuery(\n    (builder) => builder.buildPropertyStatementQuery(limit),\n    transformPropertyResults,\n    { immediate: true, enabled: (configId) => configId !== 'commons' }\n  )\n}\n\n/**\n * Hook for WikiProject statistics\n */\nexport function useWikiProjectStats(limit = 20) {\n  return useSparqlQuery(\n    (builder) => builder.buildWikiProjectQuery(limit),\n    transformWikiProjectResults,\n    { immediate: true, enabled: (configId) => configId === 'wikidata' }\n  )\n}\n\n/**\n * Hook for property class statistics\n */\nexport function usePropertyClassStats(limit = 20) {\n  return useSparqlQuery(\n    (builder) => builder.buildPropertyClassQuery(limit),\n    transformPropertyClassResults,\n    { immediate: true, enabled: (configId) => configId !== 'commons' }\n  )\n}\n\n/**\n * Hook for Commons distinct rdf:type values\n */\nexport function useCommonsDistinctTypes(limit = 200) {\n  return useSparqlQuery(\n    (builder) => builder.buildCommonsDistinctTypesQuery(limit),\n    transformCommonsDistinctTypes,\n    { immediate: true, enabled: (configId) => configId === 'commons' }\n  )\n}\n","import type { ChartDataItem } from '@/types'\n\n/**\n * Export chart data as CSV\n */\nexport function exportToCsv(data: ChartDataItem[], filename: string): void {\n  const header = 'Label,Value,URI\\n'\n  const rows = data\n    .map((item) => {\n      const label = `\"${item.label.replace(/\"/g, '\"\"')}\"`\n      const uri = item.uri ? `\"${item.uri}\"` : ''\n      return `${label},${item.value},${uri}`\n    })\n    .join('\\n')\n\n  const blob = new Blob([header + rows], { type: 'text/csv;charset=utf-8;' })\n  downloadBlob(blob, `${filename}.csv`)\n}\n\n/**\n * Export an ECharts instance as PNG\n */\nexport function exportEChartToPng(\n  chartInstance: { getDataURL: (opts: object) => string },\n  filename: string\n): void {\n  const url = chartInstance.getDataURL({\n    type: 'png',\n    pixelRatio: 2,\n    backgroundColor: '#28293D',\n  })\n  downloadDataUrl(url, `${filename}.png`)\n}\n\n/**\n * Export an ECharts instance as SVG\n */\nexport function exportEChartToSvg(\n  chartInstance: { getDataURL: (opts: object) => string },\n  filename: string\n): void {\n  const url = chartInstance.getDataURL({\n    type: 'svg',\n    pixelRatio: 2,\n    backgroundColor: '#28293D',\n  })\n  downloadDataUrl(url, `${filename}.svg`)\n}\n\n/**\n * Export a D3 chart container as PNG via canvas\n */\nexport function exportSvgToPng(svgElement: SVGSVGElement, filename: string): void {\n  const svgData = new XMLSerializer().serializeToString(svgElement)\n  const canvas = document.createElement('canvas')\n  const ctx = canvas.getContext('2d')\n  if (!ctx) return\n\n  const img = new Image()\n  const svgBlob = new Blob([svgData], { type: 'image/svg+xml;charset=utf-8' })\n  const url = URL.createObjectURL(svgBlob)\n\n  img.onload = () => {\n    canvas.width = img.width * 2\n    canvas.height = img.height * 2\n    ctx.scale(2, 2)\n    ctx.fillStyle = '#28293D'\n    ctx.fillRect(0, 0, img.width, img.height)\n    ctx.drawImage(img, 0, 0)\n    URL.revokeObjectURL(url)\n\n    canvas.toBlob((blob) => {\n      if (blob) downloadBlob(blob, `${filename}.png`)\n    })\n  }\n\n  img.src = url\n}\n\nfunction downloadBlob(blob: Blob, filename: string): void {\n  const link = document.createElement('a')\n  link.href = URL.createObjectURL(blob)\n  link.download = filename\n  link.click()\n  URL.revokeObjectURL(link.href)\n}\n\nfunction downloadDataUrl(url: string, filename: string): void {\n  const link = document.createElement('a')\n  link.href = url\n  link.download = filename\n  link.click()\n}\n","<script setup lang=\"ts\">\nimport type { ChartDataItem } from '@/types'\nimport { exportToCsv } from '@/composables/useChartExport'\n\nconst props = defineProps<{\n  data: ChartDataItem[]\n  filename: string\n}>()\n\nfunction handleCsvExport() {\n  exportToCsv(props.data, props.filename)\n}\n</script>\n\n<template>\n  <v-menu>\n    <template #activator=\"{ props: menuProps }\">\n      <v-btn\n        icon=\"mdi-download\"\n        variant=\"text\"\n        size=\"small\"\n        v-bind=\"menuProps\"\n      />\n    </template>\n    <v-list density=\"compact\">\n      <v-list-item\n        prepend-icon=\"mdi-file-delimited\"\n        title=\"Export CSV\"\n        @click=\"handleCsvExport\"\n      />\n    </v-list>\n  </v-menu>\n</template>\n","<script setup lang=\"ts\">\nimport type { ChartDataItem } from '@/types'\nimport ExportMenu from './ExportMenu.vue'\n\ndefineProps<{\n  title: string\n  subtitle?: string\n  icon?: string\n  loading?: boolean\n  error?: string | null\n  exportData?: ChartDataItem[]\n  exportFilename?: string\n}>()\n\nconst emit = defineEmits<{\n  (e: 'refresh'): void\n}>()\n</script>\n\n<template>\n  <v-card class=\"chart-card\" height=\"100%\">\n    <v-card-title class=\"d-flex align-center\">\n      <v-icon v-if=\"icon\" :icon=\"icon\" class=\"mr-2\" size=\"small\" />\n      {{ title }}\n      <v-spacer />\n      <ExportMenu\n        v-if=\"exportData && exportData.length > 0 && exportFilename\"\n        :data=\"exportData\"\n        :filename=\"exportFilename\"\n      />\n      <v-btn\n        icon=\"mdi-refresh\"\n        variant=\"text\"\n        size=\"small\"\n        :loading=\"loading\"\n        @click=\"emit('refresh')\"\n      />\n    </v-card-title>\n\n    <v-card-subtitle v-if=\"subtitle\">\n      {{ subtitle }}\n    </v-card-subtitle>\n\n    <v-card-text class=\"chart-content\">\n      <!-- Skeleton Loading State -->\n      <div v-if=\"loading\" class=\"skeleton-container\">\n        <div class=\"skeleton-bars\">\n          <v-skeleton-loader type=\"text\" class=\"mb-2\" />\n          <div class=\"d-flex align-end ga-1 skeleton-bar-group\">\n            <v-skeleton-loader\n              v-for=\"i in 8\"\n              :key=\"i\"\n              type=\"image\"\n              class=\"skeleton-bar\"\n              :style=\"{ height: `${30 + Math.random() * 70}%` }\"\n            />\n          </div>\n          <v-skeleton-loader type=\"text\" class=\"mt-2\" />\n        </div>\n      </div>\n\n      <!-- Error State -->\n      <v-alert\n        v-else-if=\"error\"\n        type=\"error\"\n        variant=\"tonal\"\n        class=\"ma-2\"\n      >\n        {{ error }}\n        <template #append>\n          <v-btn\n            variant=\"text\"\n            size=\"small\"\n            @click=\"emit('refresh')\"\n          >\n            Retry\n          </v-btn>\n        </template>\n      </v-alert>\n\n      <!-- Chart Content -->\n      <slot v-else />\n    </v-card-text>\n  </v-card>\n</template>\n\n<style scoped>\n.chart-card {\n  display: flex;\n  flex-direction: column;\n}\n\n.chart-content {\n  flex: 1;\n  min-height: 200px;\n}\n\n.skeleton-container {\n  height: 200px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 16px;\n}\n\n.skeleton-bars {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n.skeleton-bar-group {\n  flex: 1;\n  align-items: flex-end;\n}\n\n.skeleton-bar {\n  flex: 1;\n  min-width: 0;\n  border-radius: 4px 4px 0 0;\n}\n</style>\n","<script setup lang=\"ts\">\nimport { ref, onMounted, watch, onUnmounted } from 'vue'\nimport * as d3 from 'd3'\nimport type { ChartDataItem } from '@/types'\n\nconst props = withDefaults(\n  defineProps<{\n    data: ChartDataItem[]\n    height?: number\n    barColor?: string\n    hoverColor?: string\n    animated?: boolean\n  }>(),\n  {\n    height: 300,\n    barColor: '#3170F3',\n    hoverColor: '#5090FF',\n    animated: true,\n  }\n)\n\nconst chartContainer = ref<HTMLDivElement | null>(null)\nlet resizeObserver: ResizeObserver | null = null\n\nfunction renderChart() {\n  if (!chartContainer.value || !props.data.length) return\n\n  // Clear previous chart\n  d3.select(chartContainer.value).selectAll('*').remove()\n\n  const container = chartContainer.value\n  const width = container.clientWidth\n  const height = props.height\n\n  const margin = { top: 20, right: 20, bottom: 60, left: 50 }\n  const chartWidth = width - margin.left - margin.right\n  const chartHeight = height - margin.top - margin.bottom\n\n  // Create SVG\n  const svg = d3\n    .select(container)\n    .append('svg')\n    .attr('width', width)\n    .attr('height', height)\n    .append('g')\n    .attr('transform', `translate(${margin.left},${margin.top})`)\n\n  // Scales\n  const x = d3\n    .scaleBand()\n    .range([0, chartWidth])\n    .domain(props.data.map((d) => d.label))\n    .padding(0.2)\n\n  const y = d3\n    .scaleLinear()\n    .range([chartHeight, 0])\n    .domain([0, d3.max(props.data, (d) => d.value) ?? 0])\n    .nice()\n\n  // X Axis\n  svg\n    .append('g')\n    .attr('transform', `translate(0,${chartHeight})`)\n    .call(d3.axisBottom(x))\n    .selectAll('text')\n    .attr('transform', 'rotate(-45)')\n    .style('text-anchor', 'end')\n    .style('font-size', '11px')\n    .style('fill', '#9e9e9e')\n\n  // Y Axis\n  svg\n    .append('g')\n    .call(d3.axisLeft(y).ticks(5).tickFormat(d3.format('.2s')))\n    .selectAll('text')\n    .style('fill', '#9e9e9e')\n\n  // Style axis lines\n  svg.selectAll('.domain, .tick line').style('stroke', '#424242')\n\n  // Tooltip\n  const tooltip = d3\n    .select(container)\n    .append('div')\n    .attr('class', 'chart-tooltip')\n    .style('position', 'absolute')\n    .style('visibility', 'hidden')\n    .style('background-color', 'rgba(45, 46, 69, 0.95)')\n    .style('color', '#fff')\n    .style('padding', '8px 12px')\n    .style('border-radius', '4px')\n    .style('font-size', '12px')\n    .style('pointer-events', 'none')\n    .style('z-index', '1000')\n    .style('box-shadow', '0 2px 8px rgba(0,0,0,0.3)')\n\n  // Bars\n  const bars = svg\n    .selectAll('.bar')\n    .data(props.data)\n    .enter()\n    .append('rect')\n    .attr('class', 'bar')\n    .attr('x', (d) => x(d.label) ?? 0)\n    .attr('width', x.bandwidth())\n    .attr('fill', props.barColor)\n    .attr('rx', 4)\n    .attr('ry', 4)\n    .style('cursor', 'pointer')\n\n  // Animation\n  if (props.animated) {\n    bars\n      .attr('y', chartHeight)\n      .attr('height', 0)\n      .transition()\n      .duration(800)\n      .delay((_, i) => i * 50)\n      .ease(d3.easeElasticOut.amplitude(1).period(0.5))\n      .attr('y', (d) => y(d.value))\n      .attr('height', (d) => chartHeight - y(d.value))\n  } else {\n    bars.attr('y', (d) => y(d.value)).attr('height', (d) => chartHeight - y(d.value))\n  }\n\n  // Hover effects\n  bars\n    .on('mouseover', function (_event, d) {\n      d3.select(this)\n        .transition()\n        .duration(200)\n        .attr('fill', props.hoverColor)\n\n      tooltip\n        .style('visibility', 'visible')\n        .html(`<strong>${d.label}</strong><br/>Count: ${d.value.toLocaleString()}`)\n    })\n    .on('mousemove', function (event: MouseEvent) {\n      const [mouseX, mouseY] = d3.pointer(event, container)\n      tooltip\n        .style('top', `${mouseY - 10}px`)\n        .style('left', `${mouseX + 15}px`)\n    })\n    .on('mouseout', function () {\n      d3.select(this)\n        .transition()\n        .duration(200)\n        .attr('fill', props.barColor)\n\n      tooltip.style('visibility', 'hidden')\n    })\n}\n\n// Handle resize\nfunction handleResize() {\n  renderChart()\n}\n\nonMounted(() => {\n  renderChart()\n\n  // Set up resize observer\n  if (chartContainer.value) {\n    resizeObserver = new ResizeObserver(handleResize)\n    resizeObserver.observe(chartContainer.value)\n  }\n})\n\n// Re-render when data changes\nwatch(\n  () => props.data,\n  () => renderChart(),\n  { deep: true }\n)\n\nonUnmounted(() => {\n  resizeObserver?.disconnect()\n})\n</script>\n\n<template>\n  <div ref=\"chartContainer\" class=\"bar-chart-container\" :style=\"{ height: `${height}px` }\" />\n</template>\n\n<style scoped>\n.bar-chart-container {\n  width: 100%;\n  position: relative;\n}\n</style>\n"],"names":["useSparqlQuery","queryFn","transformFn","options","wikibaseStore","useWikibaseStore","data","ref","isLoading","error","isEnabled","fetchData","fresh","client","SparqlClient","builder","QueryBuilder","query","results","e","watch","extractLocalName","uri","hashIndex","slashIndex","separator","transformDatatypeResults","binding","transformLanguageResults","transformPropertyResults","transformWikiProjectResults","transformPropertyClassResults","transformCommonsDistinctTypes","value","useDatatypeStats","configId","useLanguageStats","limit","usePropertyStats","useWikiProjectStats","usePropertyClassStats","useCommonsDistinctTypes","exportToCsv","filename","header","rows","item","label","blob","downloadBlob","link","props","__props","handleCsvExport","_createBlock","_component_v_menu","_withCtx","menuProps","_createVNode","_component_v_btn","_mergeProps","_component_v_list","_component_v_list_item","emit","__emit","_component_v_card","_component_v_card_title","_component_v_icon","_toDisplayString","_component_v_spacer","ExportMenu","_component_v_card_subtitle","_component_v_card_text","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_component_v_skeleton_loader","_hoisted_3","_Fragment","_renderList","i","_normalizeStyle","_component_v_alert","_cache","_createTextVNode","_renderSlot","_ctx","chartContainer","resizeObserver","renderChart","d3.select","container","width","height","margin","chartWidth","chartHeight","svg","d3.scaleBand","d","y","d3.scaleLinear","d3.max","d3.axisBottom","d3.axisLeft","d3.format","tooltip","bars","_","d3.easeElasticOut","_event","event","mouseX","mouseY","d3.pointer","handleResize","onMounted","onUnmounted"],"mappings":"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"}