import{u as J,V as k,a as C,b as M,p as $,c as B,_ as K}from"./index-DBPWIN5Y.js";import{u as Q,a as Y,b as Z,d as ee,C as R,B as T}from"./BarChart-BuSQgzUv.js";import{bt as N,bR as U,bS as E}from"./echarts-core-NshGY7fM.js";import{i as ae,a as O,b as H,c as te,d as le,e as oe,f as re}from"./echarts-charts--KY6x23a.js";import{l as j,a1 as t,$ as s,u as e,N as I,j as w,a3 as _,E as o,a2 as n,F as z,ag as x,h as V,G as y,W as D,_ as X,a4 as F}from"./vue-vendor-DZH70FcD.js";import"./vuetify-vendor-Cx-tRhyD.js";import"./query-builder-DjEuht2y.js";import"./query-cache-DYhKbuAV.js";import"./d3-vendor-Ss9uNxAN.js";const W=j({__name:"DonutChart",props:{data:{},height:{default:350},showLegend:{type:Boolean,default:!0}},emits:["select"],setup(f,{emit:b}){N([ae,O,H,te,E]);const p=f,d=b,u=w(()=>({tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)",backgroundColor:"rgba(45, 46, 69, 0.95)",borderColor:"transparent",textStyle:{color:"#fff",fontSize:12}},legend:p.showLegend?{type:"scroll",orient:"vertical",right:10,top:20,bottom:20,textStyle:{color:"#9e9e9e",fontSize:11},pageTextStyle:{color:"#9e9e9e"}}:void 0,series:[{type:"pie",radius:["40%","70%"],center:p.showLegend?["35%","50%"]:["50%","50%"],avoidLabelOverlap:!0,itemStyle:{borderRadius:6,borderColor:"#28293D",borderWidth:2},label:{show:!1},emphasis:{label:{show:!0,fontSize:14,fontWeight:"bold",color:"#fff"},itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},data:p.data.map(a=>({name:a.label,value:a.value}))}]}));function c(a){const l=a.name,i=p.data.find(v=>v.label===l);i&&d("select",i)}return(a,l)=>(t(),s(e(U),{option:u.value,style:I({height:`${f.height}px`}),autoresize:"",onClick:c},null,8,["option","style","onClick"]))}}),A=j({__name:"TreeMapChart",props:{data:{},height:{default:400}},emits:["select"],setup(f,{emit:b}){N([le,O,H,E]);const p=f,d=b,u=w(()=>({tooltip:{formatter:a=>`<strong>${a.name}</strong><br/>Count: ${a.value.toLocaleString()}`,backgroundColor:"rgba(45, 46, 69, 0.95)",borderColor:"transparent",textStyle:{color:"#fff",fontSize:12}},series:[{type:"treemap",data:p.data.map(a=>({name:a.label,value:a.value})),roam:!1,nodeClick:"link",breadcrumb:{show:!0,itemStyle:{color:"#2D2E45",borderColor:"#424361",textStyle:{color:"#9e9e9e"}}},levels:[{itemStyle:{borderColor:"#28293D",borderWidth:2,gapWidth:2},upperLabel:{show:!1}},{itemStyle:{borderColor:"#424361",borderWidth:1,gapWidth:1}}],label:{show:!0,formatter:"{b}",fontSize:12,color:"#fff"},itemStyle:{borderRadius:4}}]}));function c(a){const l=a.name,i=p.data.find(v=>v.label===l);i&&d("select",i)}return(a,l)=>(t(),s(e(U),{option:u.value,style:I({height:`${f.height}px`}),autoresize:"",onClick:c},null,8,["option","style","onClick"]))}}),P=j({__name:"HorizontalBarChart",props:{data:{},height:{default:400},barColor:{default:"#3170F3"}},emits:["select"],setup(f,{emit:b}){N([oe,O,H,re,E]);const p=f,d=b,u=w(()=>[...p.data].sort((l,i)=>l.value-i.value)),c=w(()=>({tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:l=>{const i=l[0];return`<strong>${i.name}</strong><br/>Count: ${i.value.toLocaleString()}`},backgroundColor:"rgba(45, 46, 69, 0.95)",borderColor:"transparent",textStyle:{color:"#fff",fontSize:12}},grid:{left:"3%",right:"8%",bottom:"3%",top:"3%",containLabel:!0},xAxis:{type:"value",axisLabel:{color:"#9e9e9e",fontSize:11},axisLine:{lineStyle:{color:"#424242"}},splitLine:{lineStyle:{color:"#333"}}},yAxis:{type:"category",data:u.value.map(l=>l.label),axisLabel:{color:"#9e9e9e",fontSize:11,width:120,overflow:"truncate"},axisLine:{lineStyle:{color:"#424242"}}},series:[{type:"bar",data:u.value.map(l=>l.value),itemStyle:{color:p.barColor,borderRadius:[0,4,4,0]},emphasis:{itemStyle:{color:"#5090FF"}},animationDelay:l=>l*30}],animationEasing:"elasticOut"}));function a(l){const i=l.name,v=p.data.find(g=>g.label===i);v&&d("select",v)}return(l,i)=>(t(),s(e(U),{option:c.value,style:I({height:`${f.height}px`}),autoresize:"",onClick:a},null,8,["option","style","onClick"]))}}),ne={class:"statistics-view"},se={class:"text-subtitle-1 text-medium-emphasis mt-1"},ie={class:"d-flex align-center"},ue={key:0,class:"text-medium-emphasis ml-2"},de={class:"d-flex justify-end mb-2"},ce={class:"d-flex justify-end mb-2"},me={class:"d-flex justify-end mb-2"},pe={class:"d-flex justify-end mb-2"},ve=j({__name:"StatisticsView",setup(f){const b=J(),p=w(()=>b.activeConfig.id==="commons"),d=Q(),u=Y(20),c=Z(30),a=ee(30),l=V("donut"),i=V("horizontal"),v=V("bar"),g=V("treemap"),L=[{value:"bar",icon:"mdi-chart-bar",label:"Bar Chart"},{value:"horizontal",icon:"mdi-chart-bar-stacked",label:"Horizontal Bar"},{value:"donut",icon:"mdi-chart-donut",label:"Donut Chart"},{value:"treemap",icon:"mdi-chart-tree",label:"Treemap"}],S=V(null);function h(G){S.value=G}function q(){S.value=null}return(G,m)=>(t(),_("div",ne,[o(k,{class:"mb-4"},{default:n(()=>[o(C,{cols:"12"},{default:n(()=>[m[4]||(m[4]=y("h1",{class:"text-h4 font-weight-bold"},"Statistics",-1)),y("p",se," Advanced visualizations for "+D(e(b).activeConfig.name)+" properties ",1)]),_:1})]),_:1}),p.value?(t(),s(k,{key:0,class:"mb-2"},{default:n(()=>[o(C,{cols:"12"},{default:n(()=>[o(M,{type:"info",variant:"tonal"},{default:n(()=>[...m[5]||(m[5]=[X(" Statistics charts are not yet available for Wikimedia Commons. Use the Dashboard to explore Commons RDF types. ",-1)])]),_:1})]),_:1})]),_:1})):(t(),_(z,{key:1},[S.value?(t(),s(k,{key:0},{default:n(()=>[o(C,{cols:"12"},{default:n(()=>[o(M,{type:"info",variant:"tonal",closable:"","onClick:close":q},{default:n(()=>[y("div",ie,[y("div",null,[m[6]||(m[6]=y("strong",null,"Selected:",-1)),X(" "+D(S.value.label)+" â€” Count: "+D(S.value.value.toLocaleString())+" ",1),S.value.uri?(t(),_("span",ue," ("+D(S.value.uri)+") ",1)):x("",!0)])])]),_:1})]),_:1})]),_:1})):x("",!0),o(k,null,{default:n(()=>[o(C,{cols:"12",md:"6"},{default:n(()=>[o(R,{title:"Datatypes Distribution",subtitle:"Properties grouped by datatype",icon:"mdi-code-tags",loading:e(d).isLoading.value,error:e(d).error.value,"export-data":e(d).data.value??void 0,"export-filename":"datatypes",onRefresh:e(d).refetch},{default:n(()=>[y("div",de,[o($,{modelValue:l.value,"onUpdate:modelValue":m[0]||(m[0]=r=>l.value=r),density:"compact",mandatory:""},{default:n(()=>[(t(),_(z,null,F(L,r=>o(B,{key:r.value,value:r.value,icon:r.icon,size:"small"},null,8,["value","icon"])),64))]),_:1},8,["modelValue"])]),l.value==="bar"&&e(d).data.value?(t(),s(T,{key:0,data:e(d).data.value,height:350},null,8,["data"])):l.value==="donut"&&e(d).data.value?(t(),s(W,{key:1,data:e(d).data.value,height:350,onSelect:h},null,8,["data"])):l.value==="treemap"&&e(d).data.value?(t(),s(A,{key:2,data:e(d).data.value,height:350,onSelect:h},null,8,["data"])):l.value==="horizontal"&&e(d).data.value?(t(),s(P,{key:3,data:e(d).data.value,height:350,onSelect:h},null,8,["data"])):x("",!0)]),_:1},8,["loading","error","export-data","onRefresh"])]),_:1}),o(C,{cols:"12",md:"6"},{default:n(()=>[o(R,{title:"Language Coverage",subtitle:"Top 20 languages by property label count",icon:"mdi-translate",loading:e(u).isLoading.value,error:e(u).error.value,"export-data":e(u).data.value??void 0,"export-filename":"languages",onRefresh:e(u).refetch},{default:n(()=>[y("div",ce,[o($,{modelValue:i.value,"onUpdate:modelValue":m[1]||(m[1]=r=>i.value=r),density:"compact",mandatory:""},{default:n(()=>[(t(),_(z,null,F(L,r=>o(B,{key:r.value,value:r.value,icon:r.icon,size:"small"},null,8,["value","icon"])),64))]),_:1},8,["modelValue"])]),i.value==="bar"&&e(u).data.value?(t(),s(T,{key:0,data:e(u).data.value,height:350,"bar-color":"#4CAF50"},null,8,["data"])):i.value==="donut"&&e(u).data.value?(t(),s(W,{key:1,data:e(u).data.value,height:350,onSelect:h},null,8,["data"])):i.value==="treemap"&&e(u).data.value?(t(),s(A,{key:2,data:e(u).data.value,height:350,onSelect:h},null,8,["data"])):i.value==="horizontal"&&e(u).data.value?(t(),s(P,{key:3,data:e(u).data.value,height:350,"bar-color":"#4CAF50",onSelect:h},null,8,["data"])):x("",!0)]),_:1},8,["loading","error","export-data","onRefresh"])]),_:1})]),_:1}),o(k,null,{default:n(()=>[o(C,{cols:"12",md:"6"},{default:n(()=>[o(R,{title:"Top Properties",subtitle:"Top 30 properties by statement count",icon:"mdi-format-list-bulleted",loading:e(c).isLoading.value,error:e(c).error.value,"export-data":e(c).data.value??void 0,"export-filename":"properties",onRefresh:e(c).refetch},{default:n(()=>[y("div",me,[o($,{modelValue:v.value,"onUpdate:modelValue":m[2]||(m[2]=r=>v.value=r),density:"compact",mandatory:""},{default:n(()=>[(t(),_(z,null,F(L,r=>o(B,{key:r.value,value:r.value,icon:r.icon,size:"small"},null,8,["value","icon"])),64))]),_:1},8,["modelValue"])]),v.value==="bar"&&e(c).data.value?(t(),s(T,{key:0,data:e(c).data.value,height:400,"bar-color":"#FF9800"},null,8,["data"])):v.value==="donut"&&e(c).data.value?(t(),s(W,{key:1,data:e(c).data.value,height:400,onSelect:h},null,8,["data"])):v.value==="treemap"&&e(c).data.value?(t(),s(A,{key:2,data:e(c).data.value,height:400,onSelect:h},null,8,["data"])):v.value==="horizontal"&&e(c).data.value?(t(),s(P,{key:3,data:e(c).data.value,height:400,"bar-color":"#FF9800",onSelect:h},null,8,["data"])):x("",!0)]),_:1},8,["loading","error","export-data","onRefresh"])]),_:1}),o(C,{cols:"12",md:"6"},{default:n(()=>[o(R,{title:"Property Classes",subtitle:"Top 30 property classes by usage",icon:"mdi-shape",loading:e(a).isLoading.value,error:e(a).error.value,"export-data":e(a).data.value??void 0,"export-filename":"property-classes",onRefresh:e(a).refetch},{default:n(()=>[y("div",pe,[o($,{modelValue:g.value,"onUpdate:modelValue":m[3]||(m[3]=r=>g.value=r),density:"compact",mandatory:""},{default:n(()=>[(t(),_(z,null,F(L,r=>o(B,{key:r.value,value:r.value,icon:r.icon,size:"small"},null,8,["value","icon"])),64))]),_:1},8,["modelValue"])]),g.value==="bar"&&e(a).data.value?(t(),s(T,{key:0,data:e(a).data.value,height:400,"bar-color":"#9C27B0"},null,8,["data"])):g.value==="donut"&&e(a).data.value?(t(),s(W,{key:1,data:e(a).data.value,height:400,onSelect:h},null,8,["data"])):g.value==="treemap"&&e(a).data.value?(t(),s(A,{key:2,data:e(a).data.value,height:400,onSelect:h},null,8,["data"])):g.value==="horizontal"&&e(a).data.value?(t(),s(P,{key:3,data:e(a).data.value,height:400,"bar-color":"#9C27B0",onSelect:h},null,8,["data"])):x("",!0)]),_:1},8,["loading","error","export-data","onRefresh"])]),_:1})]),_:1})],64))]))}}),ke=K(ve,[["__scopeId","data-v-28de89e9"]]);export{ke as default};
//# sourceMappingURL=StatisticsView-DsnXZzmC.js.map
