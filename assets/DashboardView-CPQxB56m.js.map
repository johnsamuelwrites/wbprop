{"version":3,"file":"DashboardView-CPQxB56m.js","sources":["../../src/views/DashboardView.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { computed, ref } from 'vue'\nimport { useWikibaseStore } from '@/stores/wikibase'\nimport {\n  useDatatypeStats,\n  useLanguageStats,\n  usePropertyStats,\n  useWikiProjectStats,\n  usePropertyClassStats,\n  useCommonsDistinctTypes,\n} from '@/composables/useSparqlQuery'\nimport ChartCard from '@/components/charts/ChartCard.vue'\nimport BarChart from '@/components/charts/BarChart.vue'\n\nconst wikibaseStore = useWikibaseStore()\n\nconst datatypeStats = useDatatypeStats()\nconst languageStats = useLanguageStats()\nconst propertyStats = usePropertyStats()\nconst wikiProjectStats = useWikiProjectStats()\nconst propertyClassStats = usePropertyClassStats()\nconst commonsDistinctTypes = useCommonsDistinctTypes()\nconst commonsTypeSearch = ref('')\n\nconst isWikidata = computed(() => wikibaseStore.activeConfig.id === 'wikidata')\nconst isCommons = computed(() => wikibaseStore.activeConfig.id === 'commons')\nconst availabilityNote = computed(() => wikibaseStore.activeConfig.availabilityNote)\nconst requiresAuth = computed(() => wikibaseStore.activeConfig.requiresAuthentication)\nconst authUrl = computed(() => wikibaseStore.activeConfig.authUrl)\nconst cookieBasedAuth = computed(() => wikibaseStore.activeConfig.cookieBasedAuth)\nconst commonsFilteredTypes = computed(() => {\n  const values = commonsDistinctTypes.data.value ?? []\n  const query = commonsTypeSearch.value.trim().toLowerCase()\n  if (!query) {\n    return values\n  }\n  return values.filter((value) => value.toLowerCase().includes(query))\n})\n\nfunction openAuthPage() {\n  if (authUrl.value) {\n    window.open(authUrl.value, '_blank')\n  }\n}\n</script>\n\n<template>\n  <div class=\"dashboard\">\n    <v-row class=\"mb-4\">\n      <v-col cols=\"12\">\n        <h1 class=\"text-h4 font-weight-bold\">\n          {{ wikibaseStore.activeConfig.name }} Properties Dashboard\n        </h1>\n        <p class=\"text-subtitle-1 text-medium-emphasis mt-1\">\n          Explore and visualize properties across the Wikibase instance\n        </p>\n      </v-col>\n    </v-row>\n\n    <v-row v-if=\"requiresAuth && cookieBasedAuth\" class=\"mb-2\">\n      <v-col cols=\"12\">\n        <v-alert type=\"info\" variant=\"tonal\">\n          <div class=\"d-flex align-center\">\n            <div class=\"flex-grow-1\">\n              <strong>{{ wikibaseStore.activeConfig.name }}</strong> requires authentication.\n              Login with your Wikimedia account to access the SPARQL endpoint.\n              After logging in, refresh this page.\n            </div>\n            <v-btn\n              v-if=\"authUrl\"\n              color=\"primary\"\n              variant=\"flat\"\n              class=\"ml-4\"\n              prepend-icon=\"mdi-login\"\n              @click=\"openAuthPage\"\n            >\n              Login\n            </v-btn>\n          </div>\n        </v-alert>\n      </v-col>\n    </v-row>\n\n    <v-row v-else-if=\"availabilityNote\" class=\"mb-2\">\n      <v-col cols=\"12\">\n        <v-alert type=\"warning\" variant=\"tonal\">\n          {{ availabilityNote }}\n        </v-alert>\n      </v-col>\n    </v-row>\n\n    <v-row v-if=\"isCommons\">\n      <v-col cols=\"12\">\n        <v-card class=\"types-card\">\n          <v-card-title class=\"d-flex align-center\">\n            <v-icon icon=\"mdi-format-list-bulleted-type\" class=\"mr-2\" size=\"small\" />\n            Distinct RDF Types\n            <v-chip\n              size=\"small\"\n              color=\"primary\"\n              variant=\"tonal\"\n              class=\"ml-3\"\n            >\n              {{ commonsFilteredTypes.length }} / {{ commonsDistinctTypes.data.value?.length ?? 0 }}\n            </v-chip>\n            <v-spacer />\n            <v-btn\n              icon=\"mdi-refresh\"\n              variant=\"text\"\n              size=\"small\"\n              :loading=\"commonsDistinctTypes.isLoading.value\"\n              @click=\"commonsDistinctTypes.refetch\"\n            />\n          </v-card-title>\n\n          <v-card-subtitle>\n            SELECT DISTINCT ?val WHERE { ?item rdf:type ?val. }\n          </v-card-subtitle>\n\n          <v-card-text>\n            <v-text-field\n              v-model=\"commonsTypeSearch\"\n              label=\"Filter types\"\n              prepend-inner-icon=\"mdi-magnify\"\n              variant=\"outlined\"\n              density=\"compact\"\n              clearable\n              class=\"mb-3\"\n            />\n\n            <div v-if=\"commonsDistinctTypes.isLoading.value\" class=\"d-flex justify-center py-10\">\n              <v-progress-circular indeterminate color=\"primary\" />\n            </div>\n\n            <v-alert\n              v-else-if=\"commonsDistinctTypes.error.value\"\n              type=\"error\"\n              variant=\"tonal\"\n              class=\"mb-2\"\n            >\n              {{ commonsDistinctTypes.error.value }}\n            </v-alert>\n\n            <div v-else class=\"types-scroll\">\n              <v-list density=\"compact\" lines=\"one\">\n                <v-list-item\n                  v-for=\"(typeValue, index) in commonsFilteredTypes\"\n                  :key=\"typeValue\"\n                  :title=\"typeValue\"\n                >\n                  <template #prepend>\n                    <v-chip size=\"x-small\" variant=\"outlined\" class=\"mr-3\">\n                      {{ index + 1 }}\n                    </v-chip>\n                  </template>\n                </v-list-item>\n              </v-list>\n            </div>\n          </v-card-text>\n        </v-card>\n      </v-col>\n    </v-row>\n\n    <v-row v-else>\n      <!-- Languages Chart -->\n      <v-col cols=\"12\" md=\"6\" lg=\"4\">\n        <ChartCard\n          title=\"Languages\"\n          subtitle=\"Property labels by language\"\n          icon=\"mdi-translate\"\n          :loading=\"languageStats.isLoading.value\"\n          :error=\"languageStats.error.value\"\n          :export-data=\"languageStats.data.value ?? undefined\"\n          export-filename=\"languages\"\n          @refresh=\"languageStats.refetch\"\n        >\n          <BarChart\n            v-if=\"languageStats.data.value\"\n            :data=\"languageStats.data.value\"\n            :height=\"300\"\n          />\n        </ChartCard>\n      </v-col>\n\n      <!-- Datatypes Chart -->\n      <v-col cols=\"12\" md=\"6\" lg=\"4\">\n        <ChartCard\n          title=\"Datatypes\"\n          subtitle=\"Properties by datatype\"\n          icon=\"mdi-code-tags\"\n          :loading=\"datatypeStats.isLoading.value\"\n          :error=\"datatypeStats.error.value\"\n          :export-data=\"datatypeStats.data.value ?? undefined\"\n          export-filename=\"datatypes\"\n          @refresh=\"datatypeStats.refetch\"\n        >\n          <BarChart\n            v-if=\"datatypeStats.data.value\"\n            :data=\"datatypeStats.data.value\"\n            :height=\"300\"\n          />\n        </ChartCard>\n      </v-col>\n\n      <!-- Properties Chart -->\n      <v-col cols=\"12\" md=\"6\" lg=\"4\">\n        <ChartCard\n          title=\"Properties\"\n          subtitle=\"Top properties by statement count\"\n          icon=\"mdi-format-list-bulleted\"\n          :loading=\"propertyStats.isLoading.value\"\n          :error=\"propertyStats.error.value\"\n          :export-data=\"propertyStats.data.value ?? undefined\"\n          export-filename=\"properties\"\n          @refresh=\"propertyStats.refetch\"\n        >\n          <BarChart\n            v-if=\"propertyStats.data.value\"\n            :data=\"propertyStats.data.value\"\n            :height=\"300\"\n          />\n        </ChartCard>\n      </v-col>\n\n      <!-- WikiProjects Chart (Wikidata only) -->\n      <v-col v-if=\"isWikidata\" cols=\"12\" md=\"6\">\n        <ChartCard\n          title=\"WikiProjects\"\n          subtitle=\"Properties by WikiProject scope\"\n          icon=\"mdi-account-group\"\n          :loading=\"wikiProjectStats.isLoading.value\"\n          :error=\"wikiProjectStats.error.value\"\n          :export-data=\"wikiProjectStats.data.value ?? undefined\"\n          export-filename=\"wikiprojects\"\n          @refresh=\"wikiProjectStats.refetch\"\n        >\n          <BarChart\n            v-if=\"wikiProjectStats.data.value\"\n            :data=\"wikiProjectStats.data.value\"\n            :height=\"350\"\n          />\n        </ChartCard>\n      </v-col>\n\n      <!-- Property Classes Chart -->\n      <v-col cols=\"12\" :md=\"isWikidata ? 6 : 12\">\n        <ChartCard\n          title=\"Property Classes\"\n          subtitle=\"Properties by class/type\"\n          icon=\"mdi-shape\"\n          :loading=\"propertyClassStats.isLoading.value\"\n          :error=\"propertyClassStats.error.value\"\n          :export-data=\"propertyClassStats.data.value ?? undefined\"\n          export-filename=\"property-classes\"\n          @refresh=\"propertyClassStats.refetch\"\n        >\n          <BarChart\n            v-if=\"propertyClassStats.data.value\"\n            :data=\"propertyClassStats.data.value\"\n            :height=\"350\"\n          />\n        </ChartCard>\n      </v-col>\n    </v-row>\n  </div>\n</template>\n\n<style scoped>\n.dashboard {\n  padding: 16px;\n}\n\n.types-card {\n  height: 100%;\n}\n\n.types-scroll {\n  max-height: 540px;\n  overflow-y: auto;\n  border: 1px solid rgba(255, 255, 255, 0.08);\n  border-radius: 8px;\n}\n</style>\n"],"names":["wikibaseStore","useWikibaseStore","datatypeStats","useDatatypeStats","languageStats","useLanguageStats","propertyStats","usePropertyStats","wikiProjectStats","useWikiProjectStats","propertyClassStats","usePropertyClassStats","commonsDistinctTypes","useCommonsDistinctTypes","commonsTypeSearch","ref","isWikidata","computed","isCommons","availabilityNote","requiresAuth","authUrl","cookieBasedAuth","commonsFilteredTypes","values","query","value","openAuthPage","_openBlock","_createElementBlock","_hoisted_1","_createVNode","_component_v_row","_component_v_col","_createElementVNode","_hoisted_2","_toDisplayString","_unref","_cache","_createBlock","_component_v_alert","_hoisted_3","_hoisted_4","_component_v_btn","_component_v_card","_component_v_card_title","_component_v_icon","_component_v_chip","_component_v_spacer","_component_v_card_subtitle","_component_v_card_text","_component_v_text_field","$event","_hoisted_5","_component_v_progress_circular","_hoisted_6","_component_v_list","_Fragment","_renderList","typeValue","index","_component_v_list_item","ChartCard","BarChart"],"mappings":"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"}