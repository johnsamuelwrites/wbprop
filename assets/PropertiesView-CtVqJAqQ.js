import{d as C,u as k,l as P,b as s,a as l,y as B,V as I,r as o,o as L,A as S,B as v,t as m,C as D,j as N,E as Q,h as T,i as q,J as z,D as y,g as _,z as A,_ as E}from"./index-DEexslqv.js";import{S as F,Q as O}from"./query-builder-BqqifzF3.js";const U={class:"properties-view"},j={class:"text-subtitle-1 text-medium-emphasis mt-1"},J=C({__name:"PropertiesView",setup(R){const d=k(),r=o(""),i=o(!1),c=o([]),b=o(1),u=o(25),h=[{title:"ID",key:"id",sortable:!0},{title:"Label",key:"label",sortable:!0},{title:"Datatype",key:"datatype",sortable:!0}];async function f(){i.value=!0;try{const e=new F(d.activeConfig),t=new O(d.activeConfig),a=(b.value-1)*u.value,n=t.buildAllPropertiesQuery(u.value,a),w=await e.query(n);c.value=w.results.bindings.map(p=>({id:x(p.property?.value??""),label:p.propertyLabel?.value??"",datatype:g(p.datatype?.value??"")}))}catch(e){console.error("Failed to load properties:",e)}finally{i.value=!1}}function x(e){const t=e.match(/[PQ]\d+$/);return t?t[0]:e}function g(e){const t=e.lastIndexOf("#"),a=e.lastIndexOf("/"),n=t>a?t:a;return n>=0?e.substring(n+1):e}const V=A(()=>{if(!r.value)return c.value;const e=r.value.toLowerCase();return c.value.filter(t=>t.id.toLowerCase().includes(e)||t.label.toLowerCase().includes(e))});return f(),(e,t)=>(L(),P("div",U,[s(B,{class:"mb-4"},{default:l(()=>[s(S,{cols:"12"},{default:l(()=>[t[1]||(t[1]=v("h1",{class:"text-h4 font-weight-bold"},"Properties",-1)),v("p",j," Browse all properties in "+m(D(d).activeConfig.name),1)]),_:1})]),_:1}),s(I,null,{default:l(()=>[s(N,{class:"d-flex align-center"},{default:l(()=>[s(Q,{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=a=>r.value=a),"prepend-inner-icon":"mdi-magnify",label:"Search properties","single-line":"","hide-details":"",density:"compact",variant:"outlined",class:"mr-4",style:{"max-width":"400px"}},null,8,["modelValue"]),s(T),s(q,{icon:"mdi-refresh",variant:"text",loading:i.value,onClick:f},null,8,["loading"])]),_:1}),s(z,{headers:h,items:V.value,loading:i.value,"items-per-page":u.value,class:"elevation-0"},{"item.id":l(({item:a})=>[s(y,{size:"small",color:"primary",variant:"tonal"},{default:l(()=>[_(m(a.id),1)]),_:2},1024)]),"item.datatype":l(({item:a})=>[s(y,{size:"small",variant:"outlined"},{default:l(()=>[_(m(a.datatype||"Unknown"),1)]),_:2},1024)]),_:1},8,["items","loading","items-per-page"])]),_:1})]))}}),G=E(J,[["__scopeId","data-v-29b005f6"]]);export{G as default};
//# sourceMappingURL=PropertiesView-CtVqJAqQ.js.map
